{"version":3,"sources":["store.js","search.js","components/navbar.js","pages/404.js","components/chat.js","components/notif.js","components/header.js","pages/login.js","components/map.js","components/match/searchBar.js","components/match/gallery.js","pages/game.js","components/logout.js","components/account/image.js","components/account/profil.js","components/account/civil.js","components/account/getInterest.js","components/account/info.js","components/account/editpass.js","components/account/account.js","components/account/userBlocks.js","components/account/sidebar.js","pages/registration.js","index.js","pages/home.js","pages/account.js"],"names":["socket","io","Store","React","createContext","reducer","state","action","type","loginState","Object","objectSpread","login","id_session","id","username","token","img","localStorage","setItem","JSON","stringify","emit","removeItem","avatarState","payload","tmp","profil","SearchStore","initialState","cat","mail","lastname","firstname","bio","gender","sexpref","ageMin","ageMax","defaultAge","birthdate","localMax","city","lat","lon","popularMin","popularMax","defaultPopular","defaultTags","tags","visits","likes","matchs","blocks","filter","sex","age","local","popular","search","bool","loaded","lastco","Navbar","useContext","displayBurger","x","document","getElementById","className","react_default","a","createElement","NavLink","to","onClick","index_es","icon","faBars","src","alt","faPowerOff","props","es","assign","getProps","_ref","style","color","isCurrent","NotFound","_useState","useState","_useState2","slicedToArray","count","setCount","useEffect","intervalID","setInterval","clearInterval","navigate","Fragment","Chat","_useContext2","dispatchSearch","chaters","setChaters","_useState3","_useState4","chatWindow","setChatWindow","_useState5","_useState6","text","setText","_useState7","_useState8","messCounter","setMessCounter","_useState9","_useState10","error","setError","_useState11","_useState12","usersDisplay","setUsersDisplay","_useState13","_useState14","online","setOnline","_openChatWindow","asyncToGenerator","regenerator_default","mark","_callee2","e","data","oldMessage","j","wrap","_context2","prev","next","Date","findIndex","f","id_user","fetchOldMessage","sent","concat","toConsumableArray","messages","newmess","stop","apply","this","arguments","source","axios","CancelToken","_fetchChatersName","_callee","ids","time","res","idBlocked","tmpChaters","_context","get","cancelToken","map","id_blocked","includes","length","forEach","el","id_author","t0","isCancel","cancel","id_user1","id_user2","join","_x","_x2","fetchChatersName","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","on","i","tmpChatWindow","push","scroll","getElementsByClassName","k","scrollTop","scrollHeight","removeListener","display","faCommentAlt","index","key","_x3","_x4","openChatWindow","faCircle","backgroundColor","marginLeft","mess","onSubmit","preventDefault","id_receiver","defineProperty","sendMessage","autoFocus","placeholder","value","onChange","target","writeMessage","onKeyDown","shiftKey","evt","MouseEvent","initMouseEvent","window","dispatchEvent","pressEnter","getTime","lastTime","diffTime","toTimeString","slice","_callee3","myId","messTmp","_context3","date","content","abrupt","Notif","countNotif","setCountNotif","notif","setNotif","_watchNotif","isDisplay","id_visitor","id_visited","id_liked","tmpMatchs","delete","id_match","id_like","tmpLikes","bol","id_visit","_fetchOldNotif","fetchOldNotif","faBell","name","renderText","Header","useFormInput","init","setValue","MyMap","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","Map","center","coord","zoom","minZoom","maxZoom","height","zIndex","TileLayer","attribution","url","Marker","position","Popup","others","Circle","latitude","longitude","radius","SearchBar","_useContext","interest","setInterest","setAge","setPopular","setLocal","val","userSearch","setUserSearch","toggleSugg","toggleLikes","toggleMatchs","toggleVisits","toggleFilter","newFilter","_fetchTags","q","id_interest","fetchTags","faCoffee","faEye","faHeart","faStar","checked","htmlFor","Slider","min","max","step","newValue","onChangeCommitted","valueLabelDisplay","aria-labelledby","aria-label","tag","find","newTag","deleteTags","name_interest","faTimes","addTags","faCheck","test","Gallery","other","setOther","targother","setTargother","visited","setVisited","liked","setLiked","sortSearch","setSortSearch","ascSort","setAscSort","setI","_useState15","_useState16","tmpTargother","setTmpTargother","_useState17","_useState18","_useState19","_useState20","report","_blockAccount","result","post","displayModal","modal","addEventListener","removeEventListener","searchOthers","getVisits","getLikes","matches","mat","h","getMatches","listVisits","block","elem","filterBlocks","profils","distanceKm","every","regexp","RegExp","match","filterProfils","changeTri","defaultValue","parseInt","tab","disabled","loading","watchProfil","getMainPic","faAngleDoubleDown","troncDate","imgs","path","status","like","faExclamationTriangle","id_other","degreesToRadians","degrees","Math","PI","lat1","lon1","lat2","lon2","dLat","dLon","sin","cos","atan2","sqrt","crit","sens","sort","b","tmpSearch","countCommonTag","tab1","tab2","abs","Logout","dispatch","Image","fileInput","useRef","images","setImages","callback","useCallback","addProfilImg","upload","userIMG","FormData","_uploadImg","append","uploadImg","_addProfilImg","id_img","_fetchData","fetchData","faUserCircle","faTimesCircle","deleteImg","onDrop","border","dataTransfer","files","onDragOver","onDragLeave","ref","current","size","accept","Profil","info","str","setGenderText","setSexprefText","Civil","_props$id","_props$info","_handleLastname","_handleFirstname","_handleEditCivil","toUpperCase","show","onBlur","initialValue","GetInterest","_props$search","setNewTag","_changeInterest","_removeInterest","_addTag","_callee4","_context4","toLowerCase","_getInterest","allInt","getInterest","removeInterest","Info","setCity","sugg","setSugg","setLoading","setCoord","_handleEditProfil","_coord","_ref2","getLoc","_changeCity","cities","changeCitySugg","maxLength","_success","pos","crd","coords","getCity","navigator","geolocation","getCurrentPosition","err","enableHighAccuracy","timeout","maximumAge","nom","address","country","_callee5","_context5","Editpass","password","cfpassword","_handleEditPass","Password","Cfpassword","pwd","getElementsByTagName","check_value","_check_value","useCheckServForVal","faCheckCircle","required","check_cfpassword","_check_cfpassword","Account","setMail","_editMail","UserBlocks","setOthers","_deblock","_fetchOthersData","fetchOthersData","deblock","Sidebar","setShow","toggleView","view","Gender","Birthdate","year","month","toString","padStart","day","Lastname","Firstname","Username","Email","ReactDOM","render","getItem","parse","createState","_React$useReducer","useReducer","_React$useReducer2","Provider","children","_fetchUserData","uInfo","uInter","agemin","agemax","fetchUserData","loc","pop","filters","setFilters","fetchDb","setFetchDb","Uwids","getUnWantedIds","score","diff","c","nbTags","AlgoMatch","filterOthers","flexDirection","toFixed","faChevronCircleLeft","faChevronCircleRight","identity","geoloc","setGeoloc","_handleLogin","_forcePosition","process","watchId","watchPosition","code","PERMISSION_DENIED","forcePosition","clearWatch","logout","email","success","setSuccess","_handleSubmit","fetch","method","headers","Accept","Content-Type","body","json","keys","boxShadow","registration_Password","registration_Cfpassword","setData","_validate","response","validate","_handleForgot","default"],"mappings":"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","file":"static/js/main.7fb6e562.chunk.js","sourcesContent":["import React from 'react'\n//import axios from 'axios';\nimport io from 'socket.io-client';\n\n//export const socket = io('e1r11p17.42.fr:3001');//A CHANGER EN PROD\nexport const socket = io('localhost:3001');//A CHANGER EN PROD\nexport const Store = React.createContext();\n\nfunction createState()\n{\n\ttry {\n\t\tlet initialState = localStorage.getItem('store');\n\t\tif (!initialState)\n\t\t\treturn (undefined);\n\t\telse\n\t\t\treturn (JSON.parse(initialState));\n\t} catch (e) {\n\t\t//console.error(e);\n\t\treturn (undefined);\n\t}\n}\n\nfunction reducer(state, action)\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'LOGIN':\n\t\t\tlet loginState = { ...state, login: true, id_session: action.id,\n\t\t\t\tusername: action.username, token: action.token, img: action.img };\n\t\t\tlocalStorage.setItem('store', JSON.stringify(loginState));\n\t\t\tsocket.emit('login', action.id);\n\t\t\treturn (loginState);\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('store');\n\t\t\tsocket.emit('logout', state.id_session);\n\t\t\treturn ({ ...state, login: false, id_session: '', username: '',\n\t\t\t\ttoken: '', img: '/public/img/avatar.png'});\n\t\tcase 'CHANGE_AVATAR':\n\t\t\tlet avatarState = {...state, img: action.payload };\n\t\t\tlocalStorage.setItem('store', JSON.stringify(avatarState));\n\t\t\treturn (avatarState);\n\t\tcase 'PROFIL':\n\t\t\tlet tmp = {...state, profil: action.profil};\n\t\t\tlocalStorage.setItem('store', JSON.stringify(tmp));\n\t\t\treturn (tmp);\n\t\tdefault:\n\t\t\treturn (state);\n\t}\n}\n\nexport function StoreProvider(props)\n{\n\tlet initialState = createState();\n\tif (!initialState)\n\t\tinitialState = {\n\t\t\tlogin: false,\n\t\t\tusername: '',\n\t\t\tid_session: null,\n\t\t\ttoken: '',\n\t\t\tprofil: false,\n\t\t\timg: '/public/img/avatar.png'\n\t\t};\n\telse\n\t\tsocket.emit('login', initialState.id_session);\n\tconst [state, dispatch] = React.useReducer(reducer, initialState);\n\tconst value = { state, dispatch };\n\n\treturn (<Store.Provider value={value}>\n\t\t\t{props.children}\n\t</Store.Provider>\n\t);\n}\n","import React, { useContext, useEffect } from 'react'\nimport { Store } from './store';\nimport axios from 'axios';\nexport const SearchStore = React.createContext();\n\nconst initialState = {\n\tcat: '',\n\tmail: '',\n\tlastname: '',\n\tfirstname: '',\n\tbio: '',\n\tgender: '',\n\tsexpref: '',\n\tageMin: '',\n\tageMax: '',\n\tdefaultAge: '',\n\tbirthdate: '',\n\tlocalMax: '',\n\tcity: '',\n\tlat: '',\n\tlon: '',\n\tpopularMin: '',\n\tpopularMax: '',\n\tdefaultPopular: '',\n\tdefaultTags: [],\n\ttags: [],\n\tvisits: [],\n\tlikes: [],\n\tmatchs: [],\n\tblocks: [],\n\tfilter: {sex: true, age: false, local: false,\n\t\tpopular: false, tags: false, search: {bool: false}},\n\tloaded: false,\n\tlastco: ''\n};\n\nfunction reducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'INIT':\n\t\t\treturn (action.payload);\n\t\tcase 'CHANGE_CIVIL':\n\t\t\treturn({...state, lastname: action.lastname,\n\t\t\t\tfirstname: action.firstname, gender: action.gender});\n\t\tcase 'CHANGE_PUBLIC':\n\t\t\treturn({...state, sexpref: action.sexpref, bio: action.bio,\n\t\t\t\tcity: action.city, lat: action.lat, lon: action.lon});\n\t\tcase 'CHANGE_TAGS':\n\t\t\treturn ({...state, defaultTags: action.tags, tags: action.tags});\n\t\tcase 'CHANGE_MAIL':\n\t\t\treturn({...state, mail: action.mail});\n\t\tcase 'SEARCHSHOW':\n\t\t\treturn ({...state, cat: action.cat});\n\t\tcase 'SEARCHAGE':\n\t\t\treturn ({...state, ageMin: action.ageMin, ageMax: action.ageMax});\n\t\tcase 'SEARCHLOCAL':\n\t\t\treturn ({...state, localMax: action.localMax});\n\t\tcase 'SEARCHPOPULAR':\n\t\t\treturn ({...state, popularMin: action.popularMin, popularMax: action.popularMax});\n\t\tcase 'SEARCHSEXPREF':\n\t\t\treturn ({...state, sexpref: action.sexpref});\n\t\tcase 'SEARCHTAGS':\n\t\t\treturn ({...state, tags: action.tags});\n\t\tcase 'SEARCHFILTER':\n\t\t\treturn ({...state, filter: action.filter});\n\t\tcase 'NEW_VISIT':\n\t\t\treturn ({...state, visits: action.payload});\n\t\tcase 'NEW_LIKE':\n\t\t\treturn ({...state, likes: action.payload});\n\t\tcase 'NEW_UNLIKE':\n\t\t\treturn ({...state, likes: action.likes, matchs: action.matchs});\n\t\tcase 'NEW_MATCH':\n\t\t\treturn ({...state, likes: action.likes, matchs: action.matchs});\n\t\tcase 'NEW_BLOCK':\n\t\t\treturn ({...state, blocks: action.payload});\n\t\tcase 'NEW_GAME':\n\t\t\treturn ({...state, visits: action.visits, likes: action.likes});\n\t\tcase 'UP_LASTCO':\n\t\t\treturn ({...state, lastco: action.payload});\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport function SearchProvider(props) {\n\tconst [search, dispatchSearch] = React.useReducer(reducer, initialState);\n\tconst value = { search, dispatchSearch };\n\tconst { state } = useContext(Store);\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function fetchUserData() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/user/findWithId/${state.id_session}`,\n\t\t\t\t\t{cancelToken: source.token});\n\t\t\t\tlet uInfo = res.data;\n\t\t\t\tres = await axios.get(`/user/interactions/${state.id_session}`,\n\t\t\t\t\t{cancelToken: source.token});\n\t\t\t\tlet uInter = res.data;\n\t\t\t\tif (uInfo && uInter)\n\t\t\t\t{\n\t\t\t\t\tlet agemin = uInfo.age - 5 < 18 ? 18 : uInfo.age - 5;\n\t\t\t\t\tlet agemax = uInfo.age + 5 > 80 ? 80 : uInfo.age + 5;\n\t\t\t\t\tlet popularMin = uInfo.popular - 15 < 0 ? 0 : uInfo.popular - 15;\n\t\t\t\t\tlet popularMax = uInfo.popular + 15 > 195 ? 200 : uInfo.popular + 15;\n\t\t\t\t\tdispatchSearch({type: 'INIT', payload: {\n\t\t\t\t\t\tcat: 'sugg',\n\t\t\t\t\t\tmail: uInfo.mail,\n\t\t\t\t\t\tlastname: uInfo.lastname,\n\t\t\t\t\t\tfirstname: uInfo.firstname,\n\t\t\t\t\t\tbio: uInfo.bio,\n\t\t\t\t\t\tgender: uInfo.gender,\n\t\t\t\t\t\tsexpref: uInfo.sexpref,\n\t\t\t\t\t\tageMin: agemin,\n\t\t\t\t\t\tageMax: agemax,\n\t\t\t\t\t\tdefaultAge: uInfo.age,\n\t\t\t\t\t\tbirthdate: uInfo.birthdate,\n\t\t\t\t\t\tlocalMax: 10,\n\t\t\t\t\t\tcity: uInfo.city,\n\t\t\t\t\t\tlat: uInfo.latitude,\n\t\t\t\t\t\tlon: uInfo.longitude,\n\t\t\t\t\t\tpopularMin: popularMin,\n\t\t\t\t\t\tpopularMax: popularMax,\n\t\t\t\t\t\tdefaultPopular: uInfo.popular,\n\t\t\t\t\t\tdefaultTags: uInfo.tags,\n\t\t\t\t\t\ttags: uInfo.tags,\n\t\t\t\t\t\tvisits: uInter.visits,\n\t\t\t\t\t\tlikes: uInter.likes,\n\t\t\t\t\t\tmatchs: uInter.matchs,\n\t\t\t\t\t\tblocks: uInter.blocks,\n\t\t\t\t\t\tfilter: {sex: true, age: false, local: false,\n\t\t\t\t\t\t\tpopular: false, tags: false, search: {bool: false}},\n\t\t\t\t\t\tloaded: true,\n\t\t\t\t\t\tlastco: uInfo.lastco\n\t\t\t\t\t}});\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t}\n\t\t}\n\t\tif (state.login)\n\t\t\tfetchUserData();\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [state.login, dispatchSearch, state.id_session]);\n\n\treturn <SearchStore.Provider value={value}>\n\t\t\t{props.children}\n\t</SearchStore.Provider>\n}\n","import React, { useContext } from 'react';\nimport { Store } from '../store';\nimport { Link } from \"@reach/router\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPowerOff, faBars } from '@fortawesome/free-solid-svg-icons'\n\nexport default function Navbar() {\n\tconst { state }  = useContext(Store);\n\n\tfunction displayBurger() {\n\t\tvar x = document.getElementById(\"topnav\");\n\t\tif (x.className === \"\") {\n\t\t\tx.className = \"responsive\";\n\t\t} else {\n\t\t\tx.className = \"\";\n\t\t}\n\t}\n\n\n\tif (state.login)\n\t\treturn (\n\t\t\t<nav id='topnav'>\n\t\t\t\t\t<NavLink to='' className='icon' onClick={displayBurger}>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faBars} />\n\t\t\t\t\t</NavLink>\n\t\t\t\t<NavLink to='/'>Match</NavLink>{' '}\n\t\t\t\t<NavLink to='/jouer'>Jouer</NavLink>{' '}\n\t\t\t\t<NavLink to='/profil'>\n\t\t\t\t\t<img src={state.img} alt='avatar' className='avatar' />\n\t\t\t\t\t\t{state.username}\n\t\t\t\t\t</NavLink>{' '}\n\t\t\t\t\t<NavLink to='/deconnexion'><FontAwesomeIcon icon={faPowerOff} />\n\t\t\t\t\t\t<span className='infobulle'>Deconnexion</span>\n\t\t\t\t\t</NavLink>\n\t\t\t\t</nav>\n\t\t);\n\telse\n\t\treturn (\n\t\t\t<nav id='topnav'>\n\t\t\t\t\t<NavLink to='' className='icon' onClick={displayBurger}>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faBars} />\n\t\t\t\t\t</NavLink>\n\t\t\t\t<NavLink to='/'>Match</NavLink>{' '}\n\t\t\t\t<NavLink to='/connexion'>Connexion</NavLink>{' '}\n\t\t\t\t<NavLink to='/inscription'>S'inscrire</NavLink>{' '}\n\t\t\t</nav>\n\t\t);\n}\n\nfunction NavLink(props) {\n\treturn (\n\t\t<Link\n\t\t\t{...props} getProps={({ isCurrent }) => {\n\t\t\t\treturn {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tcolor: isCurrent ? \"#374140\" : \"#f8f9f4\"\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}}\n\t\t/>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport Navbar from '../components/navbar';\nimport { navigate } from '@reach/router';\n\nexport default function NotFound() \n{\n\tconst [count, setCount] = useState(7);\n\n\tuseEffect(() => {\n\t\tfunction tick() {\n\t\t\tsetCount(count - 1);\n\t\t}\n\t\tvar intervalID = setInterval(tick, 1000);\n\t\treturn function cleanup() {\n\t\t\tclearInterval(intervalID);\n\t\t}\n\t})\n\tif (count === 0)\n\t\tnavigate('/');\n\treturn (\n\t\t<>\n\t\t<Navbar />\n\t\t<p>Désolé cette page n'existe pas</p>\n\t\t<p>Vous serez redirigé dans {count}...</p>\n\t\t</>\n\t);\n}\n","import React, {useState, useEffect, useContext} from 'react';\nimport axios from 'axios';\nimport {socket} from '../store.js';\nimport { SearchStore } from '../search';\nimport { Store } from '../store';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircle, faCommentAlt } from '@fortawesome/free-solid-svg-icons';\nimport '../css/chat.css';\n\nconst action = 'UP_LASTCO';\n\nexport default function Chat() {\n\tconst { state } = useContext(Store);\n\tconst { search, dispatchSearch } = useContext(SearchStore);\n\tconst [chaters, setChaters] = useState(search.matchs);\n\tconst [chatWindow, setChatWindow] = useState([]);\n\tconst [text, setText] = useState({});\n\tconst [messCounter, setMessCounter] = useState([]);\n\tconst [error, setError] = useState(null);\n\tconst [usersDisplay, setUsersDisplay] = useState(null);\n\tconst [online, setOnline] = useState([]);\n\n\tuseEffect(() => {\n\t\tsetUsersDisplay(document.getElementById('chatUsers'));\n\t}, [])\n\n\t//GETTING NAME AND MAIN PIC FROM DATABASE BASED ON OUR MATCHS\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function fetchChatersName(ids, time) {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`user/others/chat/${ids}`,\n\t\t\t\t\t{cancelToken: source.token});\n\t\t\t\tif (res.data)\n\t\t\t\t{\n\t\t\t\t\tlet idBlocked = search.blocks.map(e => e.id_blocked);\n\t\t\t\t\tlet tmpChaters = res.data.filter(e => \n\t\t\t\t\t\t(!idBlocked.includes(e.id_user)));\n\t\t\t\t\tres = await axios.get(`/user/chat/${state.id_session}/${time}`,\n\t\t\t\t\t\t{cancelToken: source.token});\n\t\t\t\t\tif (res.data && res.data.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetMessCounter(res.data);\n\t\t\t\t\t\tlet j;\n\t\t\t\t\t\tres.data.forEach(el => {\n\t\t\t\t\t\t\tj = tmpChaters.findIndex(e =>\n\t\t\t\t\t\t\t\t(e.id_user === el.id_author));\n\t\t\t\t\t\t\tif (j > -1)\n\t\t\t\t\t\t\t\ttmpChaters[j].newmess = el.count;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetChaters(tmpChaters);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\tif (search.matchs.length > 0 && search.lastco)\n\t\t{\n\t\t\tlet ids = search.matchs.map(e => {\n\t\t\t\tif (e.id_user1 !== state.id_session)\n\t\t\t\t\treturn e.id_user1;\n\t\t\t\telse\n\t\t\t\t\treturn e.id_user2;\n\t\t\t}).join(',');\n\t\t\tlet time = new Date(search.lastco);\n\t\t\ttime = `${time.getFullYear()}-${time.getMonth() + 1}-${time.getDate()} ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n\t\t\tfetchChatersName(ids, time);\n\t\t}\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t};\n\t}, [search.matchs, state.id_session, search.blocks, search.lastco])\n\n\tuseEffect(() => {\n\t\tif (search.matchs.length === 0 && chaters.length > 0) \n\t\t{\n\t\t\tsetChatWindow([]);\n\t\t\tsetChaters([]);\n\t\t}\n\t}, [search.matchs, chaters])\n\n\n\t//SETTING INCOMING MESSAGE\n\tuseEffect(() => {\n\t\tsocket.on('mess', (data) => {\n\t\t\tlet i = chatWindow.findIndex(e => (e.id_user === data.id_author));\n\t\t\tif (i > -1)\n\t\t\t{\n\t\t\t\tlet tmpChatWindow = [...chatWindow];\n\t\t\t\ttmpChatWindow[i].messages.push(data);\n\t\t\t\tsetChatWindow(tmpChatWindow);\n\t\t\t\tdispatchSearch({type: action, payload: new Date()});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ti = messCounter.findIndex(e => (e.id_author === data.id_author));\n\t\t\t\tlet tmp = [...messCounter];\n\t\t\t\tif (i > -1)\n\t\t\t\t\ttmp[i].count = tmp[i].count + 1;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ti = 0;\n\t\t\t\t\ttmp.push({id_author: data.id_author, count: 1});\n\t\t\t\t}\n\t\t\t\tsetMessCounter(tmp);\n\t\t\t\tsetChaters(chaters.map(e => {\n\t\t\t\t\tif (e.id_user === data.id_author)\n\t\t\t\t\t\treturn {...e, newmess: tmp[i].count}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn e\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\t\tlet scroll = document.getElementsByClassName('chatWindowContent');\n\t\tfor (var k = 0; k < scroll.length; k++)\n\t\t\tscroll[k].scrollTop = scroll[k].scrollHeight;\n\t\treturn (() => {\n\t\t\tsocket.removeListener('mess');\n\t\t});\n\t}, [chatWindow, state.id_session, chaters, messCounter, dispatchSearch])\n\n\t//KNOWING WHO IS ONLINE\n\tuseEffect(() => {\n\t\tfunction whoIsOnline() {\n\t\t\tsocket.emit('getSocketUsers');\n\t\t\tsocket.on('getSocketUsers', function(data) {\n\t\t\t\tsetOnline(data);\n\t\t\t});\n\t\t}\n\t\tlet intervalID = setInterval(whoIsOnline, 5000);\n\t\treturn () => {\n\t\t\tsocket.removeListener('getSocketUsers');\n\t\t\tclearInterval(intervalID);\n\t\t};\n\t}, [])\n\n\t//DISLAY ALL CHATERS === MATCHERS(search.matchs)\n\tfunction watchChaters() {\n\t\tif (usersDisplay.style.display === 'block')\n\t\t{\n\t\t\tif (chatWindow.length > 0)\n\t\t\t\tsetChatWindow([]);\n\t\t\tusersDisplay.style.display = 'none';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsocket.emit('getSocketUsers');\n\t\t\tusersDisplay.style.display = 'block';\n\t\t}\n\t\tif (messCounter.length > 0)\n\t\t\tsetMessCounter([]);\n\t}\n\n\t//OPEN A NEW CHAT WINDOW WITH THE SELECTED CHATERS AND LOAD OLD MESSAGES\n\tasync function openChatWindow(e, data) {\n\t\tdispatchSearch({type: action, payload: new Date()});\n\t\tlet i = chatWindow.findIndex(f => (f.id_user === data.id_user));\n\t\tif (i > -1)\n\t\t\tsetChatWindow(chatWindow.filter(f => (f.id_user !== data.id_user)));\n\t\telse\n\t\t{\n\t\t\tlet oldMessage = await fetchOldMessage(data.id_user, state.id_session);\n\t\t\tsetChatWindow([...chatWindow, {...data, messages: oldMessage }]);\n\t\t\tlet tmp = [...chaters];\n\t\t\tlet j = tmp.findIndex(e => (e.id_user === data.id_user));\n\t\t\ttmp[j].newmess = 0;\n\t\t\tsetChaters(tmp);\n\t\t}\n\t}\n\tfunction sendMessage(e, data) {\n\t\te.preventDefault();\n\t\tsocket.emit('chat-message', {id_author: state.id_session, id_receiver: data.id_user, mess: text[data.id_user]});\n\t\tlet i = chatWindow.findIndex(e => (e.id_user === data.id_user));\n\t\tlet tmpChatWindow = [...chatWindow];\n\t\ttmpChatWindow[i].messages = [...data.messages, {id_author: state.id_session, mess: text[data.id_user]}];\n\t\tsetChatWindow(tmpChatWindow);\n\t\tsetText({...text, [data.id_user]: ''});\n\t}\n\tfunction writeMessage(e, data) {\n\t\tsetText({...text, [data.id_user]: e.target.value});\n\t}\n\tfunction pressEnter(e, data) {\n\t\tif (e.key === 'Enter' && !e.shiftKey)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tvar evt = new MouseEvent(\"click\");\n\t\t\tevt.initMouseEvent(\"click\", true, true, window,\n\t\t\t\t0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t\t\tdocument.getElementById(`submit${data.id_user}`).dispatchEvent(evt);\n\t\t}\n\t}\n\tfunction closeWindow(id) {\n\t\tsetChatWindow(chatWindow.filter(f => (f.id_user !== id)));\n\t}\n\n\treturn (\n\t\t<>\n<div id='chat-bar' onClick={watchChaters}>\n\t<FontAwesomeIcon icon={faCommentAlt} className='header-icon' />\n\t\t{(messCounter.length > 0 && usersDisplay && usersDisplay.style.display !== 'block') && <span className='notif-counter'>\n\t\t\t\t{messCounter.length}\n\t\t\t</span>}\n\t\t</div>\n\t\t<ul className='chatWindow-wrapper'>\n\t\t\t<ul id='chatUsers'>\n\t\t\t\t\t{chaters.map((e, index) => (<li key={index} className='chatUser' onClick={(f) => {openChatWindow(f, e)}}>\n\t\t\t\t\t\t<img className='chatUserPic' src={e.img || '/public/img/avatar.png'} alt={`${e.username}-mainPic`} />\n\t\t\t\t\t\t\t{e.username} <FontAwesomeIcon className='online-icon' icon={faCircle} style={{color : online.includes(e.id_user) ? 'green' : 'grey'}} />\n\t\t\t\t\t\t\t\t{e.newmess > 0 && <span className='notif-counter'>\n\t\t\t\t\t\t\t\t\t\t{e.newmess}\n\t\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t\t\t</li>))}\n\t\t\t\t\t\t\t\t\t\t{chaters.length === 0 && <li>Vous devez matcher pour discuter ;)</li>}\n\t\t\t\t\t\t\t\t\t\t\t{error && <li>{error}</li>}\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t{chatWindow && chatWindow.map((e, index) => \n\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={index} className='chatWindow'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='chatWindowHeader' onClick={() => closeWindow(e.id_user)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img className='chatUserPic' src={e.img || 'public/img/avatar.png'} alt={`${e.username}-mainPic`} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{e.username}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='chatWindowContent'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{e.messages && e.messages.map((f, index) =>(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={index} style={{backgroundColor: f.id_author === state.id_session ? '#8EC83C' : '#D8EED8', marginLeft: f.id_author === state.id_session ? 'auto' : '0px'}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{f.mess}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<form onSubmit={(f) => {sendMessage(f, e)}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea autoFocus placeholder='Ecrivez' value={text[e.id_user]} onChange={(f) => {writeMessage(f, e)}} onKeyDown={(f) => pressEnter(f, e)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id={`submit${e.id_user}`} type='submit' value='&rArr;' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n)\n}\n\n//TRANSFORM THE LAST TIME MESSAGE IN DATABASE INTO READABLE STRING\n//IS CONDITIONG BY THE DIFFERENCE BETWEEN NOW AND THE LAST TIME\nexport function getTime(lastTime)\n{\n\tlastTime = new Date(lastTime);\n\tlet nowTime = new Date();\n\tlet diffTime = (nowTime - lastTime) / 3600000;\n\tdiffTime = diffTime < 0 ? -diffTime : diffTime;\n\tif (diffTime > 24)\n\t\tlastTime = lastTime.getDate()+ '/' +(lastTime.getMonth() + 1) + '-' + lastTime.toTimeString().slice(0, 5);\n\telse\n\t\tlastTime = lastTime.toTimeString().slice(0, 5);\n\treturn (lastTime);\n}\n\n//CALL THE DB TO GET ALL MESSAGES FROM A CONVERSATION\nasync function fetchOldMessage(id, myId) {\n\ttry {\n\t\tlet res = await axios.get(`/user/message/${myId},${id}`);\n\t\tif (res.data)\n\t\t{\n\t\t\tlet lastTime = getTime(res.data[res.data.length - 1].date);\n\t\t\tlet messTmp = res.data.map(e => \n\t\t\t\t({id_author: e.id_author, mess: e.content}));\n\t\t\tmessTmp.push({id_author: -1, mess: lastTime});\n\t\t\treturn (messTmp);\n\t\t}\n\t\telse\n\t\t\treturn ([]);\n\t} catch (err) {\n\t\t//console.error(err);\n\t\treturn ([]);\n\t}\n}\n","import React, {useState, useEffect, useContext} from 'react';\nimport axios from 'axios';\nimport { getTime } from './chat';\nimport { socket } from '../store.js';\nimport { SearchStore } from '../search';\nimport { Store } from '../store';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBell } from '@fortawesome/free-solid-svg-icons';\n\nconst action = 'UP_LASTCO';\n\nexport default function Notif() {\n\tconst {state} = useContext(Store);\n\tconst {search, dispatchSearch} = useContext(SearchStore);\n\tconst [countNotif, setCountNotif] = useState(0);\n\tconst [notif, setNotif] = useState(null);\n\n\t//GET NOTIF SOCKET EVENT AND UPDATE CLIENT STATE ON VISITS/LIKES/MATCHS\n\t//AND ADD ONE TO THE NOTIF COUNTER\n\tuseEffect(() => {\n\t\tsocket.on('notif', function(data) {\n\t\t\tif (data.type === 'visit')\n\t\t\t\tdispatchSearch({type: 'NEW_VISIT', payload: [...search.visits, {id_visitor: data.id_author, id_visited: state.id_session}]\n\t\t\t\t});\n\t\t\telse if (data.type === 'like')\n\t\t\t\tdispatchSearch({type: 'NEW_LIKE', payload: [...search.likes,\n\t\t\t\t\t{id_liked: state.id_session, id_author: data.id_author}]\n\t\t\t\t});\n\t\t\telse if (data.type === 'unlike')\n\t\t\t{\n\t\t\t\tlet tmpMatchs = [...search.matchs];\n\t\t\t\tif (data.delete)\n\t\t\t\t\ttmpMatchs = tmpMatchs.filter(e => \n\t\t\t\t\t\t(e.id_match !== data.delete));\n\t\t\t\tdispatchSearch({type: 'NEW_UNLIKE',\n\t\t\t\t\tlikes: search.likes.filter(e =>\n\t\t\t\t\t\t(e.id_like !== data.id_like)), matchs: tmpMatchs\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (data.type === 'match')\n\t\t\t{\n\t\t\t\tlet tmpLikes = data.bol === true ? [...search.likes,\n\t\t\t\t\t{id_like: data.id_like, id_liked: state.id_session,\n\t\t\t\t\t\tid_author: data.id_author}]\n\t\t\t\t\t: [...search.likes, {id_like: data.id_like,\n\t\t\t\t\t\tid_liked: data.id_author, id_author: state.id_session}];\n\t\t\t\tdispatchSearch({type: 'NEW_MATCH', likes: tmpLikes,\n\t\t\t\t\tmatchs: [...search.matchs, {id_match: data.id_match,\n\t\t\t\t\t\tid_user1: state.id_session, id_user2: data.id_author}]\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (data.type === 'game')\n\t\t\t{\n\t\t\t\tdispatchSearch({type: 'NEW_GAME', visits: [...search.visits,\n\t\t\t\t\t{id_visit: data.id_visit, id_visitor: data.id_author,\n\t\t\t\t\t\tid_visited: state.id_session}], likes: [...search.likes,\n\t\t\t\t\t\t\t{id_like: data.id_like, id_liked: state.id_session,\n\t\t\t\t\t\t\t\tid_author: data.id_author}]\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetCountNotif((countNotif + 1));\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.removeListener('notif');\n\t\t};\n\t}, [state, search, countNotif, dispatchSearch])\n\n\tuseEffect(() => {\n\t\tasync function fetchOldNotif()\n\t\t{\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/user/notif/${state.id_session}`);\n\t\t\t\tif (res.data && res.data.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet lastco = new Date(search.lastco);\n\t\t\t\t\tlet tmp = res.data.map(e => {e.date = new Date(e.date);\n\t\t\t\t\t\treturn e});\n\t\t\t\t\tlet i = 0;\n\t\t\t\t\ttmp.forEach(e => {\n\t\t\t\t\t\tif (lastco - e.date < 0)\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t});\n\t\t\t\t\tsetNotif(tmp);\n\t\t\t\t\tsetCountNotif(i);\n\t\t\t\t\treturn ([res.data, i]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn (null);\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\t//console.error(err);\n\t\t\t\treturn (null);\n\t\t\t}\n\t\t}\n\t\tfetchOldNotif()\n\t}, [state.id_session, search.lastco])\n\n\tasync function watchNotif() {\n\t\tlet isDisplay = document.getElementById('notif-wrapper');\n\t\tif (isDisplay.style.display === 'block')\n\t\t\tisDisplay.style.display = 'none';\n\t\telse\n\t\t{\n\t\t\tisDisplay.style.display = 'block';\n\t\t\tdispatchSearch({type: action, payload: new Date()});\n\t\t}\n\t\tif (countNotif > 0)\n\t\t\tsetCountNotif(0);\n\t}\n\n\treturn (\n\t\t<div id='notif-bar' onClick={watchNotif}>\n\t\t\t<FontAwesomeIcon icon={faBell} className='header-icon' />\n\t\t\t\t{countNotif > 0 && <span className='notif-counter'>{countNotif}</span>}\n\t\t\t\t<ul id='notif-wrapper'>\n\t\t\t\t\t\t{notif ? notif.map((e, index) => (<li key={index} className='notif'>\n\t\t\t\t\t\t\t<img className='notifUserPic' src={e.img || '/public/img/avatar.png'} alt={`${e.id_author}-mainPic`} />\n\t\t\t\t\t\t\t\t{renderText(e.type, e.username)}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t({getTime(e.date)})\n\t\t\t\t\t\t\t</li>)) : <li>Vous n'avez aucune notification</li>}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t);\n}\n\nfunction renderText(type, name)\n{\n\tif (type === 'visit')\n\t\treturn (`${name} à visité votre profil.`);\n\telse if (type === 'like')\n\t\treturn(`${name} vous à liké !`);\n\telse if (type === 'unlike')\n\t\treturn(`${name} ne vous aime plus...`);\n\telse if (type === 'match')\n\t\treturn(`Vous avez un nouveau match avec ${name} !!`);\n\telse if (type === 'game')\n\t\treturn(`Votre profil a été suggéré et aimé par ${name} !`);\n}\n","import React, { useContext } from 'react';\nimport { Store } from '../store';\nimport Navbar from './navbar';\nimport Notif from './notif';\nimport Chat from './chat';\nimport '../css/header.css';\n\nexport default function Header() {\n\tconst { state }  = useContext(Store);\n\tif (state.login)\n\t\treturn (\n\t\t<header>\n\t\t<Navbar />\n\t\t<Notif />\n\t\t<Chat />\n\t\t</header>\n\t);\n\telse\n\t\treturn (\n\t\t<header>\n\t\t<Navbar />\n\t\t</header>\n\t);\n}\n","import React, { useContext, useState, useEffect } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport axios from 'axios';\nimport NotFound from './404';\nimport Header from '../components/header';\nimport { Store } from '../store';\nimport '../css/form.css';\n\nexport default function Login() {\n\tconst { state, dispatch }  = useContext(Store);\n\n\tconst identity = useFormInput('');\n\tconst password = useFormInput('');\n\tlet [error, setError] = useState(null);\n\tlet [geoloc, setGeoloc] = useState({latitude: 0, longitude: 0});\n\n\tuseEffect(() => {\n\t\tfunction maPosition(pos) {\n\t\t\tlet lat = pos.coords.latitude;\n\t\t\tlet lon = pos.coords.longitude;\n\t\t\tsetGeoloc({latitude: lat, longitude: lon});\n\t\t}\n\t\tasync function forcePosition() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`http://api.ipstack.com/check?access_key=${process.env.REACT_APP_IPSTACKKEY}`);\n\t\t\t\tlet lat = res.data.latitude;\n\t\t\t\tlet lon = res.data.longitude;\n\t\t\t\tsetGeoloc({latitude: lat, longitude: lon});\n\t\t\t} catch (e) {\n\t\t\t\t//console.error(e);\n\t\t\t\tsetError(\"Une erreur est survenue.\");\n\t\t\t}\n\t\t}\n\t\tvar watchId = navigator.geolocation.watchPosition(maPosition,\n\t\t\tfunction(error) {\n\t\t\t\tif (error.code === error.PERMISSION_DENIED)\n\t\t\t\t\tforcePosition();\n\t\t\t});\n\t\treturn () => {\n\t\t\tnavigator.geolocation.clearWatch(watchId);\n\t\t};\n\t}, [])\n\n\tasync function handleLogin(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tlet result = await axios.post('/login',\n\t\t\t\t{\n\t\t\t\t\tidentity: identity.value,\n\t\t\t\t\tpassword: password.value,\n\t\t\t\t\tlat: geoloc.latitude,\n\t\t\t\t\tlon: geoloc.longitude\n\t\t\t\t});\n\t\t\tlet data = result.data;\n\t\t\tif (data.id_user)\n\t\t\t{\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'LOGIN',\n\t\t\t\t\tid: data.id_user,\n\t\t\t\t\tusername: data.username,\n\t\t\t\t\ttoken: data.token,\n\t\t\t\t\timg: data.img\n\n\t\t\t\t});\n\t\t\t\tnavigate('/');\n\t\t\t}\n\t\t\telse\n\t\t\t\tsetError(data);\n\t\t} catch(err) {\n\t\t\t//console.error(err);\n\t\t\tsetError(\"Une erreur est survenue.\");\n\t\t}\n\t}\n\n\tif (!state.login)\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Header />\n\t\t\t\t<div className=\"containLogin\">\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t<form className=\"formInfo\" onSubmit={handleLogin}>\n\t\t\t\t\t\t\t<div className=\"divForm\">\n\t\t\t\t\t\t\t\t<label>Pseudo ou mail: </label>\n\t\t\t\t\t\t\t\t<input type='text' {...identity} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"divForm\">\n\t\t\t\t\t\t\t\t<label>Mot de passe: </label>\n\t\t\t\t\t\t\t\t<input type='password' {...password}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Link className=\"sendForget\" to='/connexion/oublie'>Mot de passe oublie</Link>\n\t\t\t\t\t\t\t<input className=\"send\" type=\"submit\" value=\"Se connecter\" />\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t);\n\telse\n\t\treturn (<NotFound />);\n}\n\nexport function Forgotpass() {\n\tlet [error, setError] = useState(null);\n\tconst identity = useFormInput('');\n\n\tasync function handleForgot(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tlet result = await axios.post('/forgotpass', {\n\t\t\t\tidentity: identity.value\n\t\t\t});\n\t\t\tif (result.data === \"send\")\n\t\t\t\tnavigate('/');\n\t\t\telse\n\t\t\t\tsetError(result.data);\n\t\t} catch (e) {\n\t\t\t//console.error(e);\n\t\t\tsetError(\"Une erreur est survenue.\");\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t<Header />\n\t\t\t{error && <div>{error}</div>}\n\t\t\t<div className=\"containLogin\">\n\t\t\t<form className=\"formInfo\" onSubmit={handleForgot}>\n\t\t\t\t<div>\n\t\t\t\t\t<label>Pseudo ou mail: </label>\n\t\t\t\t\t<input type='text' {...identity} />\n\t\t\t\t</div>\n\t\t\t\t<input className=\"send\" type=\"submit\" value=\"Envoyer\" />\n\t\t\t</form>\n\t\t\t</div>\n\t</>\n\t);\n}\n\nfunction useFormInput(init) {\n\tconst [value, setValue] = useState(init);\n\n\tfunction handleChange(e) {\n\t\tsetValue(e.target.value);\n\t}\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange\n\t};\n}\n","import React from \"react\";\nimport { Map, TileLayer, Marker, Popup, Circle } from \"react-leaflet\";\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n\nexport default function MyMap(props) {\n\tdelete L.Icon.Default.prototype._getIconUrl;\n\tL.Icon.Default.mergeOptions({\n\t\ticonRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n\t\ticonUrl: require('leaflet/dist/images/marker-icon.png'),\n\t\tshadowUrl: require('leaflet/dist/images/marker-shadow.png')\n\t});\n\n\tlet i = props.index;\n\n\treturn (\n\t\t<Map center={props.coord[0] !== \"\" && props.coord[0] !== 0 ? props.coord : [48.8534, 2.3488]} zoom={12} minZoom={2} maxZoom={18} style={{height: 350, zIndex:0}}>\n\t\t\t<TileLayer\n\t\t\t\tattribution=\"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\"\n\t\t\t\t\turl=\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n\t\t\t\t/>\n\t\t\t\t\t\t{(props.coord[0] !== \"\" && props.coord[0] !== 0) && (<Marker position={props.coord}>\n\t\t\t\t\t\t<Popup>Moi</Popup>\n\t\t\t\t\t</Marker>)}\n\t\t\t\t\t\t{(typeof(i) !== 'number' && props.others.length > 0) && props.others.map((e, index) => (<Circle key={`circle-${index}`} center={[e.latitude, e.longitude]} radius={350}><Popup>{e.username}</Popup></Circle>))}\n\t\t\t\t\t\t\t{(typeof(i) === 'number' && props.others.length > 0 && props.others[i]) && <Circle center={[props.others[i].latitude, props.others[i].longitude]} radius={350}><Popup>{props.others[i].username}</Popup></Circle>}\n\t\t\t\t\t</Map>\n\t)\n}\n","import React, { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport Slider from '@material-ui/core/Slider';\nimport { SearchStore } from '../../search';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCoffee, faHeart, faTimes,\n\tfaCheck, faEye, faStar } from '@fortawesome/free-solid-svg-icons'\nimport '../../css/searchBar.css';\n\nexport default function SearchBar() {\n\tconst { search, dispatchSearch } = useContext(SearchStore);\n\tconst [interest, setInterest ] = useState([]);\n\tconst [age, setAge] = useState([search.ageMin || 18, search.ageMax || 28]);\n\tconst [popular, setPopular] = useState([search.popularMin || 0,\n\t\tsearch.popularMax || 10]);\n\tconst [local, setLocal] = useState(search.localMax || 10);\n\tconst [userSearch, setUserSearch] = useState(search.filter.search.val || '');\n\tconst [error, setError] = useState(null);\n\tlet sexpref = search.sexpref;\n\n\t//GET ALL TAGS FROM DATABASE AND FILTER WITH search TAGS\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function fetchTags() {\n\t\t\ttry {\n\t\t\t\tlet q = await axios.get('/interest', {cancelToken: source.token});\n\t\t\t\tif (q.data)\n\t\t\t\t{\n\t\t\t\t\tlet tmp = search.tags.map(e => (e.id_interest));\n\t\t\t\t\tsetInterest(q.data.filter(e => (!tmp.includes(e.id_interest))));\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tif (axios.isCancel(e))\n\t\t\t\t\t\tsource.cancel();\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t//\tconsole.error(e);\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (search.loaded)\n\t\t\tfetchTags();\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [search.tags, search.loaded]);\n\n\tuseEffect(() => {\n\t\tif (search.ageMin && search.ageMax)\n\t\t\tsetAge([search.ageMin, search.ageMax]);\n\t\tif (search.popularMin && search.popularMax)\n\t\t\tsetPopular([search.popularMin,\n\t\t\t\tsearch.popularMax]);\n\t}, [search.ageMin, search.ageMax, search.popularMin,\n\t\tsearch.popularMax])\n\n\t//TOGGLE SLIDERS\n\tfunction changeAge(e, newValue) {\n\t\tdispatchSearch({type: 'SEARCHAGE',\n\t\t\tageMin: newValue[0], ageMax: newValue[1]});\n\t}\n\tfunction changeAgeVal(e, newValue) {\n\t\tsetAge(newValue);\n\t}\n\n\tfunction changeLocal(e, newValue) {\n\t\tdispatchSearch({type: 'SEARCHLOCAL', localMax: newValue});\n\t}\n\tfunction changeLocalVal(e, newValue) {\n\t\tsetLocal(newValue);\n\t}\n\n\tfunction changePopular(e, newValue) {\n\t\tdispatchSearch({type: 'SEARCHPOPULAR',\n\t\t\tpopularMin: newValue[0], popularMax: newValue[1]});\n\t}\n\tfunction changePopularVal(e, newValue) {\n\t\tsetPopular(newValue);\n\t}\n\n\tfunction changeSexpref(e) {\n\t\tdispatchSearch({type: 'SEARCHSEXPREF', sexpref: e.target.value});\n\t}\n\n\t//TOGGLE TAGS\n\tfunction addTags(e) {\n\t\tlet tag = interest.find(f => (f.id_interest === e))\n\t\tlet newTag = [...search.tags, tag];\n\t\tdispatchSearch({type: 'SEARCHTAGS', tags: newTag});\n\t}\n\tfunction deleteTags(e) {\n\t\tlet tag = search.tags.find(f => (f.id_interest === e));\n\t\tif (tag) {\n\t\t\tlet newTag = search.tags.filter(f =>\n\t\t\t\t(tag.id_interest !== f.id_interest));\n\t\t\tdispatchSearch({type: 'SEARCHTAGS', tags: newTag});\n\t\t}\n\t}\n\n\t//TOGGLE GALLERY VIEWS\n\tfunction toggleSugg() {\n\t\tif (search.cat !== 'sugg')\n\t\t\tdispatchSearch({type: 'SEARCHSHOW', cat: 'sugg'});\n\t}\n\tfunction toggleLikes() {\n\t\tif (search.cat !== 'likes')\n\t\t\tdispatchSearch({type: 'SEARCHSHOW', cat: 'likes'});\n\t}\n\tfunction toggleMatchs() {\n\t\tif (search.cat !== 'matchs')\n\t\t\tdispatchSearch({type: 'SEARCHSHOW', cat: 'matchs'});\n\t}\n\tfunction toggleVisits() {\n\t\tif (search.cat !== 'visits')\n\t\t\tdispatchSearch({type: 'SEARCHSHOW', cat: 'visits'});\n\t}\n\n\t// TOGGLE FILTER\n\tfunction toggleFilter(e) {\n\t\tlet newFilter = {...search.filter};\n\t\tif (e.target.id === 'sex')\n\t\t\tsearch.filter.sex ? newFilter.sex = false : newFilter.sex = true;\n\t\telse if (e.target.id === \"age\")\n\t\t\tsearch.filter.age ? newFilter.age = false : newFilter.age = true;\n\t\telse if (e.target.id === \"local\")\n\t\t\tsearch.filter.local ? newFilter.local = false : newFilter.local = true;\n\t\telse if (e.target.id === \"popular\")\n\t\t\tsearch.filter.popular ? newFilter.popular = false : newFilter.popular = true;\n\t\telse if (e.target.id === \"tags\")\n\t\t\tsearch.filter.tags ? newFilter.tags = false : newFilter.tags = true;\n\t\telse if (e.target.id === \"search\")\n\t\t{\n\t\t\tsearch.filter.search.bool ? newFilter.search.bool = false : newFilter.search.bool = true;\n\t\t\tif (newFilter.search.bool && userSearch.length > 3)\n\t\t\t\tnewFilter.search.val = userSearch;\n\t\t}\n\t\tdispatchSearch({type: 'SEARCHFILTER', filter: newFilter});\n\t}\n\n\t//TOGGLE USER SEARCH\n\tfunction toggleUserSearch(e) {\n\t\tsetUserSearch(e.target.value);\n\t\tif (search.filter.search.bool === true\n\t\t&& (/^[a-zA-Z]+$/.test(e.target.value) || e.target.value === \"\"))\n\t\t\tdispatchSearch({type: 'SEARCHFILTER', filter: {...search.filter,\n\t\t\t\tsearch: {bool: true, val: e.target.value}\n\t\t\t}});\n\t}\n\n\treturn(\n\t\t<div id=\"searchBar\">\n\t\t\t<nav>\n\t\t\t\t<ul>\n\t\t\t\t\t\t{search.cat === 'sugg' ? <li className='currentSearch' onClick={toggleSugg}><FontAwesomeIcon icon={faCoffee} /></li> : <li onClick={toggleSugg} ><FontAwesomeIcon icon={faCoffee} /></li> }\n\t\t\t\t\t\t{search.cat === 'visits' ? <li className='currentSearch' onClick={toggleVisits}><FontAwesomeIcon icon={faEye} /></li> : <li onClick={toggleVisits}><FontAwesomeIcon icon={faEye} /></li> }\n\t\t\t\t\t\t\t{search.cat === 'likes' ? <li className='currentSearch' onClick={toggleLikes} ><FontAwesomeIcon icon={faHeart} /></li> : <li onClick={toggleLikes}><FontAwesomeIcon icon={faHeart} /></li> }\n\t\t\t\t\t\t\t\t{search.cat === 'matchs' ? <li className='currentSearch' onClick={toggleMatchs}><FontAwesomeIcon icon={faStar} /></li> : <li onClick={toggleMatchs}><FontAwesomeIcon icon={faStar} /></li> }\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h4>Les filtres de recherche:</h4>\n\t\t\t\t\t\t\t<div className=\"titleSlide\">\n\t\t\t\t\t\t\t\t<input id=\"sex\" type=\"checkbox\" onChange={toggleFilter} checked={search.filter.sex ? true : false} />\n\t\t\t\t\t\t\t\t<label htmlFor=\"sex\">Sexe</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"sexpref\">\n\t\t\t\t\t\t\t\t<select value={sexpref} onChange={changeSexpref} className=\"searchSex\">\n\t\t\t\t\t\t\t\t\t<option value=\"bi\">&#9892; (Bi)</option>\n\t\t\t\t\t\t\t\t\t<option value=\"female\">&#9792; (F)</option>\n\t\t\t\t\t\t\t\t\t<option value=\"male\">&#9794; (M)</option>\n\t\t\t\t\t\t\t\t\t<option value=\"other\">&#9900; (Autre)</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"titleSlide\">\n\t\t\t\t\t\t\t\t<input id=\"age\" type=\"checkbox\" onChange={toggleFilter}\n\t\t\t\t\t\t\t\tchecked={search.filter.age ? true : false}/>\n\t\t\t\t\t\t\t\t<label htmlFor=\"age\">Age</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={search.filter.age ? \"slideActiv\" : \"slide\"}>\n\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\tmin= {18}\n\t\t\t\t\t\t\t\t\tmax = {80}\n\t\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\t\tvalue={age}\n\t\t\t\t\t\t\t\t\tonChange={changeAgeVal}\n\t\t\t\t\t\t\t\t\tonChangeCommitted={changeAge}\n\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"on\"\n\t\t\t\t\t\t\t\t\taria-labelledby=\"range-slider\"\n\t\t\t\t\t\t\t\t\taria-label=\"test\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"titleSlide\">\n\t\t\t\t\t\t\t\t\t<input id=\"local\" type=\"checkbox\" onChange={toggleFilter}\n\t\t\t\t\t\t\t\t\tchecked={search.filter.local ? true : false}/>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"local\">Localisation</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={search.filter.local ? \"slideActiv\" : \"slide\"}>\n\t\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\t\tmin= {10}\n\t\t\t\t\t\t\t\t\t\tmax = {1000}\n\t\t\t\t\t\t\t\t\t\tvalue={local}\n\t\t\t\t\t\t\t\t\t\tstep={5}\n\t\t\t\t\t\t\t\t\t\tonChange={changeLocalVal}\n\t\t\t\t\t\t\t\t\t\tonChangeCommitted={changeLocal}\n\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"on\"\n\t\t\t\t\t\t\t\t\t\taria-labelledby=\"range-slider\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"titleSlide\">\n\t\t\t\t\t\t\t\t\t\t<input id=\"popular\" type=\"checkbox\" onChange={toggleFilter}\n\t\t\t\t\t\t\t\t\t\tchecked={search.filter.popular ? true : false}/>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"popular\">Popularité</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={search.filter.popular ? \"slideActiv\" : \"slide\"}>\n\t\t\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\t\t\tmin= {0}\n\t\t\t\t\t\t\t\t\t\t\tmax = {200}\n\t\t\t\t\t\t\t\t\t\t\tvalue={popular}\n\t\t\t\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\t\t\t\tonChange={changePopularVal}\n\t\t\t\t\t\t\t\t\t\t\tonChangeCommitted={changePopular}\n\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"on\"\n\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"range-slider\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"titleSlide\">\n\t\t\t\t\t\t\t\t\t\t\t<input id=\"tags\" type=\"checkbox\"  onChange={toggleFilter}\n\t\t\t\t\t\t\t\t\t\t\tchecked={search.filter.tags ? true : false}/>\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"tags\">Tags</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"sexpref\">\n\t\t\t\t\t\t\t\t\t\t<ul className=\"tagSearch\">\n\t\t\t\t\t\t\t\t\t\t\t\t{search.tags && search.tags.map((e, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={index} onClick={() => deleteTags(e.id_interest)} className=\"listDel\"> {e.name_interest} <FontAwesomeIcon icon={faTimes} /></li>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"tagSearch\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{interest && interest.map((e, index) => (<li key={index} onClick={() => addTags(e.id_interest)} className=\"listAdd\">{e.name_interest} <FontAwesomeIcon icon={faCheck} /></li>))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{error && <p>{error}</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"titleSlide\">\n\t\t\t\t\t\t\t\t<input id=\"search\" type=\"checkbox\" onChange={toggleFilter} checked={search.filter.search.bool ? true : false} />\n\t\t\t\t\t\t\t\t<label htmlFor=\"search\">Recherche</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type='text' value={userSearch} onChange={toggleUserSearch} />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t)\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport Map from '../map';\nimport axios from 'axios';\nimport { socket } from '../../store';\nimport { SearchStore } from '../../search';\nimport SearchBar from './searchBar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye, faCircle,\n\tfaHeart, faExclamationTriangle, faAngleDoubleDown} from '@fortawesome/free-solid-svg-icons';\n\nexport default function Gallery(props) {\n\tconst { search, dispatchSearch } = useContext(SearchStore);\n\tconst state = props.state;\n\tconst [other, setOther] = useState({});\n\tconst [targother, setTargother] = useState([]);\n\tconst [visited, setVisited] = useState(false);\n\tconst [liked, setLiked] = useState(false);\n\tconst [sortSearch, setSortSearch] = useState('');\n\tconst [ascSort, setAscSort] = useState(true);\n\tconst [i, setI] = useState(0);\n\tconst [tmpTargother, setTmpTargother] = useState([]);\n\tconst [error, setError] = useState(null);\n\tconst [online, setOnline] = useState([]);\n\n\t//DISPLAY MODAL WHEN CLICKING ON A PROFIL\n\tuseEffect(() => {\n\t\tfunction displayModal(e) {\n\t\t\tlet modal = document.getElementById('modal');\n\t\t\tif (e.target === modal)\n\t\t\t\tmodal.style.display = 'none';\n\t\t}\n\t\twindow.addEventListener('click', displayModal);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('click', displayModal);\n\t\t}\n\t})\n\n\t//LOAD AND FILTER PROFILS\n\tuseEffect(() => {\n\t\tlet searchOthers = [];\n\t\tlet id = state.id_session;\n\t\tif (search.cat === \"visits\")\n\t\t\tsearchOthers = getVisits(search.visits, props.others,\n\t\t\t\tid, visited);\n\t\telse if (search.cat === \"likes\")\n\t\t\tsearchOthers = getLikes(search.likes, props.others,\n\t\t\t\tid, liked);\n\t\telse if (search.cat === \"matchs\")\n\t\t\tsearchOthers = getMatches(search.matchs, props.others, id);\n\t\telse\n\t\t{\n\t\t\tlet listVisits = getVisits(search.visits, props.others,\n\t\t\t\tid, true).map(e => (e.id_user));\n\t\t\tsearchOthers = props.others.filter(e => (\n\t\t\t\t!listVisits.includes(e.id_user)));\n\t\t}\n\t\tsearchOthers = filterBlocks(search.blocks, searchOthers);\n\t\tlet profils = filterProfils(search, searchOthers);\n\t\tif (sortSearch !== '')\n\t\t\tprofils = changeTri(profils, sortSearch, search, ascSort);\n\t\tsetTargother(profils);\n\t\tsetI(0);\n\t}, [props.others, search, visited, liked, state.id_session,\n\t\tsortSearch, ascSort])\n\n\t//MAKE A LIMITED COPY BASED ON I OF TARGOTHER TO DISPLAY\n\tuseEffect(() => {\n\t\tif (targother.length > 10)\n\t\t\tsetTmpTargother(targother.slice(0, ((i + 1) * 10)));\n\t\telse\n\t\t\tsetTmpTargother(targother);\n\t}, [targother, i])\n\n\t//KNOWING WHO IS ONLINE\n\tuseEffect(() => {\n\t\tfunction whoIsOnline() {\n\t\t\tsocket.emit('getSocketUsers');\n\t\t\tsocket.on('getSocketUsers', function(data) {\n\t\t\t\tsetOnline(data);\n\t\t\t});\n\t\t}\n\t\tlet intervalID = setInterval(whoIsOnline, 5000);\n\t\treturn () => {\n\t\t\tsocket.removeListener('getSocketUsers');\n\t\t\tclearInterval(intervalID);\n\t\t};\n\t}, [])\n\n\t/*\n\t * DISPLAY THE PROFIL WHEN CLICKED ON PIC\n\t * ADD TO VISITED AND SEND NOTIF IF NEVER DID BEFORE\n\t */\n\tfunction watchProfil(e) {\n\t\tsetOther(e);\n\t\tdocument.getElementById('modal').style.display = 'block';\n\t\tif (!search.visits.find(e => (e.id_visited === e.id_user)))\n\t\t{\n\t\t\tsocket.emit('notif', {type: \"visit\", id_visited: e.id_user,\n\t\t\t\tid_visitor: state.id_session});\n\t\t\tsocket.on('visitInserted', data => {\n\t\t\t\tdispatchSearch({type: 'NEW_VISIT',\n\t\t\t\t\tpayload: [...search.visits, {id_visit: data,\n\t\t\t\t\t\tid_visited: e.id_user, id_visitor: state.id_session}]\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction closeProfil() {\n\t\tdocument.getElementById('modal').style.display = 'none';\n\t}\n\n\tfunction toggleLike() {\n\t\t//CHECK IF WE ALREADY LIKED THE OTHER\n\t\tlet i = search.likes.findIndex(e => (e.id_liked === other.id_user\n\t\t\t&& e.id_author === state.id_session));\n\t\tif (i === -1)//IF WE DON'T LIKE IT\n\t\t{\n\t\t\t//CHECK IF IT ALREADY LIKED US\n\t\t\tlet j = search.likes.findIndex(e => (e.id_author === other.id_user));\n\t\t\tif (j === -1)//IF HE DOESN'T LIKE US\n\t\t\t{\n\t\t\t\tsocket.emit('notif', {type: \"like\", id_liked: other.id_user,\n\t\t\t\t\tid_author: state.id_session});\n\t\t\t\tsocket.on('likeInserted', data => {\n\t\t\t\t\tdispatchSearch({type: 'NEW_LIKE',\n\t\t\t\t\t\tpayload: [...search.likes, {id_like: data,\n\t\t\t\t\t\t\tid_liked: other.id_user, id_author: state.id_session}],\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tsocket.emit('notif', {type: \"match\", id_liked: other.id_user,\n\t\t\t\t\tid_author: state.id_session});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet like = search.likes[i];\n\t\t\tlet k = search.matchs.findIndex(e => (e.id_user1 === like.id_liked\n\t\t\t\t|| e.id_user2 === like.id_liked));\n\t\t\tlet tmpLikes = search.likes\n\t\t\t\t.filter(e => (e.id_liked !== like.id_liked));\n\t\t\tlet tmpMatchs = [...search.matchs];\n\t\t\tif (k > -1)//THERE IS A MATCH\n\t\t\t{\n\t\t\t\ttmpMatchs = search.matchs\n\t\t\t\t\t.filter(e => (e.id_user1 !== like.id_liked\n\t\t\t\t\t\t&& e.id_user2 !== like.id_liked));\n\t\t\t\tsocket.emit('notif', {type: \"unlike\", id_like: like.id_like,\n\t\t\t\t\tid_author: like.id_author, id_liked: like.id_liked,\n\t\t\t\t\tdelete: search.matchs[k].id_match});\n\t\t\t}\n\t\t\telse //THERE WAS NO MATCH\n\t\t\t\tsocket.emit('notif', {type: \"unlike\", id_like: like.id_like,\n\t\t\t\t\tid_author: like.id_author, id_liked: like.id_liked});\n\t\t\tdispatchSearch({type: 'NEW_UNLIKE', likes: tmpLikes,\n\t\t\t\tmatchs: tmpMatchs})\n\t\t}\n\t}\n\n\t/** TOGGLE VISIT ET LIKE BOOLEAN**/\n\tfunction toggleVisits() {\n\t\tif (visited)\n\t\t\tsetVisited(false);\n\t\telse\n\t\t\tsetVisited(true);\n\t}\n\tfunction toggleLikes() {\n\t\tif (liked)\n\t\t\tsetLiked(false);\n\t\telse\n\t\t\tsetLiked(true);\n\t}\n\n\t/*** SORT RESULTS ***/\n\tfunction changeSortSearch(e) {\n\t\tlet tmp = parseInt(e.target.value);\n\t\tlet tab = [...targother];\n\t\tif (targother) {\n\t\t\tif (tmp === 1) {\n\t\t\t\ttab = changeTri(tab, 'age', search, ascSort);\n\t\t\t\tsetSortSearch('age');\n\t\t\t} else if (tmp === 2) {\n\t\t\t\ttab = changeTri(tab, 'localisation', search, ascSort);\n\t\t\t\tsetSortSearch('localisation');\n\t\t\t} else if (tmp === 3) {\n\t\t\t\ttab = changeTri(tab, 'popular', search, ascSort);\n\t\t\t\tsetSortSearch('popular');\n\t\t\t} else if (tmp === 4) {\n\t\t\t\ttab = changeTri(tab, 'tags', search, ascSort);\n\t\t\t\tsetSortSearch('tags');\n\t\t\t}\n\t\t\tsetTargother(tab);\n\t\t}\n\t}\n\tfunction changeAscSort (e) {\n\t\tlet bool = parseInt(e.target.value);\n\t\tif (bool === 1 && ascSort === false)\n\t\t\tsetAscSort(true);\n\t\telse if (bool === 0 && ascSort === true)\n\t\t\tsetAscSort(false);\n\t}\n\n\t/*** REPORT ***/\n\tfunction report() {\n\t\tif (document.getElementById('report').style.display === \"block\")\n\t\t\tdocument.getElementById('report').style.display = \"none\";\n\t\telse\n\t\t\tdocument.getElementById('report').style.display = \"block\";\n\t}\n\n\tfunction fakeAccount() {\n\t\tlet id = other.id_user;\n\t\ttry {\n\t\t\taxios.post('/user/others/fake', {id_other: id, id: state.id_session,\n\t\t\t\ttoken: state.token });\n\t\t\tdocument.getElementById('modal').style.display = 'none';\n\t\t\tlet tmp = [...targother];\n\t\t\tlet i = tmp.findIndex(e => (e.id_user === id));\n\t\t\tif (i > -1)\n\t\t\t{\n\t\t\t\ttmp[i].status = 'fake';\n\t\t\t\tsetTargother(tmp);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t//console.error(e);\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t\treport();\n\t}\n\n\tasync function blockAccount() {\n\t\tlet id_blocked = other.id_user;\n\t\ttry {\n\t\t\tlet result = await axios.post('/user/others/block', {\n\t\t\t\tid: state.id_session,\n\t\t\t\tid_blocked: id_blocked,\n\t\t\t\ttoken: state.token\n\t\t\t});\n\t\t\tif (result.data) {\n\t\t\t\tdispatchSearch({type: 'NEW_BLOCK', payload: [...search.blocks,\n\t\t\t\t\t{id: result.data.result, id_author: state.id_session,\n\t\t\t\t\t\tid_blocked: id_blocked}]\n\t\t\t\t});\n\t\t\t\tdocument.getElementById('modal').style.display = 'none';\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t//console.error(e);\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t\treport();\n\t}\n\n\treturn(\n\t\t<>\n<div className='mainContain'>\n\t\t{error && <p>{error}</p>}\n\t\t<SearchBar />\n\t\t<div id=\"gallery\">\n\t\t\t<div className=\"sortsearch\">\n\t\t\t\t<select defaultValue={'default'} onChange={changeSortSearch}>\n\t\t\t\t\t<option disabled value=\"default\">Trier par :</option>\n\t\t\t\t\t<option value='1'>Âge</option>\n\t\t\t\t\t<option value='2'>Localisation</option>\n\t\t\t\t\t<option value='3'>Popularité</option>\n\t\t\t\t\t<option value='4'>Tags commun</option>\n\t\t\t\t</select>\n\t\t\t\t<select defaultValue=\"1\" onChange={changeAscSort}>\n\t\t\t\t\t<option value=\"1\">&and;</option>\n\t\t\t\t\t<option value=\"0\">&or;</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t\t{props.loading && <img className='loader' src='/public/img/ajax-loader.gif' alt='loader' />}\n\t\t\t\t\t{(search.cat === 'visits') && visited && <div className=\"lineToggle\">\n\t\t\t\t\t\t<h3>Tu as regardé leur profil /</h3><button onClick={toggleVisits} className=\"toggleEd\">Ils ont regardé ton profil</button>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t{(search.cat === 'visits') && !visited && <div className=\"lineToggle\">\n\t\t\t\t\t\t\t\t<button onClick={toggleVisits} className=\"toggleEd\"> Tu as regardé leur profil /</button><h3> Ils ont regardé ton profil</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{(search.cat === 'likes') && liked && <div className=\"lineToggle\">\n\t\t\t\t\t\t\t\t\t<h3>Tu as liké leur profil /</h3><button onClick={toggleLikes} className=\"toggleEd\">Ils ont liké ton profil</button>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{(search.cat === 'likes') && !liked &&\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"lineToggle\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={toggleLikes} className=\"toggleEd\">Tu as liké leur profil /</button><h3> Ils ont liké ton profil </h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"listOthers\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tmpTargother && tmpTargother.map((e, index) => (<li className='others' key={index} value={e.id_user} onClick={() => watchProfil(e)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={getMainPic(e)} alt={'profilpic' + e.id_user} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='othersInfos'> <FontAwesomeIcon icon={faCircle} style={{color: online.includes(e.id_user) ? 'green' : 'grey'}} /> {e.username}<br/>{e.age} ans, {e.city}</div></li>))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(i + 1) * 10 < targother.length && <FontAwesomeIcon className='getDown' icon={faAngleDoubleDown} onClick={() => setI(i + 1)} />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id='modal' className='modal'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='modal-content'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"close\" onClick={closeProfil}>&times;</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='profilOther'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='profil-img'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='imgP'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3>{other.username} {online.includes(other.id_user) ? 'En ligne' : `Dernière connexion le : ${troncDate(other.lastco)}`} </h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.imgs && other.imgs.map((e, index) => (<img src={e.path} alt={'profilpic' + index} key={index}/>))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ search.visits && search.visits.find(e => (e.id_visitor === other.id_user)) && <p><FontAwesomeIcon icon={faEye} className=\"interactionIcon\" /> {other.username} t'a déjà visité</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{search.likes.find(e => (e.id_author === other.id_user)) && <p><FontAwesomeIcon icon={faHeart} className=\"interactionIcon\"/>{other.username} t'a déjà liké</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Son score: {other.popular}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3>Mes centres d'intérêts: </h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul className='tags'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.interest && other.interest.map((e, index) => (<li key={index}>{e}</li>))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='profil-info'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3>{other.firstname} {other.lastname}, {other.age} ans</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Ma courte description :<br /> {other.bio}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.status === \"confirmed\" ? <p>Statut: confirmé</p> : <p>Statut: reporté comme faux profil</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3>Quelques informations personnelles: </h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.gender === \"female\" && <p>Je suis : une femme </p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.gender === \"male\" && <p>Je suis : un homme </p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.gender === \"other\" && <p>Je suis : autre </p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.sexpref === \"female\" && <p>Je recherche: une femme </p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.sexpref === \"male\" && <p>Je recherche: un homme</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.sexpref === \"bi\" && <p>Je recherche: un homme ou une femme </p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.sexpref === \"other\" && <p>Je recherche: autre </p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Je viens de : {other.city}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(other.imgs && other.imgs.length > 0 && state.img !== \"/public/img/avatar.png\") &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"likeDiv\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3><span style={{color: \"red\"}}>Like</span> OU <span style={{color: \"green\"}}>Unlike</span></h3><FontAwesomeIcon icon={faHeart} onClick={toggleLike} className='likeButton' style={{color: search.likes.find(e => (e.id_liked === other.id_user)) ? 'red' : 'green'}}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"likeDiv\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3>Un problème avec {other.username}</h3><FontAwesomeIcon onClick={report} className='reportIcon' icon={faExclamationTriangle} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"report\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{other.status !== 'fake' && <li value={other.id_user} onClick={fakeAccount}>Reporter comme faux compte</li>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li value={other.id_user} onClick={blockAccount}>Bloquer ce compte</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='map'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Map others={tmpTargother} coord={[search.lat, search.lon]} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t)\n}\n\nfunction getMainPic(e) {\n\tlet res = e.imgs.filter(f => (f.profil === 1));\n\tlet path = '/public/img/avatar.png';\n\tif (res[0])\n\t\tpath = res[0].path;\n\treturn (path);\n}\n//CALCUL DISTANCE\nfunction degreesToRadians(degrees) {\n\treturn degrees * Math.PI / 180;\n}\n\nfunction distanceKm(lat1, lon1, lat2, lon2) {\n\tvar earthRadiusKm = 6371;\n\n\tvar dLat = degreesToRadians(lat2-lat1);\n\tvar dLon = degreesToRadians(lon2-lon1);\n\n\tlat1 = degreesToRadians(lat1);\n\tlat2 = degreesToRadians(lat2);\n\n\tvar a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n\t\tMath.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);\n\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\treturn earthRadiusKm * c;\n}\n\n/** FUNCTION TRIAGE **/\n\n//SORT MY VISITS BY I VISITED (true/default) OR THEY VISITED ME (false)\nfunction getVisits(visits, others, id, bool)\n{\n\tif (bool)\n\t\treturn (others.filter(e => (visits.filter(f => (f.id_visitor === id))\n\t\t\t.map(f => (f.id_visited)).includes(e.id_user))));\n\telse\n\t\treturn (others.filter(e => (visits.filter(f => (f.id_visited === id))\n\t\t\t.map(f => (f.id_visitor)).includes(e.id_user))));\n}\n\n//SORT MY LIKES BY I LIKED (true/default) OR THEY LIKED ME (false)\nfunction getLikes(likes, others, id, bool)\n{\n\tif (bool)\n\t\treturn (others.filter(e => (likes.filter(f => (f.id_author === id))\n\t\t\t.map(f => (f.id_liked)).includes(e.id_user))));\n\telse\n\t\treturn (others.filter(e => (likes.filter(f => (f.id_liked === id))\n\t\t\t.map(f => (f.id_author)).includes(e.id_user))));\n}\n\nfunction getMatches(search, others, id) {\n\tlet matches = [];\n\tlet listFinal = [];\n\tfor (var mat = 0; mat < search.length; mat++) {\n\t\tif (search[mat].id_user1 === id)\n\t\t\tmatches.push(search[mat].id_user2);\n\t\telse\n\t\t\tmatches.push(search[mat].id_user1);\n\t}\n\tlistFinal = others.filter((h) => {\n\t\treturn(matches.includes(h.id_user));\n\t});\n\treturn (listFinal);\n}\n\nfunction filterBlocks(block, others) {\n\tif (block.length > 0) {\n\t\tothers = others.filter(elem => (\n\t\t\t!block.map(el => (el.id_blocked)).includes(elem.id_user)));\n\t\tothers = others.filter(elem => (\n\t\t\t!block.map(e => (e.id_author)).includes(elem.id_user)));\n\t}\n\treturn (others);\n}\n\n/* FILTER BY SEX AND SEXPREF\n * THEN BY AGE\n * THEN BY DISTANCE\n * THEN BY POPULAR SCORE\n * THEN BY TAGS\n */\nfunction filterProfils(search, searchOthers)\n{\n\tlet profils = searchOthers;\n\tif (search.filter.sex)\n\t{\n\t\tprofils = searchOthers.filter(e => {\n\t\t\tif (search.sexpref === 'bi')\n\t\t\t\treturn (e.gender === 'male' || e.gender === 'female')\n\t\t\telse\n\t\t\t\treturn (e.gender === search.sexpref)\n\t\t}).filter(f => {\n\t\t\tif (search.gender === 'male')\n\t\t\t\treturn (f.sexpref === 'bi' || f.sexpref === 'male');\n\t\t\telse if (search.gender === 'female')\n\t\t\t\treturn (f.sexpref === 'bi' || f.sexpref === 'female');\n\t\t\telse\n\t\t\t\treturn (f.sexpref === 'other');\n\t\t});\n\t}\n\tif (search.filter.age)\n\t\tprofils = profils.filter(e => (e.age >= search.ageMin && e.age <= search.ageMax))\n\tif (search.filter.local)\n\t\tprofils = profils.filter(e => (distanceKm(e.latitude, e.longitude,\n\t\t\tsearch.lat, search.lon) <= search.localMax))\n\tif (search.filter.popular)\n\t\tprofils = profils.filter(e => (e.popular >= search.popularMin && e.popular <= search.popularMax))\n\tif (search.filter.tags)\n\t\tprofils = profils.filter(e => (search.tags.map(e => (e.name_interest)).every(f => (e.interest.includes(f)))))\n\tif (search.filter.search && search.filter.search.bool === true\n\t\t&& search.filter.search.val)\n\t{\n\t\tif (/^[a-zA-Z]+$/.test(search.filter.search.val))\n\t\t{\n\t\t\tlet regexp = new RegExp(search.filter.search.val, 'i');\n\t\t\tprofils = profils.filter(e => (e.username.match(regexp)\n\t\t\t\t|| e.firstname.match(regexp)))\n\t\t}\n\t}\n\treturn (profils);\n}\n\nfunction changeTri(tab, crit, search, sens) {\n\tif (crit === 'age') {\n\t\tif (sens === true)\n\t\t\ttab.sort((a, b) => (a.age > b.age) ? 1 : -1);\n\t\telse\n\t\t\ttab.sort((a, b) => (a.age < b.age) ? 1 : -1);\n\t} else if (crit === 'localisation') {\n\t\tif (sens === true)\n\t\t\ttab.sort((a, b) => (distanceKm(a.latitude, a.longitude,\n\t\t\t\tsearch.lat, search.lon) > distanceKm(b.latitude, b.longitude, search.lat, search.lon)) ? 1 : -1);\n\t\telse\n\t\t\ttab.sort((a, b) => (distanceKm(a.latitude, a.longitude,\n\t\t\t\tsearch.lat, search.lon) < distanceKm(b.latitude, b.longitude, search.lat, search.lon)) ? 1 : -1);\n\t} else if (crit === 'popular') {\n\t\tif (sens === true)\n\t\t\ttab.sort((a, b) => (a.popular > b.popular) ? 1 : -1);\n\t\telse\n\t\t\ttab.sort((a, b) => (a.popular < b.popular) ? 1 : -1);\n\t} else if (crit === 'tags') {\n\t\tlet tmpSearch = [...search.defaultTags];\n\t\ttmpSearch = tmpSearch.map(e => (e.name_interest));\n\t\tif (sens === true)\n\t\t\ttab.sort((a, b) => (countCommonTag(a.interest, tmpSearch) < countCommonTag(b.interest, tmpSearch)) ? 1 : -1);\n\t\telse\n\t\t\ttab.sort((a, b) => (countCommonTag(a.interest, tmpSearch) > countCommonTag(b.interest, tmpSearch)) ? 1 : -1);\n\t}\n\treturn (tab);\n}\n\nfunction countCommonTag(tab1, tab2) {\n\tlet count = 0;\n\tfor (var i = 0; i < tab1.length; i++) {\n\t\tif (tab2.includes(tab1[i]))\n\t\t\tcount += 1;\n\t}\n\treturn (count);\n}\n\nfunction troncDate(date) {\n\tif (date)\n\t{\n\t\tdate = new Date(date);\n\t\tdate = `${date.getDate()}/${date.getMonth() + 1} à ${date.getHours()}h${date.getMinutes()}`;\n\t}\n\treturn (date);\n}\n","import React, { useEffect, useContext, useState } from 'react';\nimport Header from '../components/header';\nimport { Store, socket } from '../store';\nimport { SearchStore } from '../search';\nimport NotFound from './404';\nimport Map from '../components/map';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronCircleRight, faHeart,\n\tfaChevronCircleLeft } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nimport '../css/match.css';\nimport '../css/game.css';\n\nconst action = 'NEW_GAME';\n\nexport default function Game() {\n\tconst { state }  = useContext(Store);\n\tconst { search, dispatchSearch } = useContext(SearchStore);\n\tconst [others, setOthers] = useState([]);\n\tconst [targother, setTargother] = useState([]);\n\tconst [i, setI] = useState(0);\n\tconst [error, setError] = useState(null);\n\tconst [filters, setFilters] = useState({age: true, loc : true,\n\t\tpop: true, tags: true})\n\tconst [loading, setLoading] = useState(true);\n\tconst [fetchDb, setFetchDb] = useState(null);\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function fetchOthersData() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/user/others/${state.id_session}`,\n\t\t\t\t\t{cancelToken:source.token});\n\t\t\t\tif (res.data)\n\t\t\t\t\tsetFetchDb(res.data);\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\tif (state.login && search.loaded)\n\t\t\tfetchOthersData();\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [state.login, state.id_session, search.loaded]);\n\n\tuseEffect(() => {\n\t\tif (fetchDb)\n\t\t{\n\t\t\tlet Uwids = getUnWantedIds(search, state.id_session)\n\t\t\tlet tmp = fetchDb.filter(e => (\n\t\t\t\t!Uwids.includes(e.id_user)));\n\t\t\tsetLoading(false);\n\t\t\tsetOthers(tmp);\n\t\t}\n\t}, [search, state.id_session, fetchDb])\n\n\n\tuseEffect(() => {\n\t\tif (others.length > 0)\n\t\t\tsetTargother(filterOthers(search, others, filters));\n\t}, [search, others, filters])\n\n\tfunction toggleLike(other) {\n\t\tsocket.emit('notif', {type: \"game\", id_other: other.id_user,\n\t\t\tid_author: state.id_session});\n\t\tsocket.on('gameInserted', (data) => {\n\t\t\tdispatchSearch({type: action, visits: [...search.visits,\n\t\t\t\t{id_visit: data.id_visit, id_visitor: state.id_session,\n\t\t\t\t\tid_visited: other.id_other}],\n\t\t\t\tlikes: [...search.likes, {id_like: data.id_like,\n\t\t\t\t\tid_liked: other.id_user, id_author: state.id_session}],\n\t\t\t});\n\t\t\tsetI(0);\n\t\t});\n\t}\n\n\tfunction toggleFilter(e) {\n\t\tif (e.target.name === 'age')\n\t\t\tsetFilters({...filters, age: e.target.checked});\n\t\telse if (e.target.name === 'loc')\n\t\t\tsetFilters({...filters, loc: e.target.checked});\n\t\telse if (e.target.name === 'pop')\n\t\t\tsetFilters({...filters, pop: e.target.checked});\n\t\telse if (e.target.name === 'tags')\n\t\t\tsetFilters({...filters, tags: e.target.checked});\n\t\tsetI(0);\n\t}\n\n\tif (!state.login)\n\t\treturn (<NotFound />);\n\telse if (!state.profil)\n\t\treturn(<>\n\t\t<Header />\n\t\t<div className='containLogin'>\n\t\t\t<p>Vous devez compléter votre profil pour accéder aux suggestions.</p> \n\t\t\t<p>Ajoutez y une photo de profil, une description, quelques centres d'intérêts et votre ville.</p>\n\t\t\t<p>Nous nous chargerons du reste ;)</p>\n\t\t</div>\n</>\n);\n\telse\n\t\treturn(\n\t\t\t<>\n<Header />\n<h2 className='gameTitle'>-- La tisane parfaite --</h2>\n\t{error && <p>{error}</p>}\n\t<div style={{display:'flex' ,flexDirection:'column'}}>\n\t\t\t{loading && <img className='loader' src='/public/img/ajax-loader.gif' alt='loader' />}\n\t\t</div>\n\t\t<ul className='filter-wrapper'>\n\t\t\t<li className='filter'>Avec ou sans filtres :</li>\n\t\t\t<li className='filter'>\n\t\t\t\t<label>Age\n\t\t\t\t<input type='checkbox' name='age' checked={filters.age} onChange={toggleFilter}/>\n\t\t\t</label>\n\t\t</li>\n\t\t<li className='filter'>\n\t\t\t<label>Localisation\n\t\t\t<input type='checkbox' name='loc' checked={filters.loc} onChange={toggleFilter}/>\n\t\t</label>\n\t</li>\n\t<li className='filter'>\n\t\t<label>Score de popularité\n\t\t<input type='checkbox' name='pop' checked={filters.pop} onChange={toggleFilter}/>\n\t</label>\n</li>\n<li className='filter'>\n\t<label>Tags en commun\n\t<input type='checkbox' name='tags' checked={filters.tags} onChange={toggleFilter}/>\n</label>\n\t\t</li>\n\t</ul>\n\t\t{!targother[i] && <p>Vous n'avez aucune suggestion...Essayez de désactiver les filtres</p>}\n\t\t\t{targother[i] &&\n\t\t\t\t\t<div className='suggMatch'>\n\t\t\t\t\t\t<h3>{targother[i].username}, {targother[i].age} ans</h3>\n\t\t\t\t\t\t<h4>{targother[i].score.toFixed(2)} % compatible</h4>\n\t\t\t\t\t\t<div className='switchWrapper'>\n\t\t\t\t\t\t\t\t{i === 0 && <FontAwesomeIcon className='switchIconDis' icon={faChevronCircleLeft} />}\n\t\t\t\t\t\t\t\t\t{i > 0 && <FontAwesomeIcon className='switchIcon' icon={faChevronCircleLeft} onClick={() => setI(i - 1)} />}\n\t\t\t\t\t\t\t\t\t<img src={getMainPic(targother[i])} alt={'profilpic' + targother[i].id_user} />\n\t\t\t\t\t\t\t\t\t\t{i < (targother.length - 1) && <FontAwesomeIcon className='switchIcon' icon={faChevronCircleRight} onClick={() => setI(i + 1)} />}\n\t\t\t\t\t\t\t\t\t\t\t{i === (targother.length - 1) && <FontAwesomeIcon className='switchIconDis' icon={faChevronCircleRight} />}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon className='love-button' icon={faHeart} onClick={() => toggleLike(targother[i])} />\n\t\t\t\t\t\t\t\t\t\t<div className='suggInfo'>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<h3>{targother[i].firstname} {targother[i].lastname}, {targother[i].age} ans</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Ma courte description :<br /> {targother[i].bio}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<h3>Quelques informations personnelles: </h3>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Je suis : {setGenderText(targother[i].gender)}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Je recherche : {setSexprefText(targother[i].sexpref)}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>De : {targother[i].city}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<h3>Mes centres d'intérêts: </h3>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul className='tags'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{targother[i].interest && targother[i].interest.map((e, index) => (<li key={index}>{e}</li>))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t}\n\t\t\t\t\t\t\t\t\t\t<div className=\"map\">\n\t\t\t\t\t\t\t\t\t\t\t<Map others={targother} coord={[search.lat, search.lon]} index={i}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t);\n}\n\n//FILTER USERS BY SEXPREF+GENDER AND STATUS ON 'confirmed' AND ON IF MAIN PIC\nfunction filterOthers(search, others, filters) \n{\n\tothers = others.filter(e => {\n\t\tif (search.sexpref === 'bi')\n\t\t\treturn (e.gender === 'male' || e.gender === 'female')\n\t\telse\n\t\t\treturn (e.gender === search.sexpref)\n\t}).filter(f => {\n\t\tif (search.gender === 'male')\n\t\t\treturn (f.sexpref === 'bi' || f.sexpref === 'male');\n\t\telse if (search.gender === 'female')\n\t\t\treturn (f.sexpref === 'bi' || f.sexpref === 'female');\n\t\telse\n\t\t\treturn (f.sexpref === 'other');\n\t}).filter(e => (e.status === 'confirmed'))\n\t\t.filter(e => e.imgs.find(f => f.profil));\n\tothers = others.map(e => {\n\t\te.score = AlgoMatch(search, e, filters);\n\t\treturn (e);\n\t});\n\tothers = others.filter(e => (e.score > 50));\n\treturn (others.sort((a, b) => (a.score < b.score ? 1 : -1)));\n}\n\n/**** ALGO ****/\nfunction AlgoMatch(search, other, filters) {\n\tlet score = 0;\n\tlet diff = 0;\n\tif (filters.age)\n\t{\n\t\tdiff = abs(search.defaultAge - other.age);\n\t\tif (diff <= 10)\n\t\t\tscore += 20 - diff;\n\t}\n\telse\n\t\tscore += 20;\n\tif (filters.loc)\n\t{\n\t\tdiff = distanceKm(search.lat, search.lon, other.latitude,\n\t\t\tother.longitude);\n\t\tif (diff <= 50)\n\t\t\tscore += 50 - diff;\n\t}\n\telse\n\t\tscore += 50;\n\tif (filters.pop)\n\t{\n\t\tlet diff = abs(search.defaultPopular - other.popular);\n\t\tif (diff <= 10)\n\t\t\tscore += 10 - diff;\n\t}\n\telse\n\t\tscore += 10;\n\tif (filters.tags)\n\t{\n\t\tlet nbTags = search.defaultTags.length;\n\t\tif (nbTags > 0)\n\t\t{\n\t\t\tlet c = countCommonTag(search.defaultTags.map((e) => \n\t\t\t\t(e.name_interest)), other.interest);\n\t\t\tscore += c * (10 / nbTags);\n\t\t}\n\t\telse\n\t\t\tscore += 10;\n\t}\n\telse\n\t\tscore += 10;\n\tscore += (other.imgs.length - 1) * 2.5;\n\treturn (score);\n}\n\nfunction getMainPic(e) {\n\tlet res = e.imgs.filter(f => (f.profil === 1));\n\tlet path = '/public/img/avatar.png';\n\tif (res[0])\n\t\tpath = res[0].path;\n\treturn (path);\n}\n/*** CALCUL DISTANCE ***/\nfunction degreesToRadians(degrees) {\n\treturn degrees * Math.PI / 180;\n}\n\nfunction distanceKm(lat1, lon1, lat2, lon2) {\n\tvar earthRadiusKm = 6371;\n\n\tvar dLat = degreesToRadians(lat2-lat1);\n\tvar dLon = degreesToRadians(lon2-lon1);\n\n\tlat1 = degreesToRadians(lat1);\n\tlat2 = degreesToRadians(lat2);\n\n\tvar a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n\t\tMath.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);\n\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\treturn earthRadiusKm * c;\n}\n\nfunction abs(a) {\n\treturn (a > 0 ? a : -a);\n}\n\nfunction countCommonTag(tab1, tab2) {\n\tlet count = 0;\n\tfor (var i = 0; i < tab1.length; i++) {\n\t\tif (tab2.includes(tab1[i]))\n\t\t\tcount += 1;\n\t}\n\treturn (count);\n}\n\n//FILTER PROFILS WITH OUR LIKES, BLOCKS, AND MATCHS. RETURN ALL UNWANTED IDS\nfunction getUnWantedIds(search, id)\n{\n\tlet Uwids = [];\n\tsearch.visits.forEach(e => {\n\t\tif (e.id_visitor !== id && !Uwids.includes(e.id_visitor))\n\t\t\tUwids.push(e.id_visitor);\n\t\tif (e.id_visited !== id && !Uwids.includes(e.id_visited))\n\t\t\tUwids.push(e.id_visited);\n\t});\n\tsearch.likes.forEach(e => {\n\t\tif (e.id_liked !== id && !Uwids.includes(e.id_liked))\n\t\t\tUwids.push(e.id_liked);\n\t\tif (e.id_author !== id && !Uwids.includes(e.id_author))\n\t\t\tUwids.push(e.id_author);\n\t});\n\tsearch.blocks.forEach(e => {\n\t\tif (e.id_blocked !== id && !Uwids.includes(e.id_blocked))\n\t\t\tUwids.push(e.id_blocked);\n\t\tif (e.id_author !== id && !Uwids.includes(e.id_author))\n\t\t\tUwids.push(e.id_author);\n\t});\n\tsearch.matchs.forEach(e => {\n\t\tif (e.id_user1 !== id && !Uwids.includes(e.id_user1))\n\t\t\tUwids.push(e.id_user1);\n\t\tif (e.id_user2 !== id && !Uwids.includes(e.id_user2))\n\t\t\tUwids.push(e.id_user2);\n\t});\n\treturn (Uwids);\n}\n\n//RENDER ANOTHER STRING BASED ON INPUT\nfunction setGenderText(str) {\n\tif (str === 'female')\n\t\treturn ('une femme');\n\telse if (str === 'male')\n\t\treturn ('un homme');\n\telse if (str === 'other')\n\t\treturn ('une personne non définie, autre');\n}\nfunction setSexprefText(str) {\n\tif (str === 'female')\n\t\treturn ('une femme');\n\telse if (str === 'male')\n\t\treturn ('un homme');\n\telse if (str === 'bi')\n\t\treturn ('un homme ou une femme');\n\telse if (str === 'other')\n\t\treturn ('une personne non définie, autre');\n}\n","import { useContext } from 'react';\nimport { Store } from '../store';\nimport { navigate } from \"@reach/router\";\n\nfunction Logout() {\n  const { state, dispatch }  = useContext(Store);\n  let dispatchObj = {\n    type: 'LOGOUT'\n  };\n  if (state.login) {\n    dispatch(dispatchObj);\n  }\n  navigate('/');\nreturn(null);\n}\n\nexport default Logout;\n","import React, { useState, useEffect, useRef, useContext, useCallback } from 'react';\nimport { Store } from '../../store';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUserCircle } from '@fortawesome/free-solid-svg-icons'\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons'\n\nexport default function Image()\n{\n\tconst { state, dispatch } = useContext(Store);\n\tconst fileInput = useRef(null);\n\tconst [images, setImages] = useState([]);\n\tconst [error, setError] = useState(null);\n\tconst callback = useCallback(addProfilImg);\n\n\t//LOAD IMGS FROM DATABASE\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(`/user/img/${state.id_session}`);\n\t\t\t\tif (res.data)\n\t\t\t\t\tsetImages(res.data);\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t} catch (err) {\n\t\t\t\t//console.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\tfetchData();\n\t}, [state.id_session, error])\n\n\tuseEffect(() => {\n\t\tif (images.length > 0)\n\t\t{\n\t\t\tif (images.every(e => (e.profil === 0)))\n\t\t\t\tcallback(images[0].id_img);\n\t\t}\n\t}, [images, callback])\n\n\n\t//UPLOAD A FILE ON SERVER AND UPDATE THE images STATE\n\tfunction upload(img) {\n\t\tvar userIMG = new FormData();\n\t\tuserIMG.append('file', img);\n\t\tuserIMG.append('token', state.token);\n\t\tuserIMG.append('id', state.id_session);\n\t\tasync function uploadImg() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.post(`/upload/img/${state.id_session}`,\n\t\t\t\t\tuserIMG);\n\t\t\t\t\tif (res.data.error)\n\t\t\t\t\t\tsetError(res.data.error || 'Une erreur est survenue.');\n\t\t\t\t\telse\n\t\t\t\t\t\tsetImages([...images, res.data]);\n\t\t\t} catch (err) {\n\t\t\t\t//console.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\tuploadImg();\n\t}\n\n\t//IS CALLED WHEN ADDING A FILE AND CHECK FEW THNGS BEFORE CALLING UPLOAD\n\tfunction toggleInput() {\n\t\tlet img = fileInput.current.files[0];\n\t\tif (img)\n\t\t{\n\t\t\tif (img.size > 1000000)\n\t\t\t\tsetError(\"L'image est supérieur à 1mo\");\n\t\t\telse if (!img.type.match(/image\\/?(png)|(jpg)|(jpeg)/))\n\t\t\t\tsetError(\"L'image ne possède pas le bon format\");\n\t\t\telse if (images.length > 4)\n\t\t\t\tsetError(\"5 images maximum\");\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (error)\n\t\t\t\t\tsetError(null);\n\t\t\t\tupload(img);\n\t\t\t\tfileInput.current.value = '';\n\t\t\t}\n\t\t}\n\t}\n\n\t//PUT THE SELECTED IMG AS THE PROFIL IMAGE\n\tasync function addProfilImg(id) {\n\t\tlet i = images.findIndex(e => (e.id_img === id));\n\t\tif (!images[i].profil)\n\t\t{\n\t\t\ttry {\n\t\t\t\tlet res = await axios.post('/user/img/profil/switch',\n\t\t\t\t\t{id: state.id_session, id_img : id,\n\t\t\t\t\t\ttoken: state.token});\n\t\t\t\tif (res.data)\n\t\t\t\t{\n\t\t\t\t\tlet j = images.findIndex(e => (e.profil === 1));\n\t\t\t\t\timages[i].profil = 1;\n\t\t\t\t\tif (j > -1)\n\t\t\t\t\t\timages[j].profil = 0;\n\t\t\t\t\tdispatch({type: 'CHANGE_AVATAR', payload: images[i].path});\n\t\t\t\t\tsetImages([...images]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t} catch (err) {\n\t\t\t\t//console.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t}\n\n\t//DELETE AN IMG\n\tfunction deleteImg(id) {\n\t\tlet i = images.findIndex(e => (e.id_img === id));\n\t\tif (images[i])\n\t\t{\n\t\t\tif (images[i].profil === 1 && images.length === 1)\n\t\t\t\tdispatch({type: 'CHANGE_AVATAR',\n\t\t\t\t\tpayload: '/public/img/avatar.png'});\n\t\t\taxios.post('/user/img/delete', {id_img: id, path: images[i].path,\n\t\t\t\tid: state.id_session, token: state.token});\n\t\t\tsetImages(images.filter(e => (e.id_img !== id)));\n\t\t}\n\t}\n\n\t//DEAL THE DRAG AND DROP EVENTS\n\tfunction dragDrop(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed black';\n\t\tlet data = e.dataTransfer.files;\n\t\tupload(data[0]);\n\t}\n\tfunction dragOver(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed green';\n\t}\n\tfunction dragLeave(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed black';\n\t}\n\n\treturn (\n\t\t<>\n<h3 className=\"image-box-title\">Mes photos:</h3>\n<ul className=\"listImg\">\n\t\t{images.map((img, index) => (\n\t\t\t<li className=\"listImgProfil\" key={index}>\n\t\t\t\t<img className={img.profil ? 'user-img profilImg' : 'user-img'} src={img.path} alt={'userImage' + index} />\n\t\t\t\t<div className='overlay' id={img.id_img}>\n\t\t\t\t\t<FontAwesomeIcon icon={faUserCircle} className='favourite' onClick={() => addProfilImg(img.id_img)}/>\n\t\t\t\t\t<span className ='tooltip'>Mettre en profil</span>\n\t\t\t\t\t<FontAwesomeIcon icon={faTimesCircle} className='delete' onClick={() => deleteImg(img.id_img)} />\n\t\t\t\t\t<span className ='tooltip'>Supprimer</span>\n\t\t\t\t</div>\n\t\t\t\t</li>))}\n\t\t\t\t\t{images.length < 5 && <div id='drag' className='user-img' onDrop={dragDrop} onDragOver={dragOver} onDragLeave={dragLeave}>\n\t\t\t\t\t\t<label htmlFor='img'>\n\t\t\t\t\t\t\t\tCliquez ou déposez vos images ici<br/>\n\t\t\t\t\t\t\t\t\t(5/max, 1mo max, .jpeg, .jpg, .png)\n\t\t\t\t\t\t\t\t<input type=\"file\" ref={fileInput} id='img' onChange={toggleInput} accept='image/jpeg, image/jpg, image/png' style={{display:'none'}}/>\n\t\t\t\t\t\t\t\t\t{error && <p className='error'>{error}</p>}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t</>\n\t);\n}\n","import React,{ useEffect, useContext } from 'react';\nimport Image from './image';\nimport { Store } from '../../store';\nimport '../../css/form.css';\nimport '../../css/account.css';\n\nconst action = 'PROFIL';\nexport default function Profil(props)\n{\n\tconst { state, dispatch } = useContext(Store);\n\tconst profil = props.info;\n\n\tuseEffect(() => {\n\t\tif (!state.profil && profil.bio && profil.city\n\t\t\t&& state.img !== '/public/img/avatar.png'\n\t\t\t&& state.img !== \"\" && profil.tags.length > 0)\n\t\t\tdispatch({type: action, profil: true});\n\t\telse if (state.profil)\n\t\t{\n\t\t\tif (!profil.bio || !profil.city\n\t\t\t\t|| state.img === '/public/img/avatar.png' || state.img === ''\n\t\t\t\t|| profil.tags.length === 0)\n\t\t\t\tdispatch({type: action, profil: false});\n\t\t}\n\t}, [state, profil, dispatch])\n\treturn (\n\t\t<>\n<h2>- Résumé de ton profil -</h2>\n<div className='profil'>\n{!state.profil && <p className=\"paraInfo\">Remplis tes infos publiques et ajoute au moins une photo pour pouvoir JOUER</p>}\n\t<div>\n\t\t<h3>{profil.firstname} {profil.lastname}, {profil.defaultAge} ans</h3>\n\t\t<p>Ma courte description :<br /> {profil.bio}</p>\n\t</div>\n\t<div>\n\t\t<h3>Quelques informations personnelles: </h3>\n\t\t<p>Tu es : {setGenderText(profil.gender)}</p>\n\t\t<p>Tu recherches : {setSexprefText(profil.sexpref)}</p>\n\t\t<p>Tu viens de : {profil.city}</p>\n\t</div>\n\t<div>\n\t\t<h3>Tes centres d'intérêts : </h3>\n\t\t<ul className='tags'>\n\t\t\t\t{profil.defaultTags.map((e, index) => (\n\t\t\t\t\t<li key={index}>#{e.name_interest}</li>\n\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div>Ton score de popularité : {profil.defaultPopular}</div>\n\t\t</div>\n\t\t<Image />\n</>\n\t);\n}\n\n//RENDER ANOTHER STRING BASED ON INPUT\nfunction setGenderText(str) {\n\tif (str === 'female')\n\t\treturn ('une femme');\n\telse if (str === 'male')\n\t\treturn ('un homme');\n\telse if (str === 'other')\n\t\treturn ('une personne non définie, autre');\n}\nfunction setSexprefText(str) {\n\tif (str === 'female')\n\t\treturn ('une femme');\n\telse if (str === 'male')\n\t\treturn ('un homme');\n\telse if (str === 'bi')\n\t\treturn ('un homme ou une femme');\n\telse if (str === 'other')\n\t\treturn ('une personne non définie, autre');\n}\n","import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst action = 'CHANGE_CIVIL';\n\nexport default function Civil(props) {\n\tconst [id, token]  = props.id;\n\tconst [search, dispatchSearch] = props.info;\n\tconst lastname = useFormInput(search.lastname);\n\tconst firstname = useFormInput(search.firstname);\n\tconst gender = useFormInput(search.gender);\n\tconst [error, setError] = useState(null);\n\n\tasync function handleLastname(e) {\n\t\tlet name = e.target.value;\n\t\tlet res = await axios.post('registration/lastname', { value: name });\n\t\tif (res.data.error)\n\t\t\tsetError(res.data.error+\" -> Nom\");\n\t\telse if (!res.data.error && error)\n\t\t\tsetError(null);\n\t}\n\n\tasync function handleFirstname(e) {\n\t\tlet name = e.target.value;\n\t\tlet res = await axios.post('registration/firstname', { value: name });\n\t\tif (res.data.error) {\n\t\t\tsetError(res.data.error+\" -> Prenom\");\n\t\t}else if (!res.data.error && error)\n\t\t\tsetError(null);\n\t}\n\n\tasync function handleEditCivil(e) {\n\t\te.preventDefault();\n\t\tif (!error)\n\t\t{\n\t\ttry {\n\t\t\tlet res = await axios.post('/user/editCivil', {\n\t\t\t\tlastname: lastname.value,\n\t\t\t\tfirstname: firstname.value,\n\t\t\t\tgender: gender.value,\n\t\t\t\tid: id,\n\t\t\t\ttoken : token\n\t\t\t});\n\t\t\tif (res.data === 'ok')\n\t\t\t{\n\t\t\t\tdispatchSearch({type: action, lastname: lastname.value.toUpperCase(), firstname: firstname.value, gender: gender.value});\n\t\t\t\tprops.show('');\n\t\t\t}\n\t\t\telse\n\t\t\t\tsetError(res.data)\n\t\t} catch (err) {\n\t\t//\tconsole.error(err);\n\t\t\tsetError('Une erreur est survenue');\n\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n<h2>- Tes informations personnelles -</h2>\n<div className=\"profil\">\n\t\t{error && <div className=\"error\">{error}</div>}\n\t\t<form className=\"formInfo\" onSubmit={handleEditCivil}>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Ton nom: </label>\n\t\t\t\t<input type='text' {...lastname} onBlur={handleLastname} />\n\t\t\t</div>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Ton prénom: </label>\n\t\t\t\t<input type='text' {...firstname} onBlur={handleFirstname} />\n\t\t\t</div>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Ta date de naissance:</label>\n\t\t\t\t<input type='text' value={search.birthdate} disabled />\n\t\t\t</div>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Tu es: </label>\n\t\t\t\t<select {...gender}>\n\t\t\t\t\t<option value=\"male\">un homme</option>\n\t\t\t\t\t<option value=\"female\">une femme</option>\n\t\t\t\t\t<option value=\"other\">autre</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<input className=\"send\" type=\"submit\" value=\"Modifier\" />\n\t\t</form>\n\t</div>\n\t</>\n\t);\n}\n\nfunction useFormInput(initialValue)\n{\n\tconst [value, setValue] = useState(initialValue);\n\n\tfunction handleChange(e) {\n\t\tsetValue(e.target.value);\n\t}\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange\n\t};\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../../css/account.css'\n\nconst action = 'CHANGE_TAGS';\n\nexport default function GetInterest(props) {\n\tconst [interest, setInterest ] = useState([]);\n\tconst [search, dispatchSearch] = props.search;\n\tconst [error, setError] = useState(null);\n\tconst [id, token] = props.id;\n\tconst [newTag, setNewTag] = useState('');\n\n\tuseEffect(() => {\n\t\tasync function getInterest(id) {\n\t\t\ttry {\n\t\t\t\tlet allInt = await axios.get('/interest');\n\t\t\t\tif (allInt.data && search.defaultTags.length > 0)\n\t\t\t\t{\n\t\t\t\t\tsetInterest(allInt.data\n\t\t\t\t\t\t.filter(e => (!search.defaultTags\n\t\t\t\t\t\t\t.find(f => (f.id_interest === e.id_interest)))));\n\t\t\t\t}\n\t\t\t\telse if (allInt.data)\n\t\t\t\t\tsetInterest(allInt.data);\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t} catch (err) {\n\t\t\t//\tconsole.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\tgetInterest(id);\n\t}, [id, search.defaultTags])\n\n\tasync function changeInterest(e) {\n\t\tlet id_interest = parseInt(e.target.value, 10);\n\t\ttry {\n\t\t\tlet res = await axios.post('/interest/add', {id : id,\n\t\t\t\tinterest : id_interest,\n\t\t\t\ttoken: token\n\t\t\t});\n\t\t\tif (res.data)\n\t\t\t{\n\t\t\t\tlet name = interest.find(e => (e.id_interest === id_interest));\n\t\t\t\tdispatchSearch({type: action,\n\t\t\t\t\ttags: [...search.defaultTags, name]});\n\t\t\t}\n\t\t\telse\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t} catch (err) {\n\t\t//\tconsole.error(err);\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t}\n\n\tasync function removeInterest(e) {\n\t\ttry {\n\t\t\tlet res = await axios.post('/interest/delete', {id : id,\n\t\t\t\tinterest : e.id_interest,\n\t\t\t\ttoken: token\n\t\t\t});\n\t\t\tif (res.data)\n\t\t\t\tdispatchSearch({type: action,\n\t\t\t\t\ttags: search.defaultTags.filter(f => (f !== e))\n\t\t\t\t});\n\t\t\telse\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t} catch (err) {\n\t\t\t//console.error(err);\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t}\n\n\tasync function addTag(e) {\n\t\te.preventDefault();\n\t\tif (/^[a-z]+$/.test(newTag) && newTag.length < 50)\n\t\t{\n\t\tif (!interest.find(e => (e.name_interest === newTag))\n\t\t\t&& !search.defaultTags.find(e => (e.name_interest === newTag)))\n\t\t{\n\t\t\ttry {\n\t\t\t\tlet res = await axios.post('/interest/addNewTag', {\n\t\t\t\t\tnewTag: newTag,\n\t\t\t\t\tid: id,\n\t\t\t\t\ttoken: token\n\t\t\t\t});\n\t\t\t\tif (res.data)\n\t\t\t\t{\n\t\t\t\t\tdispatchSearch({type: action,\n\t\t\t\t\t\ttags: [...search.defaultTags, {id_interest: res.data.id,\n\t\t\t\t\t\t\tname_interest: newTag.toLowerCase()}]\n\t\t\t\t\t});\n\t\t\t\t\tsetNewTag('');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t} catch (err) {\n\t\t\t//\tconsole.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tsetError('Ce tag existe déjà.');\n\t\t}\n\t\telse\n\t\t\tsetError('Seuls les minuscules sont autorisées (50lettres max).');\n\t}\n\n\tfunction handleNewTag(e) {\n\t\tsetNewTag(e.target.value);\n\t}\n\n\treturn (\n\t<div className='profil'>\n{error && <p>{error}</p>}\n<div className=\"selectInterest\">\n\t<div className=\"divInterest\">\n\t<p className=\"paraInfo\"> Sélectionne un tag ou crée le </p>\n\t<p className=\"paraInfo\"> Clique sur 'OK' pour revenir au résumé de ton profil</p>\n\t\t<select value='' onChange={changeInterest}>\n\t\t\t<option> -- Sélectionne un # -- </option>\n\t\t\t\t{interest.map((e, index) => (\n\t\t\t\t\t<option value={e.id_interest} key={index}>{e.name_interest}</option>\n\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"divInterest\">\n\t\t\t\t<label>Ou créer ton propre TAG:</label>\n\t\t\t\t<input type=\"text\" onChange={handleNewTag} value={newTag} />\n\t\t\t\t<button className=\"buttonsend\" onClick={addTag}>\n\t\t\t\t\t\tAjouter\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div className=\"selectInterest\">\n\t\t\t<ul className=\"tags\">\n\t\t\t\t\t{search.defaultTags.map((e, index) => (\n\t\t\t\t\t\t<li key={index} onClick={() => removeInterest(e)}>\n\t\t\t\t\t\t\t\t#{e.name_interest}\n\t\t\t\t\t\t\t</li>))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button className='buttonsend' onClick={() => props.show('')}>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t</button>\n\t\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport axios from 'axios';\nimport GetInterest from './getInterest';\n\nconst action = 'CHANGE_PUBLIC';\n\nexport default function Info(props) {\n\tconst [id, token] = props.id;\n\tconst [search, dispatchSearch] = props.info;\n\tconst sexpref = useFormInput(search.sexpref);\n\tconst bio = useFormInput(search.bio);\n\tconst [city, setCity] = useState(search.city);\n\tconst [sugg, setSugg] = useState('');\n\tconst [error, setError] = useState(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst [coord, setCoord] = useState([0,0]);\n\n\n\tasync function handleEditProfil(e) {\n\t\te.preventDefault();\n\t\tlet lat;\n\t\tlet lon;\n\t\tif (coord[0] !== 0 && coord[1] !== 0)\n\t\t\t[lat, lon] = coord;\n\t\telse\n\t\t\t[lat, lon] = await getLoc(city);\n\t\tlet res = await axios.post('/user/editInfo', {\n\t\t\tsexpref: sexpref.value,\n\t\t\tbio: bio.value,\n\t\t\tid: id,\n\t\t\ttoken: token,\n\t\t\tlat: lat,\n\t\t\tlon: lon,\n\t\t\tcity: city\n\t\t});\n\t\tif (res.data === \"ok\")\n\t\t{\n\t\t\tdispatchSearch({type: action, sexpref: sexpref.value,\n\t\t\t\tbio: bio.value, city: city, lat: lat, lon: lon});\n\t\t\tprops.show('');\n\t\t}\n\t\telse\n\t\t\tsetError(res.data);\n\t}\n\t\n\tasync function changeCity(e) {\n\t\tsetCity(e.target.value);\n\t\ttry {\n\t\t\tlet cities = await axios.get('https://geo.api.gouv.fr/communes?nom='+e.target.value);\n\t\t\tsetSugg(cities.data);\n\t\t} catch (e) {\n\t\t\t//console.error(e);\n\t\t\tsetError(\"Une erreur est survenue lors du chargement des villes\");\n\t\t}\n\t\tdocument.getElementsByClassName('suggCity')[0].style.display = 'block';\n\t}\n\n\tfunction changeCitySugg(e) {\n\t\tsetCity(e.target.id);\n\t\tdocument.getElementsByClassName('suggCity')[0].style.display = 'none';\n\t}\n\n\tfunction changeGeoloc(e) {\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\t\tlet  options = {\n\t\t\tenableHighAccuracy: true,\n\t\t\ttimeout: 5000,\n\t\t\tmaximumAge: 0\n\t\t};\n\t\tasync function success(pos) {\n\t\t\tlet crd = pos.coords;\n\t\t\tlet res = await getCity(crd.latitude, crd.longitude);\n\t\t\tsetCity(res);\n\t\t\tsetCoord([crd.latitude, crd.longitude])\n\t\t\tsetLoading(false);\n\t\t}\n\t\tnavigator.geolocation.getCurrentPosition(success, (err) => {\n\t\t\t\tsetError('Veuillez autoriser le navigateur à vous localiser');\n\t\t\tsetLoading(false);\n\t\t}, options);\n\t}\n\n\treturn (\n\t\t<>\n<h2>- Tes informations pour matcher -</h2>\n\t{error && <div className=\"error\">{error}</div>}\n\t<div className='profil'>\n\t\t<form className=\"formInfo\" onSubmit={handleEditProfil}>\n\t\t<p className=\"paraInfo\"> Remplis ta recherche, écris ta bio enfin clique pour être géolocalisé OU remplis ta ville </p>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Tu recherches: </label>\n\t\t\t\t<select {...sexpref} >\n\t\t\t\t\t<option value=\"bi\">Une femme ou un homme</option>\n\t\t\t\t\t<option value=\"male\">Un homme</option>\n\t\t\t\t\t<option value=\"female\">Une femme</option>\n\t\t\t\t\t<option value=\"other\">autre</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Ta courte description: </label>\n\t\t\t\t<textarea type='text' {...bio} maxLength=\"160\"></textarea>\n\t\t\t</div>\n\t\t\t\t<button id=\"locCity\" onClick={changeGeoloc}>\n\t\t\t\t\t\tGeolocalise moi\n\t\t\t\t\t</button> {loading && 'Loading...'}\n\t\t\t<div className=\"divForm city\">\n\t\t\t\t<label>Ta ville: </label>\n\t\t\t\t<input className=\"city\"type=\"text\" value={city} onChange={changeCity}/>\n\t\t\t\t<ul className=\"suggCity\">\n\t\t\t\t\t\t{sugg && sugg.map((e, index) => (\n\t\t\t\t\t\t\t<li key={index} id={e.nom} onClick={changeCitySugg}>{e.nom}</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input className=\"send\" type=\"submit\" value=\"Enregistrer\" />\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t\t\t<GetInterest id={props.id} search={[search, dispatchSearch]} show={props.show} />\n\t</>\n\t);\n}\n\nfunction useFormInput(initialValue)\n{\n\tconst [value, setValue] = useState(initialValue);\n\n\tfunction handleChange(e) {\n\t\tsetValue(e.target.value);\n\t}\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange\n\t};\n}\n\n//GET CITY'S LATITUDE AND LONGITUDE\nasync function getLoc(city)\n{\n\ttry {\n\t\tlet res = await axios.get(`https://nominatim.openstreetmap.org/search?q=${city}&format=json&addressdetails=1`);\n\t\tif (res.data[0] && res.data[0].address.country === 'France')\n\t\t\treturn([res.data[0].lat, res.data[0].lon]);\n\t\telse\n\t\t\treturn([0, 0]);\n\t} catch (err) {\n\t\t//console.error(err);\n\t\treturn ([0, 0]);\n\t}\n}\n\n//GET CITY NAME WITH A LATITUDE AND LONGITUDE\nasync function getCity(lat, lon) {\n\ttry {\n\t\tlet res = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&addressdetails=1`);\n\t\treturn (res.data.address.city);\n\t} catch (err) {\n\t\t//console.error(err);\n\t\treturn ('');\n\t}\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { navigate } from \"@reach/router\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons'\n\nexport default function Editpass(props) {\n\tconst password = useFormInput('');\n\tconst cfpassword = useFormInput('');\n\tconst [error, setError] = useState(null);\n\n\tasync function handleEditPass(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tlet result = await axios.post('/editpass', {\n\t\t\t\tpassword: password.value,\n\t\t\t\ttoken: props.token\n\t\t\t});\n\t\t\tif (result.data === \"ok\" && !props.login)\n\t\t\t\tnavigate('/connexion');\n\t\t\tif (result.data === \"ok\" && props.login)\n\t\t\t\tprops.show('');\n\t\t\telse\n\t\t\t\tsetError('Le changement de mot de passe n\\'est pas effectif');\n\t\t} catch (err) {\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n{error && <div>{error}</div>}\n<form className=\"formInfo\" onSubmit={handleEditPass}>\n\t<Password val={password} className=\"divForm\"/>\n\t<Cfpassword val={cfpassword} pwd={password.value} className=\"divForm\" />\n\t<input className=\"send\" type=\"submit\" value=\"Valider\" />\n</form>\n\t</>\n\t);\n}\n\nfunction useFormInput(initialValue)\n{\n\tconst [value, setValue] = useState(initialValue);\n\n\tfunction handleChange(e) {\n\t\tsetValue(e.target.value);\n\t}\n\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange\n\t};\n}\n\nfunction useCheckServForVal(value, name)\n{\n\tconst [error, setError] = useState('');\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementsByTagName('input')[name];\n\t\tasync function check_value (e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post(`/registration/${name}`,\n\t\t\t\t\t{value: value});\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetError('OK');\n\t\t\t} catch (err) {\n\t\t\t\t//console.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_value);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_value);\n\t\t};\n\t})\n\treturn (error);\n}\n\nfunction Password(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'password');\n\n\treturn (\n\t\t<>\n\t\t<div className=\"divForm\">\n\t\t\t<label>\n\t\t\t\t\tMot de passe:{error === 'OK'\n\t\t\t\t\t\t\t&& <FontAwesomeIcon icon={faCheckCircle} color='green'/>}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\tplaceholder='matcha'\n\t\t\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\t\t\trequired />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t\t</>\n\t);\n}\n\nfunction Cfpassword(props)\n{\n\tlet cfpassword = props.val;\n\tlet password = props.pwd;\n\tconst [error, setError] = useState('');\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementsByTagName('input')['cfpassword'];\n\t\tasync function check_cfpassword (e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post('/registration/cfpassword',\n\t\t\t\t\t{\n\t\t\t\t\t\tcfpassword: cfpassword.value,\n\t\t\t\t\t\tpassword: password\n\t\t\t\t\t});\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetError('OK');\n\t\t\t} catch (err) {\n\t\t\t//\tconsole.error(err);\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_cfpassword);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_cfpassword);\n\t\t};\n\t})\n\n\treturn (\n\t\t<>\n\t\t<div className=\"divForm\">\n\t\t\t<label>\n\t\t\t\t\tConfirmation:{error === 'OK' && <FontAwesomeIcon icon={faCheckCircle}\n\t\t\t\t\t\tcolor='green'/>}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tname='cfpassword'\n\t\t\t\t\t\tplaceholder='matcha'\n\t\t\t\t\t\t{...cfpassword}\n\t\t\t\t\t\trequired />\n\t\t\t\t</div>\n\t\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport axios from 'axios';\nimport Editpass from './editpass';\n\nconst action = 'CHANGE_MAIL';\n\nexport default function Account(props) {\n\tconst [search, dispatchSearch] = props.info;\n\tconst [mail, setMail] = useState(search.mail);\n\tconst [error, setError] = useState('');\n\n\tasync function editMail(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tlet res = await axios.post('registration/email', {\n\t\t\t\tvalue: mail});\n\t\t\tif (res.data.error)\n\t\t\t\tsetError(res.data.error);\n\t\t\telse\n\t\t\t{\n\t\t\t\tres = await axios.post('user/editMail', {\n\t\t\t\t\tmail: mail,\n\t\t\t\t\tid: props.state.id_session,\n\t\t\t\t\ttoken: props.state.token\n\t\t\t\t});\n\t\t\t\tif (res.data === 'ok')\n\t\t\t\t{\n\t\t\t\t\tdispatchSearch({type: action, mail: mail});\n\t\t\t\t\tprops.show('');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetError(res.data);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t//console.error(err);\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t}\n\n\tfunction changeMail(e) {\n\t\tsetMail(e.target.value);\n\t}\n\n\treturn (\n\t\t<>\n<h2>- Modifie tes informations de connexion -</h2>\n\t{error && <div className=\"error\">{error}</div>}\n\t<div className='profil'>\n\t\t<form className=\"formInfo\" onSubmit={editMail}>\n\t\t\t<div className=\"divForm\">\n\t\t\t\t<label>Ton mail: </label>\n\t\t\t\t<input type=\"text\" value={mail} onChange={changeMail} />\n\t\t\t</div>\n\t\t\t<input type=\"submit\" className=\"send\" value=\"Modifier l'email\"/>\n\t\t</form>\n\t\t<Editpass token={props.state.token} show={props.show} login={props.state.login}/>\n\t</div>\n\t</>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function UserBlocks(props) {\n\tconst [id, token] = props.id;\n\tconst [search, dispatchSearch] = props.info;\n\tconst [others, setOthers] = useState([]);\n\tconst [error, setError] = useState(null);\n\n\tuseEffect(() => {\n\t\tasync function fetchOthersData(ids) {\n\t\t\tlet res = await axios.get(`/user/others/blocked/${ids}`);\n\t\t\tif (res.data)\n\t\t\t\tsetOthers(res.data);\n\t\t\telse\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t\tif (search.blocks.length > 0)\n\t\t{\n\t\t\tlet ids = search.blocks.filter(e => (e.id_blocked !== id))\n\t\t\t\t.map(e => (e.id_blocked)).join(',');\n\t\t\tif (ids !== '')\n\t\t\t\tfetchOthersData(ids);\n\t\t}\n\t\telse\n\t\t\tsetOthers([]);\n\t}, [search.blocks, id]);\n\n\tasync function deblock(e) {\n\t\ttry {\n\t\t\tlet res = await axios.post('/user/others/deblock', {\n\t\t\t\tid_blocked: e,\n\t\t\t\tid_author: id,\n\t\t\t\tid: id,\n\t\t\t\ttoken: token\n\t\t\t});\n\t\t\tif (res.data === 'OK')\n\t\t\t\tdispatchSearch({type: 'NEW_BLOCK',\n\t\t\t\t\tpayload: search.blocks.filter(f => (f.id_blocked !== e))\n\t\t\t\t});\n\t\t\telse\n\t\t\t\tsetError('Une erreur est survenue.');\n\t\t} catch (err) {\n\t\t\tsetError('Une erreur est survenue.');\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className='blocked'>\n\t\t<h2>- Les utilisateurs que tu bloques -</h2>\n\t\t\t{error && <p>{error}</p>}\n\t\t\t<ul className='blocked-wrap'>\n\t\t\t\t\t{others && others.map((e, index) => (\n\t\t\t\t\t\t<li className='blockedUser' key={index}>\n\t\t\t\t\t\t\t<img src={e.img} alt={'profilpic' + e.id_user} />\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t{e.username}\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t{e.city}\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<button className=\"deblock\" onClick={() => deblock(e.id_user)}>\n\t\t\t\t\t\t\t\t\tDébloquer l'utilisateur\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t)\n}\n","import React, { useState, useContext }from 'react';\nimport { SearchStore } from '../../search';\nimport Profil from './profil';\nimport Civil from './civil';\nimport Info from './info';\nimport Account from './account';\nimport UserBlocks from './userBlocks';\nimport '../../css/sidebar.css';\n\n\nexport default function Sidebar(props) {\n\tconst id = [props.state.id_session, props.state.token];\n\tconst { search, dispatchSearch } = useContext(SearchStore);\n\tconst [show, setShow] = useState('');\n\n\tfunction toggleView(view) {\n\t\tsetShow(view);\n\t}\n\n\treturn (\n\t\t<div className=\"sidebar\">\n\t\t\t<div className=\"sideContainer\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li onClick={() => toggleView('')} className={show === \"\" ? \"currentInfo\" : ''}>\n\t\t\t\t\t\t\tRésumé\n\t\t\t\t</li>\n\t\t\t\t<li onClick={() => toggleView('civil')} className={show === 'civil' ? \"currentInfo\" : ''}>Infos civiles</li>\n\t\t\t\t<li onClick={() => toggleView('info')} className={show === 'info' ? \"currentInfo\" : ''}>\n\t\t\t\t\t\tInfos publiques\n\t\t\t\t\t</li>\n\t\t\t\t\t<li onClick={() => toggleView('account')} className={show === 'account' ? \"currentInfo\" : ''}>\n\t\t\t\t\t\t\tInformations de connexion\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li onClick={() => toggleView('block')} className={show === 'block' ? \"currentInfo\" : ''}>\n\t\t\t\t\t\t\t\tUtilisateurs bloqués\n\t\t\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div className=\"container\">\n\t\t\t\t{show === \"\" && <Profil info={search} />}\n\t\t\t\t{show === \"civil\" && <Civil id={id} info={[search, dispatchSearch]} show={setShow} />}\n\t\t\t\t{show === \"info\" && <Info id={id} info={[search, dispatchSearch]} show={setShow} />}\n\t\t\t\t{show === \"account\" && <Account state={props.state} info={[search, dispatchSearch]} show={setShow} />}\n\t\t\t\t{show === \"block\" && <UserBlocks id={id} info={[search, dispatchSearch]} show={setShow} />}\n\t\t\t</div>\n\t</div>\n\t);\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport Header from '../components/header';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons'\nimport { navigate } from '@reach/router';\nimport { Store } from '../store';\nimport NotFound from './404';\nimport '../css/form.css';\n\nexport default function Registration () {\n\tconst gender = useFormInput('male');\n\tconst birthdate = useFormInput('');\n\tconst lastname = useFormInput('');\n\tconst firstname = useFormInput('');\n\tconst username = useFormInput('');\n\tconst email = useFormInput('');\n\tconst password = useFormInput('');\n\tconst cfpassword = useFormInput('');\n\tconst [success, setSuccess] = useState(null);\n\tconst { state }  = useContext(Store);\n\n\tasync function handleSubmit(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst res = await fetch('/registration',\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tgender: gender.value,\n\t\t\t\t\t\tbirthdate: birthdate.value,\n\t\t\t\t\t\tlastname: lastname.value,\n\t\t\t\t\t\tfirstname: firstname.value,\n\t\t\t\t\t\tusername: username.value,\n\t\t\t\t\t\temail: email.value,\n\t\t\t\t\t\tpassword: password.value,\n\t\t\t\t\t\tcfpassword: cfpassword.value\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\tconst data = await res.json();\n\t\t\tif (Object.keys(data).length === 0)\n\t\t\t\tsetSuccess(true);\n\t\t} catch (error) {\n\t\t\t//console.error(error);\n\t\t}\n\t}\n\n\tif (state.login)\n\t\treturn (<NotFound />);\n\telse if (success)\n\t\treturn (\n\t\t\t<>\n<Header />\n<div className=\"containLogin\">\n<p>Merci pour votre inscription. Il ne vous reste plus qu'à valider votre compte via le lien que nous vous avons envoyé sur votre adresse mail.</p>\n</div>\n\t\t\t</>\n\t\t);\n\telse\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header />\n\t\t\t\t<form className=\"formInfo\" onSubmit={handleSubmit} style={{boxShadow:'0px 0px 5px 5px #8EC83C'}}>\n\t\t\t\t\t<Gender val={gender} />\n\t\t\t\t\t<Birthdate val={birthdate} />\n\t\t\t\t\t<Lastname val={lastname} />\n\t\t\t\t\t<Firstname val={firstname} />\n\t\t\t\t\t<Username val={username} />\n\t\t\t\t\t<Email val={email} />\n\t\t\t\t\t<Password val={password} />\n\t\t\t\t\t<Cfpassword val={cfpassword} pwd={password.value} />\n\t\t\t\t\t<input className=\"send\" type=\"submit\" value=\"Créer un compte\" />\n\t\t\t\t</form>\n\t\t\t</>\n\t\t);\n}\n\nfunction useFormInput(initialValue)\n{\n\tconst [value, setValue] = useState(initialValue);\n\n\tfunction handleChange(e) {\n\t\tsetValue(e.target.value);\n\t}\n\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange\n\t};\n}\n\nfunction useCheckServForVal(value, name)\n{\n\tconst [error, setError] = useState('');\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementsByTagName('input')[name];\n\t\tasync function check_value (e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post(`registration/${name}`,\n\t\t\t\t\t{value: value});\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetError('OK');\n\t\t\t} catch (error) {\n\t\t\t\t//console.error(error);\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_value);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_value);\n\t\t};\n\t})\n\treturn (error);\n}\n\nfunction Gender(props)\n{\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>Tu es: </label>\n\t\t\t<select {...props.val} required>\n\t\t\t\t<option value=\"male\">Un homme</option>\n\t\t\t\t<option value=\"female\">Une femme</option>\n\t\t\t\t<option value=\"other\">Autre</option>\n\t\t\t</select>\n\t\t</div>\n\t);\n}\n\nfunction Birthdate(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'date');\n\tconst date = new Date();\n\tconst year = date.getFullYear();\n\tvar month = date.getMonth();\n\tmonth = month.toString().padStart(2, '0');\n\tvar day = date.getDate();\n\tday = day.toString().padStart(2, '0');\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tDate de naissance:{error === 'OK'\n\t\t\t\t\t\t&& <FontAwesomeIcon icon={faCheckCircle} color='green'/>}\n\t\t\t\t\t\t\t{(error && error !== 'OK')\n\t\t\t\t\t\t\t\t\t&& <span className='error'>{error}</span>}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\t\t\t\t\tname='date'\n\t\t\t\t\t\t\t\t\t\tmax={`${year - 18}-${month}-${day}`}\n\t\t\t\t\t\t\t\t\t\tmin={`${year - 80}-${month}-${day}`}\n\t\t\t\t\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\t\t\t\t\trequired />\n\t\t\t\t\t\t\t\t</div>\n\t);\n}\n\nfunction Lastname(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'lastname');\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tNom:{error === 'OK' && <FontAwesomeIcon icon={faCheckCircle} color='green'/>}\n\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='lastname'\n\t\t\t\t\t\tplaceholder='MAT'\n\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\trequired/>\n\t\t\t\t</div>\n\t);\n}\n\nfunction Firstname(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'firstname');\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tPrénom:{error === 'OK' && <FontAwesomeIcon icon={faCheckCircle}\n\t\t\t\t\tcolor='green'/>}\n\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='firstname'\n\t\t\t\t\t\tplaceholder='Cha'\n\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\trequired />\n\t\t\t\t</div>\n\t);\n}\n\nfunction Username(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'username');\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tPseudo:{error === 'OK' && <FontAwesomeIcon icon={faCheckCircle}\n\t\t\t\t\tcolor='green'/>}\n\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='username'\n\t\t\t\t\t\tplaceholder='Matchera'\n\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\trequired />\n\t\t\t\t</div>\n\t);\n}\n\nfunction Email(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'email');\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tEmail:{error === 'OK' && <FontAwesomeIcon icon={faCheckCircle}\n\t\t\t\t\tcolor='green'/>}\n\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\tplaceholder='matcha@matcha.com'\n\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\trequired />\n\t\t\t\t</div>\n\t);\n}\n\nfunction Password(props)\n{\n\tconst error = useCheckServForVal(props.val.value, 'password');\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tMot de passe:{error === 'OK'\n\t\t\t\t\t\t&& <FontAwesomeIcon icon={faCheckCircle} color='green'/>}\n\t\t\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\tplaceholder='matcha'\n\t\t\t\t\t\t\t\t{...props.val}\n\t\t\t\t\t\t\t\trequired />\n\t\t\t\t\t\t</div>\n\t);\n}\n\nfunction Cfpassword(props)\n{\n\tlet cfpassword = props.val;\n\tlet password = props.pwd;\n\tconst [error, setError] = useState('');\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementsByTagName('input')['cfpassword'];\n\t\tasync function check_cfpassword (e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post('registration/cfpassword',\n\t\t\t\t\t{\n\t\t\t\t\t\tcfpassword: cfpassword.value,\n\t\t\t\t\t\tpassword: password\n\t\t\t\t\t});\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetError('OK');\n\t\t\t} catch(error) {\n\t\t\t\t//console.error(error);\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_cfpassword);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_cfpassword);\n\t\t};\n\t})\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t<label>\n\t\t\t\tConfirmation:{error === 'OK' && <FontAwesomeIcon icon={faCheckCircle}\n\t\t\t\t\tcolor='green'/>}\n\t\t\t\t\t{(error && error !== 'OK') && <span className='error'>{error}</span>}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tname='cfpassword'\n\t\t\t\t\t\tplaceholder='matcha'\n\t\t\t\t\t\t{...cfpassword}\n\t\t\t\t\t\trequired />\n\t\t\t\t</div>\n\t);\n}\n\nexport function Validate(props)\n{\n\tconst [data, setData] = useState(false);\n\tconst [count, setCount] = useState(7);\n\n\tuseEffect(() => {\n\t\tfunction tick() {\n\t\t\tsetCount(count - 1);\n\t\t}\n\t\tvar intervalID = setInterval(tick, 1000);\n\t\treturn function cleanup() {\n\t\t\tclearInterval(intervalID);\n\t\t}\n\t})\n\n\tasync function validate() {\n\t\tconst response = await axios.get(`/registration/activate/${props.token}`)\n\t\tif (response.data !== 'OK')\n\t\t\tsetData(response.data);\n\t}\n\tif (!data)\n\t\tvalidate();\n\tif (count === 0)\n\t\tnavigate('/connexion');\n\n\treturn (\n\t\t<>\n\t\t\t\t<Header />\n\t\t\t\t<div className=\"containLogin\">\n\t\t\t\t\t{data && <p>{data}</p>}\n\t\t\t\t\t<p>Vous serez redirigé dans {count}...</p>\n\t\t\t\t</div>\n\t\t\t</>\n\t);\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { StoreProvider } from './store';\nimport { SearchProvider } from './search';\nimport { Router } from '@reach/router';\nimport Login, { Forgotpass } from './pages/login';\nimport Home from './pages/home';\nimport Game from './pages/game';\nimport Logout from './components/logout';\nimport Account from './pages/account';\nimport NotFound from './pages/404';\nimport './css/main.css';\nimport Registration, { Validate } from './pages/registration';\nimport Editpass from './components/account/editpass';\n\nReactDOM.render(\n\t<StoreProvider>\n\t\t<SearchProvider>\n\t\t\t<Router>\n\t\t\t\t<Home path='/' />\n\t\t\t\t<Game path='/jouer' />\n\t\t\t\t<Login path='/connexion' />\n\t\t\t\t<Logout path='/deconnexion' />\n\t\t\t\t<Registration path='/inscription' />\n\t\t\t\t<Validate path='/activate/:token' />\n\t\t\t\t<Forgotpass path='/connexion/oublie' />\n\t\t\t\t<Editpass path='/motdepasse/:token' />\n\t\t\t\t<Account path='/profil' />\n\t\t\t\t<NotFound default />\n\t\t\t</Router>\n\t\t</SearchProvider>\n\t\t</StoreProvider>,\n\tdocument.getElementById('root'));\n","import React, { useEffect, useContext, useState } from 'react';\nimport Header from '../components/header';\nimport { Store } from '../store';\nimport { Link } from \"@reach/router\";\nimport Gallery from '../components/match/gallery';\nimport axios from 'axios';\nimport '../css/match.css';\nimport '../css/home.css';\n\nexport default function Home(props) {\n\tconst { state }  = useContext(Store);\n\tconst [others, setOthers] = useState([]);\n\tconst [error, setError] = useState(null);\n\tconst [loading, setLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tlet intervalID;\n\t\tasync function fetchOthersData() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/user/others/${state.id_session}`,\n\t\t\t\t\t{cancelToken: source.token});\n\t\t\tif (res.data)\n\t\t\t{\n\t\t\t\tsetOthers(res.data);\n\t\t\t\tsetLoading(false);\n\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\t\tsource.cancel();\n\t\t\t\telse\n\t\t\t\t\tsetError('Une erreur est survenue.');\n\t\t\t}\n\t\t}\n\t\tif (state.login)\n\t\t{\n\t\t\tfetchOthersData();\n\t\t\tintervalID = setInterval(fetchOthersData, 30000);\n\t\t}\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t\tif (intervalID)\n\t\t\t\tclearInterval(intervalID);\n\t\t}\n\t}, [state.login, state.id_session]);\n\n\tif (state.login)\n\t\treturn (\n\t\t\t<>\n<Header />\n\t{error && <p>{error}</p>}\n\t<Gallery others={others} state={state} loading={loading} />\n\t</>\n\t\t);\n\telse\n\t\treturn (\n\t\t\t<>\n\t<Header />\n\t<section className=\"homeLogout\">\n\t{error && <p>{error}</p>}\n\t\t<div>\n\t\t\t<p>Trouve ta moitié - MATCHA -</p>\n\t\t</div>\n\t</section>\n\t<div className=\"home\">-- Rejoins la communauté, Inscris toi --</div>\n\t<Link to='/inscription'><div id=\"heart\" ></div></Link>\n\t\t\t</>\n\t\t);\n}\n","import React, { useContext } from 'react';\nimport Header from '../components/header';\nimport Sidebar from '../components/account/sidebar';\nimport NotFound from '../pages/404';\nimport { Store } from '../store';\nimport '../css/account.css';\n\nexport default function Account() \n{\n\tconst { state } = useContext(Store);\n\n\tif (!state.login)\n\t\treturn (<NotFound />);\n\telse\n\t\treturn (\n\t\t\t<>\n\t\t<Header />\n\t\t<Sidebar state={state} />\n</>\n\t\t);\n}\n"],"sourceRoot":""}
(this.webpackJsonpred_tetris=this.webpackJsonpred_tetris||[]).push([[0],{140:function(e,a,t){e.exports=t(194)},145:function(e,a,t){},146:function(e,a,t){},182:function(e,a){},188:function(e,a,t){e.exports=t.p+"static/media/z.21be9c7f.svg"},189:function(e,a,t){e.exports=t.p+"static/media/spacebar.f235d5f8.svg"},190:function(e,a,t){e.exports=t.p+"static/media/cursor-up.078d598d.svg"},191:function(e,a,t){e.exports=t.p+"static/media/cursor-down.4df17baf.svg"},192:function(e,a,t){e.exports=t.p+"static/media/cursor-left.a0430e92.svg"},193:function(e,a,t){e.exports=t.p+"static/media/cursor-right.4accab8c.svg"},194:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(10),c=t.n(o),l=(t(145),t(146),t(111)),i=t(49),m=t(15),u=t(25),s=t(31),d=t(88),E=t(113),p=t.n(E),f=t(4),b={gameAvailable:[],type:null,players:[],room:null,playerName:null,id:null,isLoading:!0,options:{ghostMode:!0,fullSpectrum:!1,colorMode:"normal",startingLevel:0,dropTimeRef:1e3},error:null,marks:{solo:[],multi:[]}};var y=t(39);t(64);function v(e){return{type:"MOVE_TETRI",tetri:e.tetri,board:e.board}}function h(e){return{type:"UPDATE_GHOST",ghostShape:e.ghostShape,board:e.board}}function g(e,a){return 0!==a.x||0!==a.y?e.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{x:e.x+a.x,y:e.y+a.y})})):e}function O(e,a){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.x-a.x,n=e.y-a.y;return t?{x:-n+a.x,y:r+a.y}:{x:n+a.x,y:-r+a.y}}function S(e,a,t,r){var n=[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]],o={I:[[{x:0,y:0},{x:-1,y:0},{x:2,y:0},{x:-1,y:0},{x:2,y:0}],[{x:-1,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:-1},{x:0,y:2}],[{x:-1,y:-1},{x:1,y:-1},{x:-2,y:-1},{x:1,y:0},{x:-2,y:0}],[{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:1},{x:0,y:-2}]],O:[[{x:0,y:0}],[{x:0,y:1}],[{x:-1,y:1}],[{x:-1,y:0}]]},c=o[t]?o[t][e][r]||o[t][e][0]:n[e][r],l=o[t]?o[t][a][r]||o[t][a][0]:n[a][r];return{x:c.x-l.x,y:c.y-l.y}}function C(e,a,t){var r=38===e?{dir:!0,pos:1}:{dir:!1,pos:-1},n=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e.find((function(e){return e.center}));return e.map((function(e){return e.center?e:O(e,t,a)}))}(a.shape,r.dir),o=a.pos+r.pos;o=o>3?0:o<0?3:o;for(var c=0;c<5&&(n=g(n,S(a.pos,o,a.letter,c)),!T(t,a.shape,n));)c+=1;return c<5?v({tetri:Object(f.a)(Object(f.a)({},a),{},{shape:n,pos:o}),board:N(t,a.shape,n,a.color)}):null}function T(e,a,t){var r;if(!t)return!1;for(var n in r=a?t.filter((function(e){return!(a.findIndex((function(a){return a.x===e.x&&a.y===e.y}))>-1)})):t)if(!e["".concat(r[n].x,",").concat(r[n].y)]||e["".concat(r[n].x,",").concat(r[n].y)].occuped)return!1;return!0}function N(e,a,t,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n?(a&&a.forEach((function(a){e["".concat(a.x,",").concat(a.y)].ghost=!1})),t.forEach((function(a){e["".concat(a.x,",").concat(a.y)].ghost=!0,e["".concat(a.x,",").concat(a.y)].color=r}))):(a&&a.forEach((function(a){e["".concat(a.x,",").concat(a.y)]={occuped:!1,color:null}})),t.forEach((function(a){e["".concat(a.x,",").concat(a.y)]={occuped:!0,color:r}}))),e}function _(e,a){for(var t,r=null,n=Math.max.apply(Math,Object(y.a)(a.shape.map((function(e){return e.y})))),o=[],c=n;c>=0&&n-c<4;c--){t=0;for(var l=0;l<10;l++)e["".concat(l,",").concat(c)].occuped&&(t+=1);10===t&&o.push(c)}if(o.length){r=Object(f.a)({},e),o.forEach((function(e){for(var a=0;a<10;a++)r["".concat(a,",").concat(e)]={occuped:!1,color:null}})),n=Math.max.apply(Math,o)-1;for(var i=function(e){var a=null;if(e.length>1){var t=e.findIndex((function(a,t){return e[t+1]&&a-e[t+1]!==1}));if(t>-1){var r=e[t]-e[t+1];a=0===t?{lines:Array.from({length:r},(function(a,r){return e[t]-(r+1)})),offset:2===e.length?1:2}:{lines:[e[t]-1],offset:1}}}return a}(o),m=n;m>=0;m--)if(i&&i.lines.includes(m))for(var u=0;u<10;u++)r["".concat(u,",").concat(m)].occuped&&(r["".concat(u,",").concat(m)].occuped=!1,r["".concat(u,",").concat(m+o.length-i.offset)]={occuped:!0,color:r["".concat(u,",").concat(m)].color});else for(var s=0;s<10;s++)r["".concat(s,",").concat(m)].occuped&&(r["".concat(s,",").concat(m)].occuped=!1,r["".concat(s,",").concat(m+o.length)]={occuped:!0,color:r["".concat(s,",").concat(m)].color})}return{tmpBoard:r,fullLine:o.length}}function x(e,a,t){for(var r=N(e,a.shape,[],a.color),n=0;n<20;n++)for(var o=0;o<10;o++)r["".concat(o,",").concat(n)].occuped&&(r["".concat(o,",").concat(n)].occuped=!1,r["".concat(o,",").concat(n-t.length)]={occuped:!0,color:r["".concat(o,",").concat(n)].color});for(var c=20-t.length;c<20;c++)for(var l=0;l<10;l++)l!==t[19-c]&&(r["".concat(l,",").concat(c)]={occuped:!0,color:"firebrick"});for(var i,m=0;m<4&&!T(r,null,i=g(a.shape,{x:0,y:-m}));)m++;return{tmpBoard:r=N(r,null,i,a.color),newShape:i}}function j(e,a,t){var r=e.line+a,n=function(e,a,t,r){var n=0;return r&&(n+=[40,100,300,1200][r-1]*(e+1)),n+=t+2*a}(e.level,t.hard,t.soft,a);return a&&e.line%10+a>=10?{points:e.points+n,line:r,level:e.level+1}:Object(f.a)(Object(f.a)({},e),{},{points:e.points+n,line:r})}var k={tetri:null,nextTetri:null,ghostShape:null,board:null,spectrums:[],score:{line:0,points:0,level:0},penaltyLines:0,startCounter:3,locked:!0,isOver:!1,result:null};var A={messages:[]};var R,M=["LIST_GAME_SUCCESS","CONNECT_SUCCESS","CREATE_GAME_SUCCESS","JOIN_GAME_SUCCESS","CHANGE_OPTION_SUCCESS","START_GAME_SUCCESS","LEAVE_ROOM_SUCCESS","NEW_PIECE_SUCCESS","UPDATE_SPECTRUM_SUCCESS","ADD_PENALTY_LINES_SUCCESS","ERROR","STOP_GAME_SUCCESS","RESET_GAME_SUCCESS","EXIT","UPDATE_PLAYERS_SUCCESS","GAME_OVER_SUCCESS","CHAT_MESSAGE_SUCCESS","YOU_WIN","WIN_GAME_SUCCESS","BEST_GAMES_SUCCESS"],U=["REQUEST_LIST_GAME","REQUEST_CONNECT","REQUEST_NEW_GAME","REQUEST_JOIN_GAME","REQUEST_CHANGE_OPTION","REQUEST_START_GAME","REQUEST_LEAVE_ROOM","REQUEST_QUIT_GAME","REQUEST_NEW_PIECE","UPDATE_SPECTRUM","ADD_PENALTY_LINES","REQUEST_CHECK_RELOAD","REQUEST_GAME_OVER","REQUEST_CHAT_MESSAGE","REQUEST_DISCONNECT","REQUEST_BACK_TO_OPTION","REQUEST_BEST_GAMES"],L=t(114),I=t.n(L),w=null,G={key:"redTetris-auth",storage:p.a,whitelist:["id","playerName"]},P=Object(s.c)({game:Object(d.a)(G,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LIST_GAME_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{gameAvailable:a.payload});case"CONNECT_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{playerName:a.payload.name,id:a.payload.id,isLoading:!1,error:null});case"CREATE_GAME_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{type:a.payload.type,players:a.payload.players,room:a.payload.room,options:a.payload.options,isLoading:!1});case"BEST_GAMES_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{marks:a.payload});case"JOIN_GAME_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{type:a.payload.type,players:a.payload.players,room:a.payload.room,options:a.payload.options,isLoading:!1});case"CHANGE_OPTION_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{options:a.payload});case"REQUEST_LEAVE_ROOM":return Object(f.a)(Object(f.a)({},b),{},{playerName:e.playerName,id:e.id,isLoading:!1});case"UPDATE_PLAYERS_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{players:a.payload});case"EXIT":return Object(f.a)(Object(f.a)({},b),{},{isLoading:!1});case"ERROR":return Object(f.a)(Object(f.a)({},e),{},{error:a.payload,isLoading:!1});case"REMOVE_ERROR":return Object(f.a)(Object(f.a)({},e),{},{error:null});default:return e}})),board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"START_GAME_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{tetri:a.payload.tetris.first,nextTetri:a.payload.tetris.next,spectrums:a.payload.spectrums,board:a.payload.board,score:Object(f.a)(Object(f.a)({},k.score),{},{level:a.payload.startingLevel}),penaltyLines:0,startCounter:3,ghostShape:null,isOver:!1,result:null});case"NEW_PIECE_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{tetri:e.nextTetri,nextTetri:a.payload,locked:!1});case"MOVE_TETRI":return Object(f.a)(Object(f.a)({},e),{},{tetri:a.tetri,board:a.board});case"MOVE_TETRI_AND_LOCK":return Object(f.a)(Object(f.a)({},e),{},{tetri:a.tetri,board:a.board,locked:!0});case"UPDATE_BOARD":return Object(f.a)(Object(f.a)({},e),{},{board:a.board});case"UPDATE_SCORE":return Object(f.a)(Object(f.a)({},e),{},{score:j(e.score,a.fullLine,a.downMove)});case"UPDATE_START_COUNTER":return Object(f.a)(Object(f.a)({},e),{},{startCounter:e.startCounter-1});case"ADD_PENALTY_LINES_SUCCESS":if(e.isOver)return e;var t=x(e.board,e.tetri,a.payload),r=t.tmpBoard,n=t.newShape;return Object(f.a)(Object(f.a)({},e),{},{board:r,tetri:Object(f.a)(Object(f.a)({},e.tetri),{},{shape:n}),penaltyLines:e.penaltyLines+a.payload.length,locked:!1});case"UPDATE_SPECTRUM_SUCCESS":var o=Object(y.a)(e.spectrums),c=o.findIndex((function(e){return e.playerName===a.payload.playerName}));return c>-1&&(o[c].spectrum=a.payload.spectrum),Object(f.a)(Object(f.a)({},e),{},{spectrums:o});case"UPDATE_GHOST":return Object(f.a)(Object(f.a)({},e),{},{ghostShape:a.ghostShape,board:a.board});case"UPDATE_PLAYERS_SUCCESS":if(e.spectrums.length){var l=a.payload.map((function(e){return e.name})),i=e.spectrums.filter((function(e){return l.includes(e.playerName)}));return Object(f.a)(Object(f.a)({},e),{},{spectrums:i})}return e;case"LOCK":return Object(f.a)(Object(f.a)({},e),{},{locked:!0});case"UNLOCK":return Object(f.a)(Object(f.a)({},e),{},{locked:!1});case"RESET_GAME_SUCCESS":return k;case"REQUEST_GAME_OVER":return Object(f.a)(Object(f.a)({},e),{},{isOver:!0,locked:!0});case"YOU_WIN":return Object(f.a)(Object(f.a)({},e),{},{isOver:!0});case"WIN_GAME_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{result:a.payload});case"REQUEST_LEAVE_ROOM":case"EXIT":return k;default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHAT_MESSAGE_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{messages:[a.payload].concat(Object(y.a)(e.messages))});case"JOIN_GAME_SUCCESS":case"REQUEST_LEAVE_ROOM":return A;default:return e}}}),D=Object(s.d)(P,Object(s.a)((function(e){return function(e){return function(a){return w&&a.type&&-1!==U.indexOf(a.type)&&w.emit(a.type,a.payload),e(a)}}}))),Q=Object(d.b)(D);function B(e){return{type:"REQUEST_NEW_GAME",payload:e}}function V(e){return{type:"REQUEST_CHANGE_OPTION",payload:e}}function F(e){return{type:"REQUEST_START_GAME",payload:e}}function H(e){return{type:"REQUEST_GAME_OVER",payload:e}}R=D,w||((w=I()("http://localhost:3001/game")).on("connect",(function(){var e=R.getState();w.emit("REQUEST_CHECK_RELOAD",e.game.id)})),M.forEach((function(e){w.on(e,(function(a){return R.dispatch({type:e,payload:a})}))})));var W=t(18),K=t(57),Y=t(231),J=t(226),z=t(222),X=t(234),q=t(227),$=t(243),Z=t(232),ee=t(233),ae=t(235),te=t(236),re=t(237),ne=t(238),oe=t(239),ce=t(240),le=t(241),ie=t(242),me=t(5);var ue=function(){return n.a.createElement("div",{className:"loader-component flex-container"},n.a.createElement(z.a,{color:"secondary"}))},se=t(228),de=t(229),Ee=t(230),pe=t(118),fe=t.n(pe),be=t(119),ye=t.n(be);function ve(e){var a=e.items,t=e.gameType,o=Object(r.useState)({}),c=Object(W.a)(o,2),l=c[0],i=c[1];return n.a.createElement(he,{className:"retro-border","aria-labelledby":"nested-list-subheader-"+t,subheader:n.a.createElement("div",null,n.a.createElement(K.a,{align:"center",variant:"h6"},t.toUpperCase()),n.a.createElement(J.a,{style:{backgroundColor:"white"}}))},function(){if(0===a.length)return n.a.createElement("div",{className:"margin-10"},n.a.createElement(K.a,{variant:"body1"},"No best scores yet"))}(),a.map((function(e,a){return n.a.createElement("div",{key:e.pseudo+a},n.a.createElement(q.a,{button:!0,onClick:function(){return function(e){var a=Object(f.a)({},l);a[e]=!a[e]||!a[e],i(a)}(a)}},n.a.createElement(se.a,{primaryTypographyProps:{variant:"h6"},primary:"".concat(a+1,". ").concat(e.pseudo," - ").concat(e.score.points)}),l[a]?n.a.createElement(fe.a,null):n.a.createElement(ye.a,null)),l[a]&&n.a.createElement(de.a,{in:!0,timeout:"auto",unmountOnExit:!0},n.a.createElement(Ee.a,{disablePadding:!0},n.a.createElement(ge,null,n.a.createElement(K.a,{variant:"body1",component:"p"},"Level : ",e.score.level," - Line: ",e.score.line)),n.a.createElement(ge,null,n.a.createElement("div",{className:"game-available-options"},Ce(e.options))))))})))}var he=Object(me.a)({root:{color:"white",height:"fit-content",width:"250px"}})(Ee.a),ge=Object(me.a)({root:{padding:"0 0 0 16px",margin:0,backgroundColor:"rgba(213, 0, 0, 0.39)"}})(q.a);function Oe(e){var a=e.choseType,t=e.marks;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game-type-container dark-backGround retro-border"},n.a.createElement(K.a,{variant:"h3",component:"h3"},"Select your game type"),n.a.createElement("div",{className:"buttons-container"},n.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){return a("solo")},startIcon:n.a.createElement(Z.a,null)},"SOLO"),n.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){return a("multi")},startIcon:n.a.createElement(ee.a,null)},"MULTIPLAYER"))),n.a.createElement("div",{className:"dark-backGround retro-border game-type-container"},n.a.createElement(K.a,{variant:"h4"},"Best scores"),n.a.createElement(J.a,{style:{backgroundColor:"white",margin:"10px 0"}}),n.a.createElement("div",{className:"best-scores-container"},n.a.createElement(ve,{items:t.solo,gameType:"solo"}),n.a.createElement(ve,{items:t.multi,gameType:"multi"}))))}function Se(e){var a=e.gameAvailable,t=e.dispatch,o=e.setGameType,c=Object(r.useState)(!1),l=Object(W.a)(c,2),i=l[0],m=l[1];function u(){m(!0),t({type:"REQUEST_LIST_GAME"})}return Object(r.useEffect)((function(){var e=setTimeout((function(){return m(!1)}),1e3);return function(){e&&clearTimeout(e)}}),[a]),n.a.createElement("div",{className:"multi-choice-container"},n.a.createElement("div",{style:{width:"70%",marginRight:"20px"},className:"retro-border dark-backGround"},n.a.createElement(K.a,{variant:"h4",component:"h4",align:"center"},"Room choice"),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),function(e,a){return n.a.createElement("div",{className:"game-available-container"},e.length?e.map((function(e){return n.a.createElement(Te,{key:e.name,button:!0,onClick:function(){return a(e.name)}},n.a.createElement("div",{style:{alignItems:"center"},className:"flex-container"},n.a.createElement(K.a,{fontWeight:"bold",variant:"h6",component:"span"},e.name," [",e.nbPlayers,"/5]"),n.a.createElement(ne.a,{style:{margin:"0 5px"}}),n.a.createElement(K.a,{variant:"body1"},e.leader)),n.a.createElement("div",{className:"game-available-options"},Ce(e.options)))})):n.a.createElement(K.a,{align:"center",variant:"h6",component:"p"},"There are no room already created : go create one !"))}(a,(function(e){t({type:"REQUEST_JOIN_GAME",payload:e})})),n.a.createElement(Y.a,{style:{margin:"10px"},color:"primary",variant:"contained",onClick:function(){t(B("multi"))},startIcon:n.a.createElement(te.a,null)},"New"),i?n.a.createElement("div",{style:{padding:"12px",display:"inline-flex",verticalAlign:"middle",position:"relative",alignItems:"center",justifyContent:"center"}},n.a.createElement(z.a,{color:"secondary",size:20})):n.a.createElement(X.a,{"aria-label":"reload",color:"secondary",onClick:u},n.a.createElement(ae.a,null))),n.a.createElement("div",{style:{height:"fit-content"},className:"retro-border dark-backGround"},n.a.createElement("div",{className:"options-legend-container"},n.a.createElement(K.a,{variant:"h4",component:"h4"},"Legends"),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),n.a.createElement("div",{className:"option-value"},n.a.createElement(ne.a,null)," = Leader"),n.a.createElement("div",{className:"option-value"},n.a.createElement(oe.a,null)," = Ghost mode"),n.a.createElement("div",{className:"option-value"},n.a.createElement(ce.a,null)," = Full spectrum mode"),n.a.createElement("div",{className:"option-value"},n.a.createElement(le.a,null)," = Starting level"),n.a.createElement("div",{className:"option-value"},n.a.createElement(ie.a,null)," = Gravity (time in ms)"))),n.a.createElement(Ne,{color:"primary",variant:"extended","aria-label":"back",onClick:function(){return o(!1)}},n.a.createElement(re.a,null)," Back"))}function Ce(e){return Object.entries(e).map((function(e){return n.a.createElement("div",{key:e[0],className:"option-value"},(a=e[0],t=e[1],"ghostMode"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(oe.a,null)," ",t?"On":"Off"):"fullSpectrum"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(ce.a,null)," ",t?"On":"Off"):"startingLevel"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(le.a,null)," ",t):"dropTimeRef"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,null)," ",t):void 0));var a,t}))}var Te=Object(me.a)((function(e){return{root:{alignItems:"unset",justifyContent:"unset",flexDirection:"column","&:hover":{backgroundColor:"rgba(213, 0, 0, 0.39)"}}}}))(q.a),Ne=Object(me.a)({root:{position:"absolute",bottom:"20px",left:"20px"}})($.a),_e=function(e){var a=e.gameAvailable,t=e.dispatch,o=e.marks,c=Object(r.useState)(!1),l=Object(W.a)(c,2),i=l[0],m=l[1];function u(e){"multi"===e&&t({type:"REQUEST_LIST_GAME"}),m(e)}return Object(r.useEffect)((function(){i?i&&"solo"===i&&t(B(i)):t({type:"REQUEST_BEST_GAMES"})}),[i,t]),n.a.createElement("div",{className:"menu-container"},i?"multi"===i?n.a.createElement(Se,{gameAvailable:a,dispatch:t,setGameType:m}):n.a.createElement(ue,null):n.a.createElement(Oe,{choseType:u,marks:o}))},xe=t(245),je=t(259),ke=t(244),Ae=t(120),Re=t.n(Ae),Me=t(121),Ue=t.n(Me),Le=Object(ke.a)({root:{padding:"6px 30px",margin:"20px 0 0 0"}});var Ie=Object(me.a)((function(e){return{root:{"& .MuiInputBase-input":{color:"white"},"& .MuiFormLabel-root":{color:"grey"},"& .MuiFormLabel-root.Mui-focused":{color:e.palette.primary.main},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:e.palette.primary.main}},"& .MuiInputAdornment-root > .MuiSvgIcon-root":{fill:"red"}}}}))(je.a),we=function(e){var a=e.error,t=e.dispatch,o=Le(),c=Object(r.useState)(""),l=Object(W.a)(c,2),i=l[0],m=l[1];function u(e){e.preventDefault(),i.length&&t(function(e){return{type:"REQUEST_CONNECT",payload:e}}(i))}return n.a.createElement("div",{className:"formforname-container dark-backGround retro-border"},n.a.createElement(K.a,{variant:"h3",component:"h1",className:"margin-10"},"Welcome on Red Tetris !"),n.a.createElement(K.a,{variant:"h4",component:"h3",className:"margin-10"},"Fill your playername :"),n.a.createElement("form",{noValidate:!0,onSubmit:u,autoComplete:"off"},n.a.createElement(Ie,{type:"text",error:!!a,value:i,onChange:function(e){m(e.target.value)},variant:"outlined",label:"Pseudo",helperText:a,InputProps:a?{endAdornment:n.a.createElement(xe.a,{position:"end"},n.a.createElement(Re.a,null))}:{},autoFocus:!0}),n.a.createElement(Y.a,{className:o.root,onClick:u,variant:"contained",color:"primary",startIcon:n.a.createElement(Ue.a,null)},"Enter")))},Ge=t(38),Pe=t.n(Ge);var De=Object(u.b)((function(e){return{isLoading:e.game.isLoading,room:e.game.room,playerName:e.game.playerName,gameAvailable:e.game.gameAvailable,error:e.game.error,marks:e.game.marks}}))((function(e){var a=e.room,t=e.playerName,r=e.gameAvailable,o=e.isLoading,c=e.error,l=e.dispatch,i=e.marks;return o?n.a.createElement(ue,null):a&&t?n.a.createElement(m.a,{to:"".concat(a,"[").concat(t,"]")}):n.a.createElement("div",{className:"home-page"},function(e,a){if(e)return n.a.createElement("div",{className:"disconnect-header"},n.a.createElement($.a,{color:"primary",variant:"extended",onClick:function(){return a({type:"REQUEST_DISCONNECT"})}},e," ",n.a.createElement(Pe.a,null)))}(t,l),n.a.createElement("div",{className:"home-form-container"},function(e,a){return a?e?void 0:n.a.createElement(_e,{dispatch:l,gameAvailable:r,marks:i}):n.a.createElement(we,{error:c,dispatch:l})}(a,t),o&&n.a.createElement(ue,null)))}));var Qe=t(256),Be=Object(ke.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},body:{color:"white",width:200,textAlign:"center"}});function Ve(e){var a=e.data,t=Be(),r=n.a.createElement("div",{className:t.body},n.a.createElement("h2",null,a));return n.a.createElement(Qe.a,{className:t.modal,open:!0,disableBackdropClick:!0},r)}var Fe=t(123),He=t.n(Fe),We=t(73),Ke=t.n(We),Ye=Object(ke.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},body:{color:"white",textAlign:"center",backgroundColor:"black",padding:"30px"},button:{margin:"10px"}});function Je(e){var a=Ye(),t=e.score,r=e.result,o=e.isLeader,c=e.gameType,l=e.nbPlayers,i=e.room,m=e.dispatch;function u(){m(F(i))}function s(){m({type:"REQUEST_BACK_TO_OPTION"})}return n.a.createElement(Qe.a,{className:a.modal,open:!0,disableBackdropClick:!0},n.a.createElement("div",{className:a.body},n.a.createElement(K.a,{variant:"h2",component:"h2"},"Game Over"),n.a.createElement("div",{className:"personnal-scoring"},n.a.createElement(K.a,{variant:"body1",component:"p"},"Points: ",t.points),n.a.createElement(K.a,{variant:"body1",component:"p"},"Level : ",t.level),n.a.createElement(K.a,{variant:"body1",component:"p"},"Lines : ",t.line)),function(e,a){if("multi"===e&&a)return n.a.createElement("div",{className:"winner-scoring"},n.a.createElement(K.a,{component:"p"},"Winner : ",a.winner),n.a.createElement(K.a,{component:"p"},"Points : ",a.points," / Level : ",a.level," / Line : ",a.line))}(c,r),n.a.createElement("div",{className:"end-actions-container flex-container"},function(e,t,r){return"solo"===e||t&&r?n.a.createElement(n.a.Fragment,null,("solo"===e||l>1)&&n.a.createElement(Y.a,{className:a.button,onClick:u,variant:"contained",color:"primary",startIcon:n.a.createElement(He.a,null)},"Restart"),n.a.createElement(Y.a,{onClick:s,variant:"contained",color:"primary",startIcon:n.a.createElement(Ke.a,null)},"Back to options")):r?n.a.createElement(K.a,{component:"p"},"Wait the leader's choice"):n.a.createElement(K.a,{component:"p"},"Wait for the end of game")}(c,o,r),n.a.createElement(Y.a,{className:a.button,onClick:function(){m({type:"REQUEST_LEAVE_ROOM"})},variant:"contained",color:"primary",startIcon:n.a.createElement(Pe.a,null)},"Quit"))))}function ze(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Object.keys(e);if(a)return t.map((function(a){return e[a].occuped?n.a.createElement("div",{key:"".concat(a,"-spectrum"),className:"tetri-cell",style:{backgroundColor:e[a].color,borderColor:e[a].color}}):n.a.createElement("div",{key:"".concat(a,"-spectrum")})}));var r=Xe(e),o=new RegExp(",".concat(r,"$"));return t.map((function(e){return o.test(e)?n.a.createElement("div",{key:"".concat(e,"-spectrum"),className:"tetri-cell",style:{backgroundColor:"firebrick",borderColor:"firebrick"}}):n.a.createElement("div",{key:"".concat(e,"-spectrum")})}))}function Xe(e){for(var a=19,t=0;a>=0;){for(t=0;t<10&&!e["".concat(t,",").concat(a)].occuped;)t++;if(10===t)return a+1;a--}return null}var qe=t(124),$e=t.n(qe);var Ze=Object(me.a)((function(e){return{root:{width:"100%","& .MuiInputBase-input":{color:"white"},"& .MuiFormLabel-root":{color:"grey"},"& .MuiFormLabel-root.Mui-focused":{color:e.palette.primary.main},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:e.palette.primary.main}}}}}))(je.a),ea=Object(u.b)((function(e){return{messages:e.chat.messages,playerName:e.game.playerName,room:e.game.room}}))((function(e){var a=e.messages,t=e.dispatch,o=e.playerName,c=e.room,l=Object(r.useState)(""),i=Object(W.a)(l,2),m=i[0],u=i[1];return n.a.createElement("div",{className:"chatroom-container"},n.a.createElement(K.a,{variant:"h4",component:"h4"},"Chat"),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),n.a.createElement("div",{className:"chatroom-messages-container"},function(e,a){return e.map((function(e,t){return n.a.createElement("div",{className:e.playerName===a?"right-chat":"left-chat",key:"chat-"+t},e.playerName!==a&&n.a.createElement(K.a,{variant:"subtitle1",component:"p"},n.a.createElement("span",{className:"boldText"},e.playerName)),n.a.createElement("span",{className:"chat-content"},n.a.createElement(K.a,{variant:"body1",component:"span"},e.chat)),n.a.createElement(K.a,{variant:"caption",component:"p"},$e()(e.date).format("HH:mm")))}))}(a,o)),n.a.createElement("div",{className:"chat-input"},n.a.createElement(Ze,{id:"standard-multiline-flexible",label:"Chat",multiline:!0,variant:"outlined",value:m,onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m.length&&(t({type:"REQUEST_CHAT_MESSAGE",payload:{chat:m,room:c,playerName:o}}),u("")))}})))})),aa=t(188),ta=t(189),ra=t(190),na=t(191),oa=t(192),ca=t(193),la=t(126),ia=t.n(la),ma=t(125),ua=t.n(ma);var sa=Object(u.b)((function(e){return{board:e.board.board,tetri:e.board.tetri,ghostShape:e.board.ghostShape,nextTetri:e.board.nextTetri,spectrums:e.board.spectrums,locked:e.board.locked,score:e.board.score,startCounter:e.board.startCounter,options:e.game.options,room:e.game.room,playerName:e.game.playerName,gameType:e.game.type,isOver:e.board.isOver,result:e.board.result}}))((function(e){var a,t,o,c=e.tetri,l=e.nextTetri,i=e.board,m=e.room,u=e.playerName,s=e.isLeader,d=e.gameType,E=e.locked,p=e.spectrums,b=e.options,O=e.ghostShape,S=e.dispatch,x=e.isOver,j=e.result,k=e.score,A=e.startCounter,R=e.nbPlayers,M=Object(r.useState)({text:"PAUSE",state:!1}),U=Object(W.a)(M,2),L=U[0],I=U[1],w=Object(r.useRef)(b.dropTimeRef),G=Object(r.useRef)(Date.now()),P=Object(r.useRef)(!1),D=Object(r.useRef)({soft:0,hard:0}),Q=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=null;return A>0&&(e=setInterval((function(){S({type:"UPDATE_START_COUNTER"})}),1e3)),0===A&&S({type:"UNLOCK"}),function(){e&&clearInterval(e)}}),[A,S]),Object(r.useEffect)((function(){E||(P.current=!1)}),[E,S,i,c]),Object(r.useEffect)((function(){if(c&&!c.init&&!E){var e=c.shape.map((function(e){return e.x})),a=1===Math.max.apply(Math,Object(y.a)(e))?1:0,t=g(c.shape,{x:3+a,y:0});if(T(i,null,t)){var r=N(i,null,t,c.color);P.current=!0,Q.current=null,D.current={soft:0,hard:0},S(v({tetri:Object(f.a)(Object(f.a)({},c),{},{shape:t,init:!0}),board:r}))}else S(H(k))}}),[c,E,i,S,k]),Object(r.useEffect)((function(){var e=setTimeout((function(){if(c&&c.init&&!E&&!P.current){var e=g(c.shape,{x:0,y:1});if(T(i,c.shape,e)){P.current=!0;var a=N(i,c.shape,e,c.color);S(v({tetri:Object(f.a)(Object(f.a)({},c),{},{shape:e}),board:a})),G.current=Date.now()}else S({type:"LOCK"}),P.current=!0;w.current=function(e,a){var t=[48,43,38,33,28,23,18,13,8,6,5,5,5,4,4,4,3,3,3,2,2,2,2,2,2,2,2,2,2];return(t[a]||1)*e/t[0]}(b.dropTimeRef,k.level)}}),w.current);return function(){clearTimeout(e)}}),[k.level,L,c,E,i,b.dropTimeRef,S]),Object(r.useEffect)((function(){function e(e){if(e.target===document.body&&c&&c.init&&!E&&!P.current){var a,t=e.keyCode;38===t||90===t?a=C(t,c,i):32===t?(a=function(e,a){for(var t=1;T(a,e.shape,g(e.shape,{x:0,y:t}));)t+=1;var r,n=g(e.shape,{x:0,y:t-1});return{type:"MOVE_TETRI_AND_LOCK",tetri:(r={tetri:Object(f.a)(Object(f.a)({},e),{},{shape:n}),board:N(a,e.shape,n,e.color),dropedLines:t-1}).tetri,board:r.board,dropedLines:r.dropedLines}}(c,i),D.current.hard=a.dropedLines||0):(a=function(e,a,t){var r;return 39===e?r=g(a.shape,{x:1,y:0}):37===e?r=g(a.shape,{x:-1,y:0}):40===e&&(r=g(a.shape,{x:0,y:1})),T(t,a.shape,r)?v({tetri:Object(f.a)(Object(f.a)({},a),{},{shape:r}),board:N(t,a.shape,r,a.color)}):null}(t,c,i),D.current.soft+=a&&40===t?1:0),a||40!==t||(a={type:"LOCK"}),a&&(S(a),w.current-=Date.now()-G.current,P.current=!!a.type)}else P.current&&(Q.current=e.keyCode)}return document.body.addEventListener("keyup",e),function(){document.body.removeEventListener("keyup",e)}}),[c,E,i,S]),Object(r.useEffect)((function(){if(b.ghostMode&&c&&c.init){var e=function(e,a,t){for(var r=1;T(t,a.shape,g(a.shape,{x:0,y:r}));)r+=1;var n=g(a.shape,{x:0,y:r-1});return h({ghostShape:n,board:N(t,e,n,a.color,!0)})}(O,c,i);e.ghostShape.filter((function(e){return!((O||[]).findIndex((function(a){return a.x===e.x&&a.y===e.y}))>-1)})).length&&S(h(e))}}),[c,i,O,b.ghostMode,S]),Object(r.useEffect)((function(){Q.current&&c.init&&!E&&(document.body.dispatchEvent(new KeyboardEvent("keyup",{keyCode:Q.current})),Q.current=null)}),[c,E]),Object(r.useEffect)((function(){if(E&&P.current){var e=_(i,c),a=e.tmpBoard,t=e.fullLine;if(a){S({type:"UPDATE_BOARD",board:{board:a}.board});var r=t-1;"multi"===d&&r>0&&S({type:"ADD_PENALTY_LINES",payload:{room:m,penaltyLines:r}})}else S(function(e){return{type:"REQUEST_NEW_PIECE",payload:e}}({room:m,playerName:u})),"multi"===d&&S(function(e){return{type:"UPDATE_SPECTRUM",payload:e}}({room:m,board:i,playerName:u}));S(function(e,a){return{type:"UPDATE_SCORE",fullLine:e,downMove:a}}(t,D.current))}}),[u,m,d,E,i,S,c]),Object(r.useEffect)((function(){"multi"===d&&x&&!E&&S(H(k))}),[x,E,S,k,d]),n.a.createElement("div",{className:"game-container"},n.a.createElement("div",{className:"flex-column-container left-game-container"},n.a.createElement("div",{className:"dark-backGround retro-border"},n.a.createElement(K.a,{align:"center",variant:"h5",component:"h5"},"Controls :"),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),n.a.createElement(Ee.a,null,n.a.createElement(q.a,null,n.a.createElement("img",{src:ra,className:"keyboard-icon",alt:"up key"}),n.a.createElement(se.a,{primary:"clockwise rotation"})),n.a.createElement(q.a,null,n.a.createElement("img",{src:aa,className:"keyboard-icon",alt:"z key"}),n.a.createElement(se.a,{primary:"counter clockwise rotation"})),n.a.createElement(q.a,null,n.a.createElement("img",{src:oa,className:"keyboard-icon",alt:"left key"}),n.a.createElement("img",{src:ca,className:"keyboard-icon",alt:"right key"}),n.a.createElement("img",{src:na,className:"keyboard-icon",alt:"down key"}),n.a.createElement(se.a,{primary:"move"})),n.a.createElement(q.a,null,n.a.createElement("img",{src:ta,className:"keyboard-icon-large",alt:"spacebar"}),n.a.createElement(se.a,{primary:"fall towards the pile"})))),n.a.createElement("div",{className:"buttons-container"},"solo"===d&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Y.a,{onClick:function(){L.state?(P.current=!1,Q.current=null,I({text:"PAUSE",state:!1})):(P.current=!0,I({text:"RESUME",state:!0}))},variant:"contained",color:"primary",startIcon:L.state?n.a.createElement(ua.a,null):n.a.createElement(ia.a,null)},L.text)),n.a.createElement(Y.a,{onClick:function(){S({type:"REQUEST_LEAVE_ROOM"})},variant:"contained",color:"primary",startIcon:n.a.createElement(Pe.a,null)},"Quit")),"multi"===d&&function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e[0])return n.a.createElement("div",{className:"spectrums-container"},e.map((function(e,t){return n.a.createElement("div",{key:"".concat(e,"-").concat(t),className:"spectrum-board"},n.a.createElement("div",{className:"spectrum-name retro-border"},e.playerName),n.a.createElement("div",{className:"spectrum-grid retro-border"},ze(e.spectrum,a)))})))}(p,b.fullSpectrum)),n.a.createElement("div",{className:"board center-game-container"},n.a.createElement("div",{className:"flex-container upper-board-container retro-border"},n.a.createElement("div",{className:"line-counter-container"},n.a.createElement(K.a,{variant:"h5"},"Line"),n.a.createElement(K.a,{variant:"h5"},(o=k.line)<10?"00"+o:o<100?"0"+o:o.toString())),n.a.createElement("div",{className:"next-tetri-container flex-container"},n.a.createElement("div",{className:"align-self-center"},n.a.createElement(K.a,{variant:"h5"},"NEXT")),n.a.createElement("div",{className:"center-container"},n.a.createElement("div",{className:"tetrimino-container"},function(e){if(e)return Array.from({length:8},(function(e,a){return{x:a%4,y:parseInt(a/4)}})).map((function(a){return e.shape.find((function(e){return e.x===a.x&&e.y===a.y}))?n.a.createElement("div",{className:"tetri-cell",key:"nextTetri-cell-".concat(a.x,",").concat(a.y),style:{backgroundColor:e.color,borderColor:e.color}}):n.a.createElement("div",{key:"nextTetri-cell-".concat(a.x,",").concat(a.y)})}))}(l))))),n.a.createElement("div",{className:"board-container retro-border"},function(e){return Object.keys(e).map((function(a){return e[a].occuped?n.a.createElement("div",{key:a,className:"tetri-cell",style:{backgroundColor:e[a].color,borderColor:e[a].color}}):e[a].ghost?n.a.createElement("div",{key:a,className:"tetri-cell",style:{backgroundColor:e[a].color,opacity:.33,borderColor:e[a].color}}):n.a.createElement("div",{key:a})}))}(i))),n.a.createElement("div",{className:"right-game-container"},n.a.createElement("div",{className:"score-container retro-border"},n.a.createElement(K.a,{variant:"h5"},"Score"),n.a.createElement(K.a,{variant:"h5"},k.points.toString().padStart(6,"0"))),n.a.createElement("div",{className:"score-container retro-border"},n.a.createElement(K.a,{variant:"h5"},"Level"),n.a.createElement(K.a,{variant:"h5"},(t=k.level)<10?"0"+t:t.toString()))),"multi"===d&&n.a.createElement("div",{className:"retro-border dark-backGround board-chatroom"},n.a.createElement(ea,null)),function(e){if(e)return n.a.createElement(Ve,{data:e})}(A),x&&(a={score:k,result:j,isLeader:s,gameType:d,dispatch:S,nbPlayers:R,room:m},n.a.createElement(Je,a)))})),da=t(252),Ea=t(262),pa=t(261),fa=t(255),ba=t(263),ya=t(253),va=t(248),ha=t(251),ga=t(258),Oa=t(257);var Sa=function(e){var a=e.data,t=e.direction,r=e.severity,o=e.open,c=e.setOpen;function l(e,a){"clickaway"!==a&&c(!1)}return n.a.createElement(ga.a,{TransitionComponent:function(e){return n.a.createElement(ha.a,Object.assign({},e,{direction:t||"up"}))},open:o,autoHideDuration:3e3,onClose:l},n.a.createElement(Oa.a,{elevation:6,variant:"filled",onClose:l,severity:r||"info"},a))};function Ca(e){var a=e.option,t=e.value,r=e.room,o=e.leader,c=e.dispatch;return n.a.createElement(da.a,{row:!0},n.a.createElement(ja,{control:n.a.createElement(Ea.a,{checked:t,disabled:!o,name:a+"_switch",onChange:function(){c(V({option:a,value:!t,room:r}))}}),label:a,labelPlacement:"start"}))}function Ta(e){var a=e.option,t=e.value,r=e.dispatch,o=e.room,c=e.leader;return n.a.createElement(ka,{variant:"outlined",disabled:!c},n.a.createElement(pa.a,{id:"color-select-label"},"Color"),n.a.createElement(fa.a,{native:!0,labelId:"color-select-label",id:"color-select",value:t,onChange:function(e){r(V({option:a,value:e.target.value,room:o}))},label:"Color"},n.a.createElement("option",{value:"normal"},"Normal"),n.a.createElement("option",{value:"random"},"Random"),n.a.createElement("option",{value:"red"},"Red")))}function Na(e){var a=e.value,t=e.dispatch,o=e.room,c=e.leader,l=Object(r.useState)(a),i=Object(W.a)(l,2),m=i[0],u=i[1];Object(r.useEffect)((function(){u(a)}),[a]);return n.a.createElement("div",{style:{width:"100%",color:"white"}},n.a.createElement(K.a,{gutterBottom:!0},"Starting Level : ",m),n.a.createElement(xa,{"data-testid":"startingLevelSlider",value:m,disabled:!c,getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider-custom",valueLabelDisplay:"auto",step:1,marks:[{value:0,label:"Easy"},{value:5,label:"Normal"},{value:10,label:"Hard"},{value:15,label:"Really hard"},{value:20,label:"Professionnal"}],min:0,max:20,onChange:function(e,a){u(a)},onChangeCommitted:function(e,a){t(V({option:"startingLevel",value:a,room:o}))}}))}function _a(e){var a=e.value,t=e.dispatch,o=e.room,c=e.leader,l=Object(r.useState)(a),i=Object(W.a)(l,2),m=i[0],u=i[1];Object(r.useEffect)((function(){u(a)}),[a]);return n.a.createElement("div",{style:{width:"100%",color:"white"}},n.a.createElement(K.a,{gutterBottom:!0},"Gravity (time in ms) : ",m),n.a.createElement(xa,{value:m,disabled:!c,"data-testid":"dropTimeRefSlider",getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider-custom",valueLabelDisplay:"auto",step:200,marks:[{value:400,label:"BlackHole"},{value:600,label:"Hard"},{value:800,label:"Higher"},{value:1e3,label:"Normal"},{value:1200,label:"Lower"},{value:1400,label:"Easy"},{value:1600,label:"Moon"}],min:400,max:1600,onChange:function(e,a){u(a)},onChangeCommitted:function(e,a){t(V({option:"dropTimeRef",value:a,room:o}))}}))}var xa=Object(me.a)({markLabel:{color:"rgba(255,255,255,0.6)"},markLabelActive:{color:"white"}})(ba.a),ja=Object(me.a)({root:{"& .MuiFormControlLabel-label.Mui-disabled":{color:"rgba(255,255,255,0.6)"}}})(ya.a),ka=Object(me.a)((function(e){return{root:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"& .MuiFormLabel-root":{color:"white"},"& .MuiFormLabel-root.Mui-focused":{color:e.palette.primary.main},"& .MuiOutlinedInput-root":{color:e.palette.secondary.main,"&:hover fieldset":{borderColor:e.palette.primary.main}},"& .MuiOutlinedInput-root.Mui-disabled":{color:"grey","&:hover fieldset":{borderColor:"grey"}},"& .MuiOutlinedInput-root.Mui-focused":{color:e.palette.secondary.main},"& .MuiSvgIcon-root":{fill:"white"},"& .MuiSelect-select.Mui-disabled":{color:"grey"}}}}))(va.a),Aa=Object(u.b)((function(e){return{options:e.game.options,room:e.game.room,gameType:e.game.type}}))((function(e){var a=e.options,t=e.dispatch,o=e.room,c=e.leader,l=e.gameType,i=Object(r.useRef)(a),m=Object(r.useState)(!1),u=Object(W.a)(m,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){a===i.current||"multi"!==l||c||(i.current=a,d(!0))}),[a,l,c]),n.a.createElement("div",{className:"game-options-container"},n.a.createElement(K.a,{variant:"h4",component:"h4"},"Options "),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),"multi"===l&&n.a.createElement(K.a,{variant:"body1"},"Only the leader can change them before the game starts"),Object.entries(a).map((function(e,a){return n.a.createElement("div",{key:"option-"+a,className:"option-container"},(r=e[0],i=e[1],"ghostMode"===r?n.a.createElement(Ca,{option:r,value:i,room:o,leader:c,dispatch:t}):"colorMode"===r?n.a.createElement(Ta,{option:r,value:i,room:o,leader:c,dispatch:t}):"startingLevel"===r?n.a.createElement(Na,{value:i,dispatch:t,room:o,leader:c}):"dropTimeRef"===r?n.a.createElement(_a,{value:i,dispatch:t,room:o,leader:c}):"fullSpectrum"===r&&"multi"===l?n.a.createElement(Ca,{option:r,value:i,room:o,leader:c,dispatch:t}):void 0));var r,i})),n.a.createElement(Sa,{data:"The leader changed game options",open:s,setOpen:d}))})),Ra=t(127),Ma=t.n(Ra);function Ua(e){var a=e.room,t=e.players,r=e.dispatch,o=e.gameType;return n.a.createElement("div",{className:"flex-container"},n.a.createElement("div",{className:"dark-backGround retro-border room-container"},n.a.createElement(K.a,{variant:"h4",component:"h4"},"Room"),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),n.a.createElement(K.a,{variant:"h5",component:"h5",style:{margin:"5px 0"}},a),n.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){r({type:"REQUEST_LEAVE_ROOM"})},size:"small",startIcon:n.a.createElement(Ke.a,null)},"Leave room")),"multi"===o&&function(e){return n.a.createElement("div",{className:" dark-backGround retro-border room-container"},n.a.createElement(K.a,{variant:"h4",component:"h4"},"Players"),n.a.createElement(J.a,{style:{backgroundColor:"white",alignSelf:"normal"}}),n.a.createElement("ul",{className:"players-list"},e.map((function(e){return e.leader?n.a.createElement("li",{key:e.name,className:"flex-container"},n.a.createElement(Ma.a,null),n.a.createElement(K.a,{variant:"body1",component:"span"},e.name)):n.a.createElement("li",{key:e.name},n.a.createElement(K.a,{variant:"body1",component:"p"},e.name))}))))}(t))}var La=t(128),Ia=t.n(La);function wa(e){var a=e.room,t=e.dispatch,r=e.setSnackState;return n.a.createElement(Y.a,{style:{width:"30%"},variant:"contained",color:"primary",startIcon:n.a.createElement(Ia.a,null),onClick:function(){r(!1),t(F(a))}},"START")}var Ga=Object(u.b)((function(e){return{room:e.game.room,playerName:e.game.playerName,isLoading:e.game.isLoading,players:e.game.players,gameType:e.game.type,board:e.board.board}}))((function(e){var a=e.gameType,t=e.playerName,o=e.players,c=e.room,l=e.board,i=e.isLoading,u=e.dispatch,s=Object(r.useState)({open:!1}),d=Object(W.a)(s,2),E=d[0],p=d[1],f=Object(r.useRef)(o.length),b=Object(r.useMemo)((function(){return function(e,a,t){if(e&&a.length&&t)return"solo"===t||e===a.find((function(e){return e.leader})).name}(t,o,a)}),[a,t,o]);function y(){return n.a.createElement(Sa,{data:E.data,open:"boolean"===typeof E?E:E.open,setOpen:p})}return Object(r.useEffect)((function(){o.length&&f.current&&o.length!==f.current?(o.length>f.current?p({open:!0,data:"A new player join the room"}):p({open:!0,data:"A player quit the room"}),f.current=o.length):o.length&&!f.current&&(f.current=o.length)}),[o]),i?n.a.createElement(ue,null):c&&!function(e,a){if(window.location.hash){var t=window.location.hash.split("["),r=t[0].substring(1),n=t[1].substring(0,t[1].length-1);if(e!==r||a!==n)return!1}return!0}(c,t)||!c?n.a.createElement(m.a,{to:"/",hashType:"noslash"}):l?n.a.createElement(n.a.Fragment,null,n.a.createElement(sa,{isLeader:b,nbPlayers:f.current}),y()):n.a.createElement("div",{className:"game-page"},n.a.createElement(Ua,{room:c,players:o,dispatch:u,gameType:a}),n.a.createElement("div",{className:"flex-container-center"},n.a.createElement("div",{className:"left-gamePage-container retro-border dark-backGround"},n.a.createElement(Aa,{leader:b}),n.a.createElement(J.a,{style:{backgroundColor:"white",margin:"10px 0"}}),n.a.createElement("div",{className:"ready-container"},function(){if(("solo"===a||f.current>1)&&b)return n.a.createElement(wa,{room:c,gameType:a,dispatch:u,setSnackState:p});var e=b?" You must wait at least one more player to start the game":"Please wait before the game start";return n.a.createElement(Y.a,{variant:"contained",color:"primary",style:{color:"white"},disabled:!0},e)}())),"multi"===a&&n.a.createElement("div",{className:"right-gamePage-container retro-border dark-backGround"},n.a.createElement(ea,null))),y())}));var Pa=function(){var e=Object(r.useState)(!1),a=Object(W.a)(e,2),t=a[0],o=a[1];function c(){return o(!0)}return n.a.createElement("div",{className:"dark-backGround retro-border formforname-container"},t?n.a.createElement(m.a,{to:"/"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"GAME OVER"),n.a.createElement("h2",null,"404- Page not found"),n.a.createElement(Y.a,{onClick:c,variant:"contained",color:"primary",startIcon:n.a.createElement(Pe.a,null)},"Back")))},Da=t(129),Qa=t(254),Ba=Object(Da.a)({palette:{primary:{main:"#d50000",light:"#ff5131",dark:"#9b0000",contrastText:"#ffffff"},secondary:{main:"#f44336",light:"#ff7961",dark:"#ba000d",contrastText:"#ffffff"}}});var Va=function(){return n.a.createElement(u.a,{store:D},n.a.createElement(l.a,{loading:n.a.createElement(ue,null),persistor:Q},n.a.createElement(Qa.a,{theme:Ba},n.a.createElement(i.a,null,n.a.createElement(m.d,null,n.a.createElement(m.b,{exact:!0,path:"/"},n.a.createElement(i.b,{hashType:"noslash"},n.a.createElement(m.d,null,n.a.createElement(m.b,{strict:!0,exact:!0,path:"/",component:De}),n.a.createElement(m.b,{exact:!0,path:"/:room[:playerName]",component:Ga}),n.a.createElement(m.b,{path:"*"},n.a.createElement(Pa,null))))),n.a.createElement(m.b,{path:"*"},n.a.createElement(Pa,null)))))))};c.a.render(n.a.createElement(r.StrictMode,null,n.a.createElement(Va,null)),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.468e0966.chunk.js.map
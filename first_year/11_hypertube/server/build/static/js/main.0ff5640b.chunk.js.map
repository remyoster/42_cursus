{"version":3,"sources":["store.js","translate.js","pages/404.js","pages/ClassesUi.js","app/useNotifications.js","pages/Auth/Register.js","pages/EditPass.js","app/useHttpError.js","pages/Account.js","pages/Home/catalogueBar.js","pages/Home/sortBar.js","pages/Auth/Login.js","pages/Auth/Auth.js","pages/Home/MovieSkeleton.js","pages/Home/index.js","pages/Profile.js","pages/Movie/components/Comment.js","pages/Movie/comments.js","pages/Movie/components/TorrentTable.jsx","Navbar.js","Layout.js","index.js","app/theme.js","pages/Movie/index.js","assets/images/flag_en.png","pages/Movie/components/Comment.module.css","assets/images/flag_fr.png","pages/Movie/Comments.module.css"],"names":["Store","React","createContext","actionTypes","initialState","login","id","complete","username","avatar","lang","views","cache","searchType","filters","sort","movies","reducer","state","action","type","payload","translate","navbar","home","eng","fr","profil","logout","form","placeholderName","placeholderFirstname","placeholderUsername","placeholderMail","placeholderPassword","placeholderConfirm","labelImg","submitModify","emptyFields","slogan","loginToken","loginPass","loginUser","connexion","title","submitButton","forgotPass","registration","mailActivate","mailValidate","omniauth","forgot","back","send","mail","alreadyMail","library","menu","popular","lastadded","random","search","filterAndSort","gender","year","ratings","name","sortLabel","none","movie","backlink","director","actor","textarea","submit","tTable","quality","language","link","subtitles","personnal","password","clear","img","imgdrop","pwd","history","pwdModify","update","general","error","format","size","length","unknow","empty","imTeapot","unAuthorized","diff","alreadyTaken","notFoundPage","body","NotFound","useState","count","setCount","useContext","useEffect","intervalID","setInterval","clearInterval","navigate","trans","useStyles","makeStyles","theme","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginRight","spacing","marginLeft","width","breakpoints","up","searchIcon","height","pointerEvents","display","alignItems","justifyContent","inputRoot","color","inputInput","padding","transition","transitions","create","container","flexWrap","textField","borderTopLeftRadius","borderTopRightRadius","dense","marginTop","button","margin","root","flexGrow","paper","boxSizing","control","formControl","minWidth","textColor","selectEmpty","input","useNotifications","enqueueSnackbar","useSnackbar","options","autoHideDuration","preventDuplicate","disableWindowBlurListener","notifySuccess","msg","variant","notifyError","useFormInput","initialValue","value","setValue","onChange","e","str","target","useCheckServForVal","tmp","setError","elem","document","getElementById","check_value","a","axios","post","res","data","addEventListener","removeEventListener","Lastname","props","val","TextField","label","className","classe","helperText","Firstname","Username","Mail","Password","Cfpassword","cfpassword","check_cfpassword","Register","classes","ClassesUi","lastname","firstname","mess","setMess","setImg","fileInput","useRef","preventDefault","newForm","FormData","append","file","forEach","getElementsByClassName","style","onSubmit","onDrop","fileImg","dataTransfer","files","preview","URL","createObjectURL","border","onDragOver","onDragLeave","htmlFor","ref","current","match","accept","src","alt","Button","reset","setErr","EditPass","err","token","result","origin","useHttpError","dispatch","handleHttpResponseError","status","ts","CHANGE_AVATAR","COMPLETE","CatalagueBar","displayData","activeTab","loader","setVal","InputBase","placeholder","inputProps","Grid","item","ButtonGroup","fullWidth","aria-label","onClick","SortBar","genders","setGenders","setTmp","setFilters","setSort","syear","setSyear","srate","setSrate","toggleFilters","on","tmpG","genre","f","includes","push","filter","every","rateAverage","order","b","i","charCodeAt","sortMovies","filterMovies","xs","Paper","FormControlLabel","Switch","checked","map","index","key","toggleGender","Slider","min","max","step","newValue","onChangeCommitted","valueLabelDisplay","aria-labelledby","fontSize","FormControl","InputLabel","Select","MenuItem","sorts","menuTard","rate","average","split","join","parseInt","isNaN","stringToNb","Value","Math","round","init","Login","passwordForget","fieldErrors","setFieldErrors","forgetPass","setForgetPass","window","location","reload","info","getElementsByTagName","Link","TabPanel","children","other","Typography","component","role","hidden","Box","p","Auth","Tabs","indicatorColor","event","centered","Tab","href","boxShadow","flexDirection","spacingTop","MovieSkeleton","Skeleton","filterScrap","imdb","concat","defaults","withCredentials","bigAvatar","Profile","profileInfos","setProfileInfos","source","CancelToken","get","cancelToken","response","isCancel","cancel","fetchProfile","content","Avatar","List","subheader","ListSubheader","idx","to","ListItem","ListItemText","primary","CircularProgress","Comment","message","time","deletable","onDelete","closeIcon","IconButton","Close","timestamp","comment","Comments","userid","setComment","comments","setComments","c","userId","commentId","_id","fetchComment","commentPost","onKeyDown","shiftKey","evt","MouseEvent","initMouseEvent","dispatchEvent","rows","cols","Divider","marginBottom","displayDate","date","delComment","d","Date","getHours","getMinutes","getDate","getMonth","getFullYear","maxWidth","overflowX","table","langFlag","TorrentTable","torrentList","onClickOnView","Table","TableHead","TableRow","TableCell","TableBody","torrent","hash","magnet","seeds","peers","getFlagSrcByLang","toLowerCase","englishFlagImg","frenchFlagImg","menuButton","langSwitch","langImg","AppBar","auth","onChangeLang","onClickLogout","mediaSmall","useMediaQuery","anchorElem","setAnchorElem","activeMenu","setActiveMenu","handleClose","langMenuItems","selected","handlemenu","currentTarget","langSection","Menu","anchorEl","keepMounted","open","onClose","authSection","Person","Toolbar","edge","Home","Layout","langName","ReactDOM","render","MuiThemeProvider","createMuiTheme","light","yellow","main","dark","secondary","amber","red","useReducer","user","Provider","maxSnack","setMovies","page","setPage","setSearchType","setLoader","bol","apiUri","onload","scrollTest","h","documentElement","st","sh","clientHeight","watchDetails","image","Source","Array","_","path","userData","setUserData","userTmp","setUserTmp","change","setChange","handleSubmit","changeUserData","findUser","setTimeout","clearTimeout","setMovie","videoSrc","setVideoSrc","setSubtitles","synopsis","setSynopsis","find","int","sub","fetchMovie","text","translateSyn","controls","autoPlay","kind","srcLang","torrents","goStream","actors","boxoffice","validate","default","module","exports"],"mappings":"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","file":"static/js/main.0ff5640b.chunk.js","sourcesContent":["import React, { useEffect } from 'react'\nimport axios from 'axios';\nexport const Store = React.createContext();\n\nexport const actionTypes = {\n\tINIT: 'INIT',\n\tLOGOUT: 'LOGOUT',\n\tPROFIL: 'PROFIL',\n\tCHANGE_AVATAR: 'CHANGE_AVATAR',\n\tCOMPLETE: 'COMPLETE',\n\tVIEW: 'VIEW',\n\tLANG: 'LANG',\n\tCACHE: 'CACHE',\n};\n\nconst initialState = {\n\tlogin: false,\n\tid: null,\n\tcomplete: false,\n\tusername: null,\n\tavatar: null,\n\tlang: 'eng',\n\tviews: [],\n\tcache: {\n\t\tsearchType : null,\n\t\tfilters: null,\n\t\tsort: null,\n\t\tmovies: null\n\t}\n};\n\nfunction reducer(state, action)\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'INIT':\n\t\t\treturn (action.payload)\n\t\tcase 'LOGOUT':\n\t\t\treturn (initialState);\n\t\tcase 'PROFIL':\n\t\t\treturn ({...state});\n\t\tcase 'CHANGE_AVATAR':\n\t\t\treturn ({...state, avatar: action.payload});\n\t\tcase 'COMPLETE':\n\t\t\treturn ({...state, complete: true});\n\t\tcase 'VIEW':\n\t\t\treturn ({...state, views: action.payload});\n\t\tcase 'LANG':\n\t\t\treturn ({...state, lang: action.payload});\n\t\tcase 'CACHE':\n\t\t\treturn ({...state, cache: action.payload});\n\t\tdefault:\n\t\t\treturn (state);\n\t}\n}\n\nexport function StoreProvider(props)\n{\n\tconst [state, dispatch] = React.useReducer(reducer, initialState);\n\tconst value = { state, dispatch };\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\t(async function() {\n\t\t\ttry {\n\t\t\t\tlet user = await axios.get('/auth');\n\t\t\t\tif (user.data !== 'OK')\n\t\t\t\t\tdispatch({type: 'INIT', payload:\n\t\t\t\t\t\t{...user.data, login: true}});\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t}\n\t\t})();\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [])\n\treturn (<Store.Provider value={value}>\n\t\t\t{props.children}\n\t</Store.Provider>\n\t);\n}\n","const translate = {\n\tnavbar: {\n\t\thome: {\n\t\t\teng: 'Home',\n\t\t\tfr: 'Accueil'\n\t\t},\n\t\tprofil: {\n\t\t\teng: 'Profile',\n\t\t\tfr: 'Profil'\n\t\t},\n\t\tlogout: {\n\t\t\teng: 'Logout',\n\t\t\tfr: 'Déconnexion'\n\t\t}\n\t},\n\n\tform: {\n\t\tplaceholderName: {\n\t\t\teng: 'Name',\n\t\t\tfr: 'Nom'\n\t\t},\n\t\tplaceholderFirstname: {\n\t\t\teng: 'Firstname',\n\t\t\tfr: 'Prénom'\n\t\t},\n\t\tplaceholderUsername: {\n\t\t\teng: 'Username',\n\t\t\tfr: 'Identifiant'\n\t\t},\n\t\tplaceholderMail: {\n\t\t\teng: 'Email',\n\t\t\tfr: 'Email'\n\t\t},\n\t\tplaceholderPassword: {\n\t\t\teng: 'Password',\n\t\t\tfr: 'Mot de passe'\n\t\t},\n\t\tplaceholderConfirm: {\n\t\t\teng: 'Confirm password',\n\t\t\tfr: 'Confirmation du mot de passe'\n\t\t},\n\t\tlabelImg: {\n\t\t\teng: 'Click or drag your avatar here',\n\t\t\tfr: 'Cliquez ou déposez votre image ici'\n\t\t},\n\t\tsubmitModify: {\n\t\t\teng: 'Modify',\n\t\t\tfr: 'Modifier'\n\t\t},\n\t\temptyFields: {\n\t\t\teng: 'At least one field is empty',\n\t\t\tfr: 'Au moins un des champs est vide'\n\t\t}\n\t},\n\n\n\tlogin: {\n\t\tslogan: {\n\t\t\teng: 'Login, set up yourself, enjoy your movie !',\n\t\t\tfr: 'Connecte toi, installe toi, bonne séance !'\n\t\t},\n\t\tloginToken: {\n\t\t\teng: \"You must validate your account before logging in, go to your mailbox.\",\n\t\t\tfr: \"Vous devez valider votre compte avant de vous connecter, rendez-vous sur votre boîte mail.\"\n\t\t},\n\t\tloginPass: {\n\t\t\teng: \"Bad password.\",\n\t\t\tfr: \"Mauvais mot de passe.\"\n\t\t},\n\t\tloginUser: {\n\t\t\teng: \"Unknown user.\",\n\t\t\tfr: \"Utilisateur inconnu.\"\n\t\t},\n\n\t\tform: {\n\t\t\tconnexion: {\n\t\t\t\ttitle: {\n\t\t\t\t\teng: 'SIGN IN',\n\t\t\t\t\tfr: 'CONNEXION',\n\t\t\t\t},\n\t\t\t\tsubmitButton: {\n\t\t\t\t\teng: 'Login',\n\t\t\t\t\tfr: 'Se connecter',\n\t\t\t\t},\n\t\t\t\tforgotPass: {\n\t\t\t\t\teng: 'Forgot your password ?',\n\t\t\t\t\tfr: 'Mot de passe oublié ?'\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tregistration: {\n\t\t\t\ttitle: {\n\t\t\t\t\teng: 'REGISTER',\n\t\t\t\t\tfr: 'INSCRIPTION'\n\t\t\t\t},\n\t\t\t\tsubmitButton: {\n\t\t\t\t\teng: 'Create my account',\n\t\t\t\t\tfr: 'Créer mon compte'\n\t\t\t\t},\n\t\t\t\tmailActivate: {\n\t\t\t\t\teng: \"A confirmation email has been sent to you.\",\n\t\t\t\t\tfr: \"Un mail de confirmation vous a été envoyé.\"\n\t\t\t\t},\n\t\t\t\tmailValidate: {\n\t\t\t\t\teng: \"Your account is activated, you will be able to connect.\",\n\t\t\t\t\tfr: \"Votre compte est activé, vous allez pouvoir vous connecter.\"\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tomniauth: {\n\t\t\t\teng: 'Connect with ',\n\t\t\t\tfr: 'Connecte toi avec ',\n\t\t\t},\n\t\t\tforgot: {\n\t\t\t\tback: {\n\t\t\t\t\teng: ' Back',\n\t\t\t\t\tfr: ' Retour'\n\t\t\t\t},\n\t\t\t\tsend: {\n\t\t\t\t\teng: 'Send',\n\t\t\t\t\tfr: 'Envoyer'\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\teng: 'Enter your username, you will receive a reset mail',\n\t\t\t\t\tfr: \"Rentre ton identifiant, tu recevras un mail de réinitialisation à l'adresse que tu as indiqué\"\n\t\t\t\t},\n\t\t\t\tmail: {\n\t\t\t\t\teng: \"An email has been sent to you, check your mailbox to republish your password and reconnect\",\n\t\t\t\t\tfr: \"Un mail vous a été envoyé, allez sur votre boite mail afin de rééditer votre mot de passe et de vous reconnecter\"\n\t\t\t\t},\n\t\t\t\talreadyMail: {\n\t\t\t\t\teng: \"You have already been sent a mail to re-edit your password and log in again\",\n\t\t\t\t\tfr: \"Un mail vous déjà été envoyé afin de rééditer votre mot de passe et de vous reconnecter\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tlibrary: {\n\t\tcomplete : {\n\t\t\tfr : \"Veuillez compléter votre \",\n\t\t\teng: \"Please complete your \"\n\t\t},\n\t\tprofil : {\n\t\t\tfr: \"Profil\",\n\t\t\teng: \"Profile\"\n\t\t},\n\t\tmenu: {\n\t\t\tpopular: {\n\t\t\t\teng: 'Top trends',\n\t\t\t\tfr: 'Top tendances'\n\t\t\t},\n\t\t\tlastadded: {\n\t\t\t\teng: 'Last added',\n\t\t\t\tfr: 'Les derniers ajouts'\n\t\t\t},\n\t\t\trandom: {\n\t\t\t\teng: 'Random',\n\t\t\t\tfr: 'Aléatoire'\n\t\t\t},\n\t\t\tsearch: {\n\t\t\t\teng: 'Search',\n\t\t\t\tfr: 'Rechercher'\n\t\t\t}\n\t\t},\n\t\tfilterAndSort: {\n\t\t\tgender: {\n\t\t\t\teng: 'GENDERS',\n\t\t\t\tfr: 'GENRES'\n\t\t\t},\n\t\t\tyear: {\n\t\t\t\teng: 'YEARS',\n\t\t\t\tfr: 'ANNÉES',\n\t\t\t},\n\t\t\tratings: {\n\t\t\t\teng: 'RATINGS',\n\t\t\t\tfr: 'SCORES'\n\t\t\t},\n\t\t\tname: {\n\t\t\t\teng: 'NAME',\n\t\t\t\tfr: 'NOM'\n\t\t\t},\n\t\t\tsortLabel: {\n\t\t\t\teng: 'ORDER BY : ',\n\t\t\t\tfr: 'TRIER PAR : '\n\t\t\t},\n\t\t\tnone: {\n\t\t\t\teng: 'none',\n\t\t\t\tfr: 'aucun'\n\t\t\t}\n\t\t},\n\t},\n\n\tmovie: {\n\t\tbacklink: {\n\t\t\teng: '<- Back to catalogue',\n\t\t\tfr: '<- Retour au catalogue'\n\t\t},\n\t\tyear: {\n\t\t\teng: 'Release date',\n\t\t\tfr: 'Date de sortie'\n\t\t},\n\t\tdirector: {\n\t\t\teng: 'Director',\n\t\t\tfr: 'Directeur'\n\t\t},\n\t\tactor: {\n\t\t\teng: 'Actors',\n\t\t\tfr: 'Acteurs'\n\t\t},\n\t\tgender: {\n\t\t\teng: 'Gender',\n\t\t\tfr: 'Genre'\n\t\t},\n\t\tform: {\n\t\t\ttitle: {\n\t\t\t\teng: 'Comments',\n\t\t\t\tfr: 'Commentaires'\n\t\t\t},\n\t\t\ttextarea: {\n\t\t\t\teng: 'Write your comment here',\n\t\t\t\tfr: 'Écrivez votre commentaire'\n\t\t\t},\n\t\t\tsubmit: {\n\t\t\t\teng: 'Post',\n\t\t\t\tfr: 'Envoyer'\n\t\t\t}\n\t\t},\n\t\ttTable: {\n\t\t\tquality: {\n\t\t\t\teng: 'Quality',\n\t\t\t\tfr: 'Qualité',\n\t\t\t},\n\t\t\tlanguage: {\n\t\t\t\teng: 'Language',\n\t\t\t\tfr: 'Langage'\n\t\t\t},\n\t\t\tlink: {\n\t\t\t\teng: 'Link',\n\t\t\t\tfr: 'Lien'\n\t\t\t}\n\t\t},\n\t\tsubtitles: {\n\t\t\teng: 'Subtitles are available',\n\t\t\tfr: 'Des sous-titres sont disponibles'\n\t\t}\n\t},\n\n\tprofil: {\n\t\tpersonnal: {\n\t\t\teng: 'Personnal informations',\n\t\t\tfr: 'Informations personnelles',\n\t\t},\n\t\tpassword: {\n\t\t\teng: 'Password',\n\t\t\tfr: 'Mot de passe'\n\t\t},\n\t\tclear: {\n\t\t\teng: 'Clear',\n\t\t\tfr: 'Effacer'\n\t\t},\n\t\timg: {\n\t\t\teng: 'Picture',\n\t\t\tfr: 'Image'\n\t\t},\n\t\timgdrop: {\n\t\t\teng: 'Click or drop your image here',\n\t\t\tfr: 'Cliquez ou déposez votre image ici',\n\t\t},\n\t\tpwd: {\n\t\t\teng: 'Change your password',\n\t\t\tfr: 'Modifier votre mot de passe'\n\t\t},\n\t\thistory: {\n\t\t\teng: 'Watched movie history',\n\t\t\tfr: 'Historique des films regardés'\n\t\t},\n\t\tpwdModify: {\n\t\t\teng: 'Your password has been updated.',\n\t\t\tfr: 'Votre mot de passe a été actualisé.'\n\t\t},\n\t\tupdate: {\n\t\t\tavatar: {\n\t\t\t\teng: 'Avatar successfuly updated',\n\t\t\t\tfr: \"L'avatar a ete mis a jour\"\n\t\t\t},\n\t\t\tcomplete: {\n\t\t\t\teng: 'Your profil is now completed',\n\t\t\t\tfr: 'Votre profil est desormais complet',\n\t\t\t},\n\t\t\tgeneral: {\n\t\t\t\teng: 'Settings are now update',\n\t\t\t\tfr: 'Les parametres ont ete mis a jour',\n\t\t\t},\n\t\t},\n\t},\n\n\terror: {\n\t\tformat: {\n\t\t\teng: 'Format is incorrect',\n\t\t\tfr: 'Le format est incorrect'\n\t\t},\n\t\tsize: {\n\t\t\teng: 'File size too big',\n\t\t\tfr: 'La taille du fichier est trop grande'\n\t\t},\n\t\tlength: {\n\t\t\teng: 'Too many caracters',\n\t\t\tfr: 'Trop de caractères'\n\t\t},\n\t\tunknow: {\n\t\t\teng: 'An error occured, please try again',\n\t\t\tfr: 'Une erreur est survenue, veuillez réessayer',\n\t\t},\n\t\tempty: {\n\t\t\teng: 'Empty field',\n\t\t\tfr: 'Le champ est vide'\n\t\t},\n\t\timTeapot: {\n\t\t\teng: 'Unknown error ...',\n\t\t\tfr: 'Erreur inconnue rip'\n\t\t},\n\t\tunAuthorized: {\n\t\t\teng: 'Your session has expired please relog in',\n\t\t\tfr: 'Votre session a expire, merci de vous reconnecter',\n\t\t},\n\t\tdiff: {\n\t\t\teng: 'Passwords are differents',\n\t\t\tfr: 'Les mots de passe sont differents',\n\t\t},\n\t\talreadyTaken: {\n\t\t\teng: 'Already taken',\n\t\t\tfr: 'Deja utilise',\n\t\t},\n\t},\n\n\tnotFoundPage: {\n\t\ttitle: {\n\t\t\teng: 'This page no longer exists',\n\t\t\tfr: 'Cette page n existe plus',\n\t\t},\n\t\tbody: {\n\t\t\teng: \"You'll be redirected in few second\",\n\t\t\tfr: \"Vous serez redirige sur l'acceuil dans quelques secondes\"\n\t\t}\n\t}\n}\n\nexport default translate;\n","import React, { useState, useEffect, useContext } from 'react';\nimport { navigate } from '@reach/router';\nimport trans from '../translate';\nimport { Store } from '../store';\n\nexport default function NotFound()\n{\n\tconst [count, setCount] = useState(5);\n\tconst { state: {\n\t\tlang\n\t}} = useContext(Store);\n\n\tuseEffect(() => {\n\t\tfunction tick() {\n\t\t\tsetCount(count - 1);\n\t\t}\n\t\tvar intervalID = setInterval(tick, 1000);\n\t\treturn function cleanup() {\n\t\t\tclearInterval(intervalID);\n\t\t}\n\t})\n\tif (count === 0)\n\t\tnavigate('/');\n\treturn (\n\t\t<>\n\t\t<h1>{trans.notFoundPage.title[lang]}</h1>\n\t\t<h2>{`${trans.notFoundPage.body[lang]} (${count})`}</h2>\n\t\t</>\n\t);\n}\n","\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n\tsearch: {\n\t\tposition: 'relative',\n\t\tborderRadius: theme.shape.borderRadius,\n\t\tbackgroundColor: fade(theme.palette.common.white, 0.15),\n\t\t'&:hover': {\n\t\t\tbackgroundColor: fade(theme.palette.common.white, 0.25),\n\t\t},\n\t\tmarginRight: theme.spacing(2),\n\t\tmarginLeft: 0,\n\t\twidth: '100%',\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tmarginLeft: theme.spacing(3),\n\t\t\twidth: 'auto',\n\t\t},\n\t},\n\tsearchIcon: {\n\t\twidth: theme.spacing(7),\n\t\theight: '100%',\n\t\tposition: 'absolute',\n\t\tpointerEvents: 'none',\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t},\n\tinputRoot: {\n\t\tcolor: 'inherit',\n\t},\n\tinputInput: {\n\t\tpadding: theme.spacing(1, 1, 1, 7),\n\t\ttransition: theme.transitions.create('width'),\n\t\twidth: '100%',\n\t\t// [theme.breakpoints.up('md')]: {\n\t\t// \twidth: 'auto',\n\t\t// },\n\t},\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttextField: {\n\t\tmarginLeft: theme.spacing(1),\n\t\tmarginRight: theme.spacing(1),\n\t\tbackgroundColor: \"rgba(190, 190, 190, 0.45)\",\n\t\tborderTopLeftRadius: \"0.3rem\",\n\t\tborderTopRightRadius: \"0.3rem\",\n\t},\n\tdense: {\n\t\tmarginTop: theme.spacing(2),\n\n\t},\n\tmenu: {\n\t\twidth: 200,\n\t},\n\tbutton: {\n\t\tmargin: theme.spacing(1),\n\t},\n\troot: {\n\t\tflexGrow: 1,\n\t\tdisplay: 'flex',\n\t\tflexWrap: 'wrap',\n\t},\n\tpaper: {\n\t\twidth: '90%',\n\t\tmargin: 'auto',\n\t\tboxSizing: 'border-box',\n\t\tpadding: '20px',\n\t},\n\tcontrol: {\n\t\tpadding: theme.spacing(2),\n\t},\n\tformControl: {\n\t\tmargin: theme.spacing(1),\n\t\tminWidth: 120,\n\t\tcolor: \"white\",\n\t\ttextColor: \"white\",\n\t},\n\tselectEmpty: {\n\t\tmarginTop: theme.spacing(2),\n\t},\n\tinput: {\n\t\tcolor: \"white\"\n\t  }\n}));\n\nexport default useStyles;\n","import { useSnackbar } from 'notistack';\n\nexport const useNotifications = () => {\n  const { enqueueSnackbar } = useSnackbar();\n  const options = {\n\t  autoHideDuration: 3000, \n\t  preventDuplicate: true,\n\t  disableWindowBlurListener: true,\n  };\n  return {\n    notifySuccess: msg => enqueueSnackbar(msg, { variant: 'success', ...options }), \n    notifyError: msg => enqueueSnackbar(msg, { variant: 'error', ...options }), \n  };\n}\n","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport { navigate } from '@reach/router';\nimport { Store } from '../../store';\nimport axios from 'axios';\nimport Notfound from '../404.js'\nimport trans from '../../translate';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button'\nimport '../../css/main.css';\nimport ClassesUi from \"../ClassesUi\";\nimport { useNotifications } from '../../app/useNotifications';\n\n\nfunction Register(props) {\n\tconst classes = ClassesUi();\n\tconst { state } = props;\n\tconst lastname = useFormInput('');\n\tconst firstname = useFormInput('');\n\tconst username = useFormInput('');\n\tconst mail = useFormInput('');\n\tconst password = useFormInput('');\n\tconst cfpassword = useFormInput('');\n\tconst [mess, setMess] = useState('');\n\tconst [error, setError] = useState(null);\n\tconst [img, setImg] = useState(null);\n\tconst fileInput = useRef(null);\n\tconst { notifyError } = useNotifications(); \n\n\n\tasync function handleSubmit(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tif (!error && img) {\n\t\t\t\tlet newForm = new FormData();\n\t\t\t\tnewForm.append('username', username.value)\n\t\t\t\tnewForm.append('lastname', lastname.value)\n\t\t\t\tnewForm.append('firstname', firstname.value)\n\t\t\t\tnewForm.append('mail', mail.value)\n\t\t\t\tnewForm.append('password', password.value)\n\t\t\t\tnewForm.append('cfpassword', cfpassword.value)\n\t\t\t\tnewForm.append('file', img.file);\n\t\t\t\tlet res = await axios.post('/auth/registration', newForm);\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tres.data.error.forEach(e =>\n\t\t\t\t\t\tnotifyError(trans.error[e.error][state.lang]))\n\t\t\t\telse {\n\t\t\t\t\tsetMess(trans.login.form.registration.mailActivate[state.lang]);\n\t\t\t\t\tdocument.getElementsByClassName('formInfo')[1].style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n            \tnotifyError(trans.form.emptyFields[state.lang])\n\t\t} catch (error) {\n\t\t\tsetError(trans.error.unknow[state.lang]);\n\t\t}\n\t}\n\n\t//IS CALLED WHEN ADDING A FILE AND CHECK FEW THNGS BEFORE CALLING UPLOAD\n\tfunction toggleInput() {\n\t\tlet fileImg = fileInput.current.files[0];\n\t\tif (fileImg) {\n\t\t\tif (fileImg.size > 1000000)\n            \tnotifyError(trans.error.size[state.lang])\n\t\t\telse if (!fileImg.type.match(/image\\/?(png)|(jpg)|(jpeg)/))\n            \tnotifyError(trans.error.format[state.lang])\n\t\t\telse {\n\t\t\t\tsetImg({\n\t\t\t\t\tfile: fileImg,\n\t\t\t\t\tpreview: URL.createObjectURL(fileImg)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t//DEAL THE DRAG AND DROP EVENTS\n\tfunction dragDrop(e) {\n\t\te.preventDefault();\n\t\tlet fileImg = e.dataTransfer.files[0];\n\t\tif (fileImg)\n\t\t\tsetImg({\n\t\t\t\tfile: fileImg,\n\t\t\t\tpreview: URL.createObjectURL(fileImg)\n\t\t\t});\n\t\tdocument.getElementById('drag').style.border = '3px dashed black';\n\t}\n\tfunction dragOver(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed green';\n\t}\n\tfunction dragLeave(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed black';\n\t}\n\tif (state.login) {\n\t\treturn navigate('/')\n\t} else {\n\t\treturn (\n\t\t\t<div className=\"identify\">\n\t\t\t\t{mess && <p>{mess}</p>}\n\t\t\t\t<form className=\"formInfo\" onSubmit={handleSubmit}>\n\t\t\t\t\t<Lastname val={lastname} state={state} classe={classes} setError={setError} />\n\t\t\t\t\t<Firstname val={firstname} state={state} classe={classes} setError={setError} />\n\t\t\t\t\t<Username val={username} state={state} classe={classes} setError={setError} />\n\t\t\t\t\t<Mail val={mail} state={state} classe={classes} setError={setError} />\n\t\t\t\t\t<Password val={password} state={state} classe={classes} setError={setError} />\n\t\t\t\t\t<Cfpassword val={cfpassword} pwd={password.value} state={state} classe={classes} setError={setError} />\n\t\t\t\t\t<div id='drag' className='user-img' onDrop={dragDrop} onDragOver={dragOver} onDragLeave={dragLeave}>\n\t\t\t\t\t\t<label htmlFor='img' className='textImgDrop'>\n\t\t\t\t\t\t{trans.profil.imgdrop[state.lang]}<br />\n\t\t\t\t\t\t(1mo max, format: jpeg/jpg/png)\n\t\t\t\t\t<input type=\"file\" ref={fileInput} onChange={toggleInput} id='img' accept='image/jpeg, image/jpg, image/png' style={{ display: 'none' }} />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{img && img.preview && <img src={img.preview} id='imgprev' alt='preview' />}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" id=\"sendRegister\" color=\"primary\" className={classes.button}> {trans.login.form.registration.submitButton[state.lang]} </Button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t)\n\t};\n}\n\nexport function useFormInput(initialValue) {\n\tconst [value, setValue] = useState(initialValue);\n\n\tfunction handleChange(e, str) {\n\t\tif (str)\n\t\t\tsetValue(str);\n\t\telse\n\t\t\tsetValue(e.target.value);\n\t}\n\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange\n\t};\n}\n\nexport function useCheckServForVal(value, name, tmp) {\n\tconst [error, setError] = useState(null);\n\tuseEffect(() => {\n\t\tvar elem = document.getElementById(name);\n\t\tasync function check_value(e) {\n\t\t\tif (tmp !== value)\n\t\t\t{\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post(`/auth/registration/${name}`,\n\t\t\t\t\t{ value: value });\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\telse if (error)\n\t\t\t\t\tsetError(null);\n\t\t\t} catch (err) {\n\t\t\t\t// setError(trans.error.unknow[state.lang]);\n\t\t\t\tsetError('error');\n\t\t\t}\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_value);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_value);\n\t\t};\n\t})\n\treturn (error);\n}\n\nexport function Lastname(props) {\n\tconst error = useCheckServForVal(props.val.value, 'lastname');\n\tif (error)\n\t\tprops.setError(true);\n\telse\n\t\tprops.setError(false);\n\n\treturn (\n\t\t<TextField\n\t\t\tname='lastname'\n\t\t\ttype='text'\n\t\t\t{...props.val}\n\t\t\tid=\"lastname\"\n\t\t\tlabel={trans.form.placeholderName[props.state.lang]}\n\t\t\tclassName={props.classe.textField}\n\t\t\tmargin=\"normal\"\n\t\t\tvariant=\"filled\"\n\t\t\terror={!!error}\n\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t/>\n\t);\n}\n\nexport function Firstname(props) {\n\tconst error = useCheckServForVal(props.val.value, 'firstname');\n\tif (error)\n\t\tprops.setError(true);\n\telse\n\t\tprops.setError(false);\n\n\treturn (\n\t\t<TextField\n\t\t\tname='firstname'\n\t\t\ttype='text'\n\t\t\t{...props.val}\n\t\t\tid=\"firstname\"\n\t\t\tlabel={trans.form.placeholderFirstname[props.state.lang]}\n\t\t\tclassName={props.classe.textField}\n\t\t\tmargin=\"normal\"\n\t\t\tvariant=\"filled\"\n\t\t\terror={!!error}\n\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t/>\n\t);\n}\n\nexport function Username(props) {\n\tconst error = useCheckServForVal(props.val.value, 'username', props.tmp);\n\tif (error)\n\t\tprops.setError(true);\n\telse\n\t\tprops.setError(false);\n\n\treturn (\n\t\t\t<TextField\n\t\t\t\tname='username'\n\t\t\t\ttype='text'\n\t\t\t\t{...props.val}\n\t\t\t\tid=\"username\"\n\t\t\t\tlabel={trans.form.placeholderUsername[props.state.lang]}\n\t\t\t\tclassName={props.classe.textField}\n\t\t\t\tmargin=\"normal\"\n\t\t\t\tvariant=\"filled\"\n\t\t\t\terror={!!error}\n\t\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t\t/>\n\t);\n}\n\nexport function Mail(props) {\n\tconst error = useCheckServForVal(props.val.value, 'mail', props.tmp);\n\tif (error)\n\t\tprops.setError(true);\n\telse\n\t\tprops.setError(false);\n\n\treturn (\n\t\t<TextField\n\t\t\tname='mail'\n\t\t\ttype='text'\n\t\t\t{...props.val}\n\t\t\tid=\"mail\"\n\t\t\tlabel={trans.form.placeholderMail[props.state.lang]}\n\t\t\tclassName={props.classe.textField}\n\t\t\tmargin=\"normal\"\n\t\t\tvariant=\"filled\"\n\t\t\terror={!!error}\n\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t/>\n\t);\n}\n\nexport function Password(props) {\n\tconst error = useCheckServForVal(props.val.value, 'password');\n\tif (error)\n\t\tprops.setError(true);\n\telse\n\t\tprops.setError(false);\n\n\treturn (\n\t\t<TextField\n\t\t\tname='password'\n\t\t\ttype='password'\n\t\t\t{...props.val}\n\t\t\tid=\"password\"\n\t\t\tlabel={trans.form.placeholderPassword[props.state.lang]}\n\t\t\tclassName={props.classe.textField}\n\t\t\tmargin=\"normal\"\n\t\t\tvariant=\"filled\"\n\t\t\terror={!!error}\n\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t/>\n\t);\n}\n\nexport function Cfpassword(props) {\n\tlet cfpassword = props.val;\n\tlet password = props.pwd;\n\tconst [error, setError] = useState(null);\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementById('cfpassword');\n\t\tasync function check_cfpassword(e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post('/auth/registration/cfpassword',\n\t\t\t\t\t{\n\t\t\t\t\t\tcfpassword: cfpassword.value,\n\t\t\t\t\t\tpassword: password\n\t\t\t\t\t});\n\t\t\t\tif (res.data.error)\n\t\t\t\t{\n\t\t\t\t\tprops.setError(true);\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\t}\n\t\t\t\telse if (error)\n\t\t\t\t{\n\t\t\t\t\tprops.setError(false);\n\t\t\t\t\tsetError(null);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tsetError('An error occured.');\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_cfpassword);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_cfpassword);\n\t\t};\n\t})\n\n\treturn (\n\t\t<TextField\n\t\t\tname='cfpassword'\n\t\t\ttype='password'\n\t\t\t{...cfpassword}\n\t\t\tid=\"cfpassword\"\n\t\t\tlabel={trans.form.placeholderConfirm[props.state.lang]}\n\t\t\tclassName={props.classe.textField}\n\t\t\tmargin=\"normal\"\n\t\t\tvariant=\"filled\"\n\t\t\terror={!!error}\n\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t/>\n\t);\n}\n\nexport function Activate(props) {\n\tconst { state } = useContext(Store);\n\tlet [mess, setMess] = useState(false);\n\tconst [count, setCount] = useState(5);\n\n\tuseEffect(() => {\n\t\tfunction counter() {\n\t\t\tsetCount(count - 1);\n\t\t}\n\t\tvar intervalID = setInterval(counter, 1000);\n\t\treturn function cleanup() {\n\t\t\tclearInterval(intervalID);\n\t\t}\n\t})\n\n\tasync function validate() {\n\t\ttry {\n\t\t\tlet result = await axios.get(`/auth/activate/${props.token}`);\n\t\t\tif (!result.data.error)\n\t\t\t\tsetMess(trans.login.form.registration.mailValidate[state.lang]);\n\t\t\telse\n\t\t\t\tsetMess(result.data.error);\n\t\t} catch (e) {\n\t\t\tsetMess(trans.error.unknow[state.lang]);\n\t\t}\n\t}\n\tif (!mess)\n\t\tvalidate();\n\tif (count === 0)\n\t\tnavigate('/');\n\n\tif (!props.token)\n\t\treturn <Notfound />\n\telse {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div>\n\t\t\t\t\t{mess && <h2>{mess}</h2>}\n\t\t\t\t\t<p>{count}</p>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\nexport default Register;\n","import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { navigate } from '@reach/router';\nimport '../css/main.css';\nimport trans from '../translate';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button'\nimport ClassesUi from \"./ClassesUi\";\nimport { Store } from '../store';\nimport { useNotifications } from '../app/useNotifications';\n\nfunction EditPass(props) {\n\tconst classes = ClassesUi();\n\tconst password = useFormInput('');\n\tconst cfpassword = useFormInput('');\n\tconst [err, setErr] = useState(false);\n\tconst { state } = useContext(Store);\n\tconst { notifySuccess, notifyError } = useNotifications();\n\n\tasync function handleEditPass(e) {\n\t\te.preventDefault();\n\t\tif (password === '' && cfpassword === '')\n\t\t\treturn notifyError(trans.error.empty[state.lang])\n\t\tif (err)\n\t\t\treturn;\n\t\ttry {\n\t\t\tlet result = await axios.post('/auth/updatePass', {\n\t\t\t\ttoken: props.token,\n\t\t\t\tpassword: password.value,\n\t\t\t\tcfpassword: cfpassword.value\n\t\t\t});\n\t\t\tif (result.data.error)\n\t\t\t\tresult.data.error.forEach(e =>\n\t\t\t\t\tnotifyError(trans.error[e.error][state.lang]))\n\t\t\telse if (result.data.origin === 'user')\n\t\t\t{\n\t\t\t\tnotifySuccess(trans.profil.pwdModify[state.lang]);\n\t\t\t\tpassword.reset();\n\t\t\t\tcfpassword.reset();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnotifySuccess(trans.profil.pwdModify[state.lang]);\n\t\t\t\tnavigate('/');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnotifyError(trans.error.unknow[state.lang])\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<form className=\"formInfo\" onSubmit={handleEditPass}>\n\t\t\t\t<Password val={{value: password.value, onChange: password.onChange}} state={state} classe={classes} setErr={setErr} />\n\t\t\t\t<Cfpassword val={{value: cfpassword.value, onChange: cfpassword.onChange}} pwd={password.value} state={state} classe={classes} setErr={setErr} />\n\t\t\t\t<Button type=\"submit\" variant=\"contained\" id=\"sendRegister3\" color=\"primary\" className={classes.button}> {trans.form.submitModify[state.lang]} </Button>\n\t\t\t</form>\n\t\t</>\n\t)\n}\n\nfunction useFormInput(initialValue) {\n\tconst [value, setValue] = useState(initialValue);\n\n\tfunction handleChange(e) {\n\t\tsetValue(e.target.value);\n\t}\n\tfunction reset() {\n\t\tsetValue('');\n\t}\n\n\treturn {\n\t\tvalue,\n\t\tonChange: handleChange,\n\t\treset: reset\n\t};\n}\nexport function useCheckServForVal(value, name) {\n\tconst [error, setError] = useState(null);\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementById('password')\n\t\tasync function check_value(e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post(`/auth/registration/${name}`,\n\t\t\t\t\t{ value: value });\n\t\t\t\tif (res.data.error)\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\telse if (error)\n\t\t\t\t\tsetError(null);\n\t\t\t} catch (err) {\n\t\t\t\tsetError('A error occured.');\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_value);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_value);\n\t\t};\n\t})\n\treturn (error);\n}\nexport function Password(props) {\n\tconst error = useCheckServForVal(props.val.value, 'password');\n\tif (error)\n\t\tprops.setErr(true);\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t\t{/* {error && <span className='error'>{error}</span>} */}\n\t\t\t<TextField\n\t\t\t\tname='password'\n\t\t\t\ttype='password'\n\t\t\t\t{...props.val}\n\t\t\t\tid=\"password\"\n\t\t\t\tlabel={trans.form.placeholderPassword[props.state.lang]}\n\t\t\t\tclassName={props.classe.textField}\n\t\t\t\tmargin=\"normal\" variant=\"filled\"\n\t\t\t\terror={!!error}\n\t\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function Cfpassword(props) {\n\tlet cfpassword = props.val;\n\tlet password = props.pwd;\n\tconst [error, setError] = useState(null);\n\n\tuseEffect(() => {\n\t\tvar elem = document.getElementById('cfpassword');\n\t\tasync function check_cfpassword(e) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.post('/auth/registration/cfpassword',\n\t\t\t\t\t{\n\t\t\t\t\t\tcfpassword: cfpassword.value,\n\t\t\t\t\t\tpassword: password\n\t\t\t\t\t});\n\t\t\t\tif (res.data.error)\n\t\t\t\t{\n\t\t\t\t\tsetError(res.data.error);\n\t\t\t\t\tprops.setErr(true);\n\t\t\t\t}\n\t\t\t\telse if (error)\n\t\t\t\t{\n\t\t\t\t\tprops.setErr(false);\n\t\t\t\t\tsetError(null);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tsetError('An error occured.');\n\t\t\t}\n\t\t}\n\t\telem.addEventListener(\"blur\", check_cfpassword);\n\t\treturn () => {\n\t\t\telem.removeEventListener(\"blur\", check_cfpassword);\n\t\t};\n\t})\n\n\treturn (\n\t\t<div className=\"divForm\">\n\t\t\t{/* {error && <span className='error'>{error}</span>} */}\n\t\t\t<TextField\n\t\t\t\tname='cfpassword'\n\t\t\t\ttype='password'\n\t\t\t\t{...props.val}\n\t\t\t\tid=\"cfpassword\"\n\t\t\t\tlabel={trans.form.placeholderConfirm[props.state.lang]}\n\t\t\t\tclassName={props.classe.textField} margin=\"normal\"\n\t\t\t\tvariant=\"filled\"\n\t\t\t\terror={!!error}\n\t\t\t\thelperText={error && trans.error[error][props.state.lang]}\n\t\t\t/>\n\t\t</div>\n\t);\n}\nexport default EditPass;\n","import { useSnackbar } from 'notistack';\nimport { useContext } from 'react';\nimport { Store, actionTypes } from '../store';\nimport { navigate } from '@reach/router';\nimport ts from '../translate';\n\nexport const useHttpError = () => {\n  const { enqueueSnackbar } = useSnackbar();\n  const { state, dispatch } = useContext(Store);\n  const { login, lang } = state;\n  const handleHttpResponseError = status => {\n    if (status === 401) {\n      enqueueSnackbar(ts.error.unAuthorized[lang], { variant: 'error' });\n      if (login) {\n        dispatch({ type: actionTypes.LOGOUT });\n      } else if (status === 404) {\n        navigate('/404');\n      } else if (status === 418) {\n        enqueueSnackbar(ts.error.imTeapot[lang], { variant: 'error' });\n      }\n    }\n  };\n\n  return {\n    handleHttpResponseError,\n  };\n};\n","import React, { useContext, useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport { Store } from '../store';\nimport { Username, Lastname, Firstname, Mail } from './Auth/Register';\nimport EditPass from './EditPass';\nimport NotFound from './404';\nimport { Link } from '@reach/router';\nimport { useHttpError } from '../app/useHttpError';\nimport trans from '../translate';\nimport Button from '@material-ui/core/Button'\nimport ClassesUi from \"./ClassesUi\";\nimport { useNotifications } from '../app/useNotifications';\nimport '../css/main.css';\n\nconst CHANGE_AVATAR = 'CHANGE_AVATAR';\nconst COMPLETE = 'COMPLETE';\n\nexport default function Account(props) {\n\tconst classes = ClassesUi();\n\tconst { state, dispatch } = useContext(Store);\n\tconst { lang } = state;\n\tconst [userData, setUserData] = useState({\n\t\tusername: '', lastname: '',\n\t\tfirstname: '', mail: '', lang: '', avatar: ''\n\t});\n\tconst [userTmp, setUserTmp] = useState({\n\t\tusername: '', mail: ''\n\t});\n\tconst [error, setError] = useState(null);\n\tconst fileInput = useRef(null);\n\tconst [img, setImg] = useState(null);\n\tconst [change, setChange] = useState(false);\n\tconst { notifySuccess, notifyError } = useNotifications();\n\tconst { handleHttpResponseError } = useHttpError();\n\n\tuseEffect(() => {\n\t\t\tlet h = document.documentElement;\n\t\t\tlet st = 'scrollTop';\n\t\tif (h[st] !== 0)\n\t\t\th[st] = 0;\n\t\t}, [])\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function findUser() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/user/me/${state.id}`,\n\t\t\t\t\t{ cancelToken: source.token });\n\t\t\t\tif (res.data && !res.data.error)\n\t\t\t\t{\n\t\t\t\t\tsetUserData({ ...res.data, cfpassword: '' });\n\t\t\t\t\tsetUserTmp({username:res.data.username, mail: res.data.mail});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetError(trans.error.unknow[state.lang]);\n\t\t\t} catch (e) {\n\t\t\t\tif (axios.isCancel(e))\n\t\t\t\t\tsource.cancel();\n\t\t\t\tsetError(trans.error.unknow[state.lang]);\n\t\t\t}\n\t\t}\n\t\tif (state.id)\n\t\t\tfindUser(state.id);\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [state.id, state.lang])\n\n\tuseEffect(() => {\n\t\tlet intervalID;\n\t\tif (change)\n\t\t\tintervalID = setTimeout(() => setChange(false), 4000);\n\t\treturn () => {\n\t\t\tif (intervalID)\n\t\t\t\tclearTimeout(intervalID);\n\t\t}\n\t}, [change]);\n\n\tasync function handleSubmit(e, type) {\n\t\te.preventDefault();\n\t\tlet payload;\n\t\tif (type === 'user')\n\t\t\tpayload = {\n\t\t\t\tusername: userData.username,\n\t\t\t\tlastname: userData.lastname,\n\t\t\t\tfirstname: userData.firstname,\n\t\t\t\tmail: userData.mail\n\t\t\t};\n\t\telse if (type === 'img' && img)\n\t\t{\n\t\t\tpayload = new FormData();\n\t\t\tpayload.append('file', img.file);\n\t\t}\n\t\telse if (type === 'mdp')\n\t\t\tpayload = {\n\t\t\t\tpassword: userData.password,\n\t\t\t\tcfpassword: userData.password\n\t\t\t};\n\t\tif (payload && !error)\n\t\t{\n\t\ttry {\n\t\t\tlet res = await axios.post(`/user/me/${state.id}/${type}`, payload);\n\t\t\tif (res.data && !res.data.error) {\n\t\t\t\tif (res.data.complete && !state.complete) {\n\t\t\t\t\tnotifySuccess(trans.profil.update.complete[lang]);\n\t\t\t\t\tdispatch({ type: COMPLETE });\n\t\t\t\t}\n\t\t\t\tif (res.data.avatar !== state.avatar) {\n\t\t\t\t\tnotifySuccess(trans.profil.update.avatar[lang]);\n\t\t\t\t\tdispatch({ type: CHANGE_AVATAR, payload: res.data.avatar });\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (userData.username !== userTmp.username\n\t\t\t\t\t\t|| userData.mail !== userTmp.mail)\n\t\t\t\t\t\tsetUserTmp({username: userData.username,\n\t\t\t\t\t\t\tmail: userData.mail});\n\t\t\t\t\tnotifySuccess(trans.profil.update.general[lang]);\n\t\t\t\t}\n\t\t\t\tsetChange(true);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (err.response) {\n\t\t\t\thandleHttpResponseError(err.response.status);\n\t\t\t} else {\n\t\t\t\tsetError(true);\n\t\t\t}\n\t\t}\n\t\t}\n\t}\n\n\tfunction toggleInput() {\n\t\tlet file = fileInput.current.files[0];\n\t\tif (file) {\n\t\t\tif (file.size > 1000000)\n            \tnotifyError(trans.error.size[state.lang])\n\t\t\telse if (!file.type.match(/image\\/?(png)|(jpg)|(jpeg)/))\n            \tnotifyError(trans.error.format[state.lang])\n\t\t\telse {\n\t\t\t\tsetImg({\n\t\t\t\t\tfile: file,\n\t\t\t\t\tpreview: URL.createObjectURL(file)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t//DEAL THE DRAG AND DROP EVENTS\n\tfunction dragDrop(e) {\n\t\te.preventDefault();\n\t\tlet fileImg = e.dataTransfer.files[0];\n\t\tif (fileImg)\n\t\t\tsetImg({\n\t\t\t\tfile: fileImg,\n\t\t\t\tpreview: URL.createObjectURL(fileImg)\n\t\t\t});\n\t\tdocument.getElementById('drag').style.border = '3px dashed black';\n\t}\n\tfunction dragOver(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed green';\n\t}\n\tfunction dragLeave(e) {\n\t\te.preventDefault();\n\t\tdocument.getElementById('drag').style.border = '3px dashed black';\n\t}\n\n\tfunction changeUserData(e) {\n\t\tif (e.target.name === 'lastname')\n\t\t\tsetUserData({ ...userData, lastname: e.target.value });\n\t\tif (e.target.name === 'firstname')\n\t\t\tsetUserData({ ...userData, firstname: e.target.value });\n\t\tif (e.target.name === 'mail')\n\t\t\tsetUserData({ ...userData, mail: e.target.value });\n\t\tif (e.target.name === 'lang')\n\t\t\tsetUserData({ ...userData, lang: e.target.value });\n\t\tif (e.target.name === 'username')\n\t\t\tsetUserData({ ...userData, username: e.target.value });\n\t\tif (e.target.name === 'password')\n\t\t\tsetUserData({ ...userData, password: e.target.value });\n\t\tif (e.target.name === 'cfpassword')\n\t\t\tsetUserData({ ...userData, cfpassword: e.target.value });\n\t}\n\n\tfunction clearHistory() {\n\t\tif (state.views.length > 0)\n\t\t\tdispatch({ type: 'VIEW', payload: [] });\n\t\t\taxios.post('/user/deleteview', {\n\t\t\t\tid: state.id\n\t\t\t});\n\t}\n\n\tif (!state.login) {\n\t\treturn (<NotFound />);\n\t} else {\n\t\treturn (\n\t\t\t<div className='account'>\n\t\t\t\t\t<h1>{state.username}</h1>\n\t\t\t\t\t{state.avatar && <img src={state.avatar} alt='profilPic' className=\"avatarAccount\" />}\n\t\t\t\t\t<h2> {trans.profil.personnal[state.lang]} </h2>\n\t\t\t\t\t<form className=\"formInfo\" onSubmit={(e) => handleSubmit(e, 'user')}>\n\t\t\t\t\t\t<Username val={{ value: userData.username || '', onChange: changeUserData }} state={state} classe={classes} setError={setError} tmp={userTmp.username} />\n\t\t\t\t\t\t<Lastname val={{ value: userData.lastname || '', onChange: changeUserData }} state={state} classe={classes} setError={setError}/>\n\t\t\t\t\t\t<Firstname val={{ value: userData.firstname || '', onChange: changeUserData }} state={state} classe={classes} setError={setError}/>\n\t\t\t\t\t\t<Mail val={{ value: userData.mail || '', onChange: changeUserData }} state={state} classe={classes} setError={setError} tmp={userTmp.mail} />\n\t\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" id=\"sendRegister\" color=\"primary\" className={classes.button}> {trans.form.submitModify[state.lang]} </Button>\n\t\t\t\t\t</form>\n\t\t\t\t\t<h2>{trans.profil.img[state.lang]}</h2>\n\t\t\t\t\t<form className=\"formInfo\" onSubmit={(e) => handleSubmit(e, 'img')}>\n\t\t\t\t\t\t<div id='drag' className='user-img' onDrop={dragDrop} onDragOver={dragOver} onDragLeave={dragLeave}>\n\t\t\t\t\t\t\t<label htmlFor='img'>\n\t\t\t\t\t\t\t\t{trans.profil.imgdrop[state.lang]}<br />\n\t\t\t\t\t\t\t\t(1mo max, format: jpeg/jpg/png)\n\t\t\t\t\t\t\t<input type=\"file\" ref={fileInput} onChange={toggleInput} id='img' accept='image/jpeg, image/jpg, image/png' style={{ display: 'none' }} />\n\t\t\t\t\t\t\t\t{error && <p className='error'>{error}</p>}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{img && img.preview && <img src={img.preview} id='imgprev' alt='preview' />}\n\t\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" id=\"sendRegister2\" color=\"primary\" className={classes.button}> {trans.login.form.forgot.send[state.lang]} </Button>\n\t\t\t\t\t</form>\n\t\t\t\t\t<h2>{trans.profil.pwd[state.lang]}</h2>\n\t\t\t\t\t<EditPass token={state.id} />\n\t\t\t\t\t<h2>{trans.profil.history[state.lang]}</h2>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{state.views && state.views.map((e, index) => (<li key={index}><Link className='link' to={`/film/${e.imdb}`}>{e.title}</Link></li>))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t<Button onClick={clearHistory} variant=\"contained\" id=\"sendclear\" color=\"primary\" className={classes.button}> {trans.profil.clear[state.lang]} </Button>\n\t\t\t</div>\n\t\t)\n\t};\n}\n","import React, { useState, useContext } from 'react';\nimport { Store } from '../../store';\nimport NotFound from '../404';\nimport { navigate } from '@reach/router';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport InputBase from '@material-ui/core/InputBase';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport SearchIcon from '@material-ui/icons/Search';\nimport trans from \"./../../translate\";\nimport ClassesUi from \"./../ClassesUi\";\n\nexport default function CatalagueBar(props) {\n\tconst classes = ClassesUi();\n\tconst { displayData, activeTab, loader } = props;\n\tconst [val, setVal] = useState('');\n\tconst { state } = useContext(Store);\n\n\tfunction research(e) {\n\t\te.preventDefault();\n\t\tdisplayData('search', val);\n\t}\n\n\tif (!state.login) {\n\t\treturn (<NotFound />)\n\t} else {\n\t\tif (!state.complete) {\n\t\t\treturn navigate('/profil')\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className='catalogue-bar'>\n\t\t\t\t\t{/* <button id='popular' onClick={() => displayData('popular')}>Most popular</button>\n\t\t\t\t\t<button id='lastadded' className='button' onClick={() => displayData('lastadded')}>Last added</button>\n\t\t\t\t\t<button id='random' className='button' onClick={() => displayData('random')}>Random</button> */}\n\t\t\t\t\t<form onSubmit={research}>\n\t\t\t\t\t\t<div id='div-searchBar' className={classes.search}>\n\t\t\t\t\t\t\t<div className={classes.searchIcon}>\n\t\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<InputBase\n\t\t\t\t\t\t\tplaceholder={trans.library.menu.search[state.lang]+\"...\"}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\troot: classes.inputRoot,\n\t\t\t\t\t\t\t\t\tinput: classes.inputInput,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tinputProps={{ 'aria-label': 'search' }}\n\t\t\t\t\t\t\t\tonChange={(e) => setVal(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t\t<Grid item >\n\t\t\t\t\t\t<ButtonGroup fullWidth color=\"primary\" aria-label=\"outlined primary button group\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tid='popular'\n\t\t\t\t\t\t\t\tvariant={activeTab === 'popular' ? 'contained' : 'outlined'}\n\t\t\t\t\t\t\t\tonClick={() => loader ? loader: displayData('popular')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{trans.library.menu.popular[state.lang]}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={activeTab === 'lastadded' ? 'contained' : 'outlined'}\n\t\t\t\t\t\t\t\tid='lastadded'\n\t\t\t\t\t\t\t\tclassName='button'\n\t\t\t\t\t\t\t\tonClick={() => loader ? loader: displayData('lastadded')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{trans.library.menu.lastadded[state.lang]}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={activeTab === 'random' ? 'contained' : 'outlined'}\n\t\t\t\t\t\t\t\tid='random'\n\t\t\t\t\t\t\t\tclassName='button'\n\t\t\t\t\t\t\t\tonClick={() => loader ? loader:displayData('random')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{trans.library.menu.random[state.lang]}\n\t\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n","import React, { useState, useEffect } from 'react';\nimport Slider from '@material-ui/core/Slider';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Switch from '@material-ui/core/Switch';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport trans from \"./../../translate\";\nimport ClassesUi from \"./../ClassesUi\";\n\n\nexport default function SortBar(props) {\n\tconst classes = ClassesUi();\n\tconst { state } = props;\n\tconst [genders, setGenders] = useState([]);\n\tconst sorts = ['name', 'year', 'ratings'];\n\tconst setTmp = props.tmp;\n\tconst { movies, filters, setFilters, sort, setSort } = props;\n\tconst [syear, setSyear] = useState([1900, 2019]);\n\tconst [srate, setSrate] = useState([0, 100]);\n\n\tuseEffect(() => {\n\t\tif (filters && filters.year && filters.year.value)\n\t\t\tsetSyear(filters.year.value);\n\t\telse\n\t\t\tsetSyear([1900, 2019]);\n\t\tif (filters && filters.ratings && filters.ratings.value)\n\t\t\tsetSrate(filters.ratings.value);\n\t\telse\n\t\t\tsetSrate([0, 100]);\n\t}, [filters])\n\n\tuseEffect(() => {\n\t\tfunction getGenders() {\n\t\t\tlet tmpG = [];\n\t\t\tmovies.forEach(e => e.genre.forEach(f => {\n\t\t\t\tif (!tmpG.includes(f))\n\t\t\t\t\ttmpG.push(f)\n\t\t\t}));\n\t\t\treturn tmpG;\n\t\t}\n\t\tsetGenders(getGenders);\n\t}, [movies])\n\n\tuseEffect(() => {\n\t\tif (movies)\n\t\t\tsetTmp(filterMovies(movies, filters, sort));\n\t}, [filters, movies, setTmp, sort])\n\n\tfunction toggleGender(e) {\n\t\tif (filters.gender.value.includes(e))\n\t\t\tsetFilters({\n\t\t\t\t...filters, gender: {\n\t\t\t\t\ton: filters.gender.on,\n\t\t\t\t\tvalue: filters.gender.value.filter(f => f !== e)\n\t\t\t\t}\n\t\t\t});\n\t\telse\n\t\t\tsetFilters({\n\t\t\t\t...filters, gender: {\n\t\t\t\t\ton: filters.gender.on,\n\t\t\t\t\tvalue: [...filters.gender.value, e]\n\t\t\t\t}\n\t\t\t});\n\t}\n\tfunction toggleFilters(e) {\n\t\tlet tmp = { ...filters };\n\t\ttmp[e.target.name].on = !tmp[e.target.name].on;\n\t\tsetFilters(tmp);\n\t}\n\n\n\treturn (\n\t\t<div className='filters-container'>\n\t\t\t<div className={classes.root}>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<Paper id=\"paper1Cata\" className={classes.paper}>\n\t\t\t\t\t\t<FormControlLabel className=\"labelSort\"\n\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tname='gender' checked={filters.gender.on} onChange={toggleFilters}\n\t\t\t\t\t\t\t\t\tvalue=\"checkedB\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel={trans.library.filterAndSort.gender[state.lang]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{filters.gender.on && <ul className='genderslist'>\n\t\t\t\t\t\t\t{genders.map((e, index) => (\n\t\t\t\t\t\t\t\t<li className=\"genderL\" style={{ backgroundColor: filters.gender.value.includes(e) ? '#DFB220' : '' }} key={index} onClick={() => toggleGender(e)}>{e}</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>}\n\t\t\t\t\t\t<FormControlLabel className=\"labelSort\"\n\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tname=\"year\"\n\t\t\t\t\t\t\t\t\tchecked={filters.year.on}\n\t\t\t\t\t\t\t\t\tonChange={toggleFilters}\n\t\t\t\t\t\t\t\t\tvalue=\"checkedB\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel={trans.library.filterAndSort.year[state.lang]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{filters.year.on && <Slider className='filters'\n\t\t\t\t\t\t\tmin={1900}\n\t\t\t\t\t\t\tmax={2019}\n\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\tvalue={syear}\n\t\t\t\t\t\t\tonChange={(e, newValue) => setSyear(newValue)}\n\t\t\t\t\t\t\tonChangeCommitted={(e, newValue) => setFilters({ ...filters, year: { on: filters.year.on, value: newValue } })}\n\t\t\t\t\t\t\tvalueLabelDisplay=\"on\"\n\t\t\t\t\t\t\taria-labelledby=\"range-slider\"\n\t\t\t\t\t\t/>}\n\t\t\t\t\t\t{/* name='ratings' checked={filters.ratings.on} onChange={toggleFilters} */}\n\t\t\t\t\t\t<FormControlLabel className=\"labelSort\"\n\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tname='ratings' checked={filters.ratings.on} onChange={toggleFilters}\n\t\t\t\t\t\t\t\t\tvalue=\"checkedB\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel={trans.library.filterAndSort.ratings[state.lang]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{filters.ratings.on && <Slider className='filters'\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\tvalue={srate}\n\t\t\t\t\t\t\tonChange={(e, newValue) => setSrate(newValue)}\n\t\t\t\t\t\t\tonChangeCommitted={(e, newValue) => setFilters({ ...filters, ratings: { on: filters.ratings.on, value: newValue } })}\n\t\t\t\t\t\t\tvalueLabelDisplay=\"on\"\n\t\t\t\t\t\t\taria-labelledby=\"range-slider\"\n\t\t\t\t\t\t/>}\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div className=\"orderContainer\">\n\t\t\t\t<ArrowUpwardIcon fontSize=\"large\" className=\"arrow\" aria-label='up-arrow' onClick={() => setSort({ ...sort, order: true })} />\n\t\t\t\t<ArrowDownwardIcon fontSize=\"large\" className=\"arrow\" aria-label='down-arrow' onClick={() => setSort({ ...sort, order: false })} />\n\n\t\t\t\t<FormControl id=\"orderBy\" variant=\"filled\" className={classes.formControl}>\n\t\t\t\t\t<InputLabel htmlFor=\"filled-age-simple\">{trans.library.filterAndSort.sortLabel[state.lang]}</InputLabel>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={sort.value} onChange={(e) => setSort({ ...sort, value: e.target.value })}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\tname: 'Order by',\n\t\t\t\t\t\t\tid: 'filled-Orderby-simple',\n\t\t\t\t\t\t\tclassName: classes.input\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{sorts.map((e, index) => (\n\t\t\t\t\t\t\t<MenuItem className=\"MenuItem\" value={e} key={index}>{menuTard(e, state.lang)}</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</FormControl>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction menuTard(e, lang) {\n\tconst sorts = ['name', 'year', 'ratings'];\n\tif (e === sorts[0])\n\t\treturn trans.library.filterAndSort.name[lang]\n\tif (e === sorts[1])\n\t\treturn trans.library.filterAndSort.year[lang]\n\tif (e === sorts[2])\n\t\treturn trans.library.filterAndSort.ratings[lang]\n}\n\nfunction filterMovies(movies, filters, sort) {\n\tlet tmp = [...movies];\n\tif (filters.gender.on && filters.gender.value.length > 0)\n\t\ttmp = tmp.filter(e => filters.gender.value.every(f => e.genre.includes(f)));\n\tif (filters.year.on && filters.year.value)\n\t\ttmp = tmp.filter(e => e.year >= filters.year.value[0] && e.year <= filters.year.value[1])\n\tif (filters.ratings.on && filters.ratings.value)\n\t\ttmp = tmp.filter(e => rateAverage(e.ratings) >= filters.ratings.value[0]\n\t\t\t&& rateAverage(e.ratings) <= filters.ratings.value[1])\n\tif (sort.value !== '')\n\t\ttmp = sortMovies(tmp, sort.value, sort.order)\n\treturn tmp;\n}\n\nfunction sortMovies(movies, type, order) {\n\tif (type === 'name')\n\t\treturn movies.sort((a, b) => {\n\t\t\tlet i = 0;\n\t\t\twhile (a.title.length < i && b.title.length < i &&\n\t\t\t\ta.title.charCodeAt(i) === b.title.charCodeAt(i))\n\t\t\t\ti++;\n\t\t\tif (a.title.charCodeAt(i) > b.title.charCodeAt(i)) {\n\t\t\t\tif (order)\n\t\t\t\t\treturn 1;\n\t\t\t\telse\n\t\t\t\t\treturn -1\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (order)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 1\n\t\t\t}\n\t\t});\n\telse if (type === 'ratings') {\n\t\treturn movies.sort((a, b) => {\n\t\t\tif (a.ratings && b.ratings) {\n\t\t\t\tlet aAverage = rateAverage(a.ratings);\n\t\t\t\tlet bAverage = rateAverage(b.ratings);\n\t\t\t\tif (aAverage > bAverage) {\n\t\t\t\t\tif (order)\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (order)\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn 1\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (a.ratings && !b.ratings) {\n\t\t\t\tif (order)\n\t\t\t\t\treturn 1;\n\t\t\t\telse\n\t\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (order)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t});\n\t}\n\telse if (type === 'year') {\n\t\tif (order)\n\t\t\treturn movies.sort((a, b) => (a.year > b.year ? 1 : -1));\n\t\telse\n\t\t\treturn movies.sort((a, b) => (a.year > b.year ? -1 : 1));\n\t}\n\telse\n\t\treturn movies;\n}\n\nfunction rateAverage(rate) {\n\tlet average = 0;\n\trate.forEach(e => {\n\t\taverage += stringToNb(e.Value)\n\t});\n\tif (rate.length > 0)\n\t{\n\t\taverage /= rate.length;\n\t\taverage = Math.round(average);\n\t}\n\treturn average;\n}\n\nfunction stringToNb(str) {\n\tif (typeof (str) !== 'number') {\n\t\tlet i = str.match(/\\.|,/);\n\t\tif (i && i[0])\n\t\t\tstr = str.split(i[0]).join('');\n\t\tstr = parseInt(str, 10);\n\t\tif (isNaN(str))\n\t\t\tstr = 0;\n\t}\n\treturn str\n}\n","import React, { useState } from 'react';\nimport axios from 'axios';\nimport { navigate } from '@reach/router';\nimport trans from '../../translate';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport '../../css/main.css';\nimport ClassesUi from \"../ClassesUi\";\nimport { useNotifications } from '../../app/useNotifications';\n\nfunction Login(props) {\n  const classes = ClassesUi();\n  const username = useFormInput('');\n  const password = useFormInput('');\n  const { state } = props;\n  const [fieldErrors, setFieldErrors] = useState({\n    username: null,\n    password: null,\n    passwordForget: null,\n  })\n  const [forgetPass, setForgetPass] = useState(false);\n\tconst { notifyError } = useNotifications(); \n\n  async function handleLogin(e) {\n    e.preventDefault();\n\t  if (username.value !== '' && password.value !== '')\n\t\t {\n    try {\n      let result = await axios.post('/auth/login', {\n        username: username.value,\n        password: password.value,\n      });\n      if (result.data.error) {\n        if (result.data.error === '!user') {\n          setFieldErrors({\n            username: trans.login.loginUser[state.lang],\n          });\n        } else if (result.data.error === '!pass') {\n          setFieldErrors({password: trans.login.loginPass[state.lang]});\n        } else if (result.data.error === 'token') {\n          notifyError(trans.login.loginToken[state.lang]);\n        } else {\n          notifyError(trans.error.unknow[state.lang]);\n        }\n      } else\n        window.location.reload(true);\n    } catch (err) {\n          notifyError(trans.error.unknow[state.lang]);\n    }\n\t\t }\n\t  else\n      \tnotifyError(trans.error.empty[state.lang]);\n  }\n\n  async function handleForgetPass(e) {\n    e.preventDefault();\n\t\ttry {\n\t\t\tlet result = await axios.post('/auth/askForgetPass',{\n\t\t\t\t\tusername: username.value\n\t\t\t\t});\n        if (result.status === 200){\n          if (result.data.info)\n            setFieldErrors({passwordForget: trans.login.form.forgot.alreadyMail[state.lang]});\n          else\n            notifyError(trans.login.form.forgot.mail[state.lang])\n        } else\n            notifyError(trans.error.unknow[state.lang]);\n\t\t} catch(err) {\n      notifyError(trans.error.unknow[state.lang]);\n    }\n    document.getElementsByClassName('formInfo')[0].style.display = 'none';\n    document.getElementsByTagName('p')[2].style.display = 'none';\n  }\n  if (state.login) {\n    return navigate('/')\n  } else {\n    if (forgetPass) {\n      return (\n        <div className=\"identify\">\n          <p>{trans.login.form.forgot.title[state.lang]}</p>\n          <form className=\"formInfo\" onSubmit={handleForgetPass}>\n          <TextField\n            type='text'\n            {...username}\n            id=\"LoginForm\"\n            label={trans.form.placeholderUsername[state.lang]}\n            className={classes.textField}\n            margin=\"normal\"\n            variant=\"filled\"\n            error={!!fieldErrors.passwordForget}\n            helperText={fieldErrors.passwordForget}\n          />\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              id=\"sendLogin\"\n              color=\"primary\"\n              className={classes.button}\n            >\n              {trans.login.form.forgot.send[state.lang]}\n            </Button>\n          </form>\n          <Link id=\"ForgotPwd\" color=\"primary\" onClick={() => setForgetPass(false)} className={classes.link}> &larr; {trans.login.form.forgot.back[state.lang]} </Link>\n\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"identify\">\n          <form className=\"formInfo\" onSubmit={handleLogin}>\n            <TextField\n              type='text'\n              {...username}\n              id=\"LoginForm\"\n              label={trans.form.placeholderUsername[state.lang]}\n              className={classes.textField}\n              margin=\"normal\"\n              variant=\"filled\"\n              error={!!fieldErrors.username}\n              helperText={fieldErrors.username}\n            />\n            <TextField\n              type='password'\n              {...password}\n              id=\"PasswordForm\"\n              label={trans.form.placeholderPassword[state.lang]}\n              className={classes.textField}\n              margin=\"normal\"\n              variant=\"filled\"\n              error={!!fieldErrors.password}\n              helperText={fieldErrors.password}\n            />\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              id=\"sendLogin2\"\n              color=\"primary\"\n              className={classes.button}\n            >\n              {trans.login.form.connexion.submitButton[state.lang]}\n            </Button>\n            <Link\n              id=\"ForgotPwd\"\n              color=\"primary\"\n              onClick={() => setForgetPass(true)}\n              className={classes.link}\n            >\n              {trans.login.form.connexion.forgotPass[state.lang]}\n            </Link>\n          </form>\n        </div>\n      )\n    }\n  }\n}\nfunction useFormInput(init) {\n  const [value, setValue] = useState(init);\n\n  function handleChange(e) {\n    setValue(e.target.value);\n  }\n  return {\n    value,\n    onChange: handleChange\n  };\n}\n\nexport default Login;\n","import React, { useState, useContext } from 'react';\nimport Login from './Login';\nimport Register from './Register';\nimport '../../css/main.css';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport trans from '../../translate';\nimport { Store } from '../../store';\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>{children}</Box>\n    </Typography>\n  );\n}\n\nfunction Auth() {\n  const [value, setValue] = useState(0);\n  const { state } = useContext(Store);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n  return (\n    <>\n      <section className=\"auth\">\n        <div className=\"pres\">\n          <h1>HYPERTUBE</h1>\n          <p>{trans.login.slogan[state.lang]}</p>\n          <img src=\"https://www.cinehorizons.net/sites/default/files/affiches/42.jpg\" alt=\"film 42\" />\n        </div>\n        <div>\n          <Tabs\n            className=\"tabAuth\"\n            value={value}\n            indicatorColor=\"primary\"\n            onChange={handleChange}\n            centered={true}\n          >\n            <Tab label={trans.login.form.connexion.title[state.lang]} />\n            <Tab label={trans.login.form.registration.title[state.lang]} />\n          </Tabs>\n          <TabPanel value={value} index={0}>\n            <Login state={state} />\n          </TabPanel>\n          <TabPanel value={value} index={1}>\n            <Register state={state} />\n          </TabPanel>\n          <div className=\"signWith\">\n            <a href=\"http://localhost:3001/auth/42\" className=\"fortytwo\">\n              <div className=\"signLogo\">\n                <img src=\"https://upload.wikimedia.org/wikipedia/commons/8/8d/42_Logo.svg\" alt=\"logo42\" />\n                <p>{trans.login.form.omniauth[state.lang]}42</p>\n              </div>\n            </a>\n            <a href=\"http://localhost:3001/auth/instagram\" className=\"insta\">\n              <div className=\"signLogo\">\n                <img src=\"https://www.shareicon.net/download/2017/07/08/888203_photo.svg\" alt=\"logoInstagram\" />\n                <p>{trans.login.form.omniauth[state.lang]}Instagram</p>\n              </div>\n            </a>\n            <a href=\"http://localhost:3001/auth/github\" className=\"github\">\n              <div className=\"signLogo\">\n                <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/768px-Octicons-mark-github.svg.png\" alt=\"logogithub\" />\n                <p>{trans.login.form.omniauth[state.lang]}Github</p>\n              </div>\n            </a>\n          </div>\n        </div>\n      </section>\n    </>\n  );\n}\n\nexport default Auth;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { Skeleton } from '@material-ui/lab';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '300px',\n    margin: '12px',\n    backgroundColor: 'rgba(190, 190, 190, 0.45)',\n\t  boxShadow: '5px 3px 4px 0 rgba(255, 255, 255, 0.2), -7px 6px 10px 0 rgba(245, 245, 245, 0.18)',\n\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  spacingTop: {\n    marginTop: '8px',\n  },\n}));\n\nconst MovieSkeleton = () => {\n  const classes = useStyles();\n  return (\n  <div className={classes.root}>\n    <Skeleton variant=\"rect\" width={300} height={400} />\n    <Skeleton className={classes.spacingTop} variant=\"rect\" width={200} height={35} />\n    <Skeleton className={classes.spacingTop} variant=\"rect\" width={70} height={25} />\n    <Skeleton variant=\"rect\" className={classes.spacingTop} width={120} height={25} />\n    <Skeleton variant=\"rect\" className={classes.spacingTop} width={180} height={25} />\n  </div>\n  );\n}\n\nexport default MovieSkeleton;","import React, { useState, useEffect, useContext, useRef } from 'react';\nimport axios from 'axios';\nimport { Link, navigate } from '@reach/router';\nimport CatalogueBar from './catalogueBar';\nimport SortBar from './sortBar';\nimport { Store } from '../../store';\nimport Auth from '../Auth/Auth.js';\nimport MovieSkeleton from './MovieSkeleton';\nimport trans from \"./../../translate\";\nimport { useNotifications } from '../../app/useNotifications';\nimport { useHttpError } from '../../app/useHttpError';\nimport '../../css/main.css';\naxios.defaults.withCredentials = true\n\nexport default function Library() {\n\tconst { state, dispatch } = useContext(Store);\n\tconst [movies, setMovies] = useState([]);\n\tconst [page, setPage] = useState(1);\n\tconst [searchType, setSearchType] = useState('popular');\n\tconst [loader, setLoader] = useState(false);\n\tconst [tmp, setTmp] = useState(null);\n\tconst [filters, setFilters] = useState({\n\t\tyear: { on: false, value: null },\n\t\tratings: { on: false, value: null },\n\t\tgender: { on: false, value: [] }\n\t});\n\tconst [sort, setSort] = useState({value: '', order: true});\n\tconst { handleHttpResponseError } = useHttpError();\n\tconst { notifyError } = useNotifications();\n\tconst bol = useRef(false);\n\n\tuseEffect(() => {\n\t\tif (tmp) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'CACHE', payload: {\n\t\t\t\t\tsearchType: searchType,\n\t\t\t\t\tfilters: filters,\n\t\t\t\t\tsort: sort,\n\t\t\t\t\tmovies: movies\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [tmp, dispatch, filters, movies, searchType, sort])\n\n\tuseEffect(() => {\n\t\tif (state.cache && !tmp) {\n\t\t\tif (state.cache.movies) {\n\t\t\t\tsetMovies(state.cache.movies);\n\t\t\t\tsetFilters(state.cache.filters)\n\t\t\t\tsetSearchType(state.cache.searchType);\n\t\t\t\tsetSort(state.cache.sort);\n\t\t\t}\n\t\t}\n\t}, [state.cache, tmp])\n\n\tuseEffect(() => {\n\t\twindow.onload = () => {\n\t\t\tif (state && state.complete)\n\t\t\t\tdisplayData('popular', 1);\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\tfunction scrollTest(e) {\n\t\t\tlet h = document.documentElement;\n\t\t\tlet b = document.body;\n\t\t\tlet st = 'scrollTop';\n\t\t\tlet sh = 'scrollHeight';\n\t\t\tlet percent = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;\n\t\t\tif (percent >= 99 && !loader && searchType !== 'search'\n\t\t\t\t&& state.login && state.complete)\n\t\t\t\tnextPage();\n\t\t}\n\t\twindow.addEventListener('scroll', scrollTest);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('scroll', scrollTest);\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\tif (bol.current)\n\t\t\tbol.current = false;\n\t\t}\n\t}, [bol])\n\n\n\tasync function displayData(str, payload) {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tsetLoader(true);\n\t\tbol.current = true;\n\t\tif (str !== searchType) {\n\t\t\tsetSearchType(str);\n\t\t\tsetPage(1);\n\t\t\tsetMovies([]);\n\t\t\tsetFilters({\n\t\t\t\tyear: { on: false, value: null },\n\t\t\t\tratings: { on: false, value: null },\n\t\t\t\tgender: { on: false, value: [] }\n\t\t\t});\n\t\t\tsetSort({ value: '', order: true });\n\t\t}\n\t\tconst apiUri = (() => {\n\t\t\tswitch (str) {\n\t\t\t\tcase 'popular': return `/library?page=${payload || 1}`;\n\t\t\t\tcase 'lastadded': return `/library/lastadded?page=${payload || 1}`\n\t\t\t\tcase 'random': return '/library/random';\n\t\t\t\tcase 'search': return `/library/search?name=${payload || '42'}`;\n\t\t\t\tdefault: return `/library?page=${payload || 1}`;\n\t\t\t}\n\t\t})();\n\n\t\ttry {\n\t\t\tconst res = await axios.get(apiUri,{ cancelToken:source.token });\n\t\t\tif (res.data && bol.current) {\n\t\t\t\tif (str !== 'search' && str === searchType && movies)\n\t\t\t\t\tsetMovies(filterScrap([res.data, movies]));\n\t\t\t\telse\n\t\t\t\t\tsetMovies(res.data);\n\t\t\t\tsetLoader(false);\n\t\t\t\tbol.current = false;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (axios.isCancel(err))\n\t\t\t\tsource.cancel();\n\t\t\tif (err.response) {\n\t\t\t\thandleHttpResponseError(err.response.status)\n\t\t\t} else {\n\t\t\t\tnotifyError(trans.error.unknow[state.lang])\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function watchDetails(e) {\n\t\ttry {\n\t\t\tconst res = await axios.post(`/movie/add?imdb=${e.imdb}`, e);\n\t\t\tif (res.status === 200)\n\t\t\t\tnavigate(`/film/${e.imdb}`);\n\t\t} catch (err) {\n\t\t\tif (err.response)\n\t\t\t\thandleHttpResponseError(err.response.status)\t\t\t\t\n\t\t\telse\n\t\t\t\tnotifyError(trans.error.unknow[state.lang])\t\t\t\t\n\t\t}\n\t}\n\n\tfunction nextPage(e) {\n\t\tsetPage(page + 1);\n\t\tdisplayData(searchType, page + 1);\n\t}\n\n\tif (!state.login)\n\t\treturn (<Auth />)\n\telse if (!state.complete)\n\t\treturn (\n\t\t\t<p>{trans.library.complete[state.lang]}\n\t\t\t<Link className='link' to='/profil' >{trans.library.profil[state.lang]}</Link>\n\t\t\t</p>);\n\telse\n\t\treturn (\n\t\t\t<>\n\t\t\t<CatalogueBar displayData={displayData} activeTab={searchType} loader={loader}/>\n\t\t\t<SortBar state={state} movies={movies} tmp={setTmp} filters={filters} setFilters={setFilters} sort={sort} setSort={setSort} />\n\t\t\t\t<ul className='gallery'>\n\t\t\t\t\t{tmp && tmp.map((e, index) =>\n\t\t\t\t\t\t(<li key={index} className='miniature' onClick={() => watchDetails(e)}>\n\t\t\t\t\t\t\t<img src={e.image} alt={`cover${index}`} />\n\t\t\t\t\t\t\t<h2 className='movie-title'>{e.title}</h2>\n\t\t\t\t\t\t\t<span className='year'>({e.year})</span>\n\t\t\t\t\t\t\t<ul className='ratings'>\n\t\t\t\t\t\t\t\t{e.ratings && e.ratings.map((rate, index) => (<li key={index}>\n\t\t\t\t\t\t\t\t\t{rate.Source} : <span className='rate-value'>{rate.Value}</span></li>))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t{state.views.includes(e.title) && <span role='img' aria-label='down-arrow'>&#128526;</span>}\n\t\t\t\t\t\t</li>))}\n\t\t\t\t\t{loader && [...Array(6)].map((_, idx) => (\n\t\t\t\t\t\t<MovieSkeleton key={idx} />\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</>\n\t\t);\n}\n\nfunction filterScrap(data) {\n\tlet imdb = data[1].map(e => e.imdb);\n\tdata[0] = data[0].filter(e => !imdb.includes(e.imdb));\n\treturn (data[1].concat(data[0]));\n}\n","import React, { useEffect, useState, useContext } from 'react';\nimport { Link } from '@reach/router';\nimport axios from 'axios';\nimport {\n  makeStyles,\n  Avatar,\n  CircularProgress,\n  Typography,\n  List,\n  ListItem,\n  ListSubheader,\n  ListItemText,\n} from '@material-ui/core';\n// import { useHttpError } from '../app/useHttpError';\nimport { Store } from '../store';\nimport trans from '../translate';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  bigAvatar: {\n    width: 180,\n    height: 180,\n  },\n  title: {\n    margin: 10,\n  },\n});\n\nconst Profile = ({ username }) => {\n  const [profileInfos, setProfileInfos] = useState(null);\n  const classes = useStyles();\n  // const { handleHttpResponseError } = useHttpError();\n  const { state } = useContext(Store);\n\n  useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    const fetchProfile = async () => {\n      try {\n        const res = await axios.get(`/user/other/${username}`,\n          { cancelToken: source.token });\n        setProfileInfos(res.data);\n      } catch (err) {\n        if (err.response) {\n          // handleHttpResponseError(err.response.status);\n        } else if (axios.isCancel(err)) {\n          source.cancel();\n        }\n      }\n    }\n    fetchProfile();\n    return () => {\n      source.cancel();\n    }\n  }, [username]);\n\n  const content = profileInfos ? (\n    <>\n      <Avatar alt=\"Stock avatar\" src={profileInfos.avatar} className={classes.bigAvatar} />\n      <Typography variant=\"h3\">{profileInfos.username}</Typography>\n      <Typography variant=\"h6\">{`${profileInfos.firstname} ${profileInfos.lastname}`}</Typography>\n      <List\n        className={classes.root}\n        component=\"nav\"\n        aria-labelledby=\"nested-list-subheader\"\n        subheader={(\n          <ListSubheader color=\"primary\" component=\"div\" id=\"nested-list-subheader\">\n            {trans.profil.history[state.lang]}\n          </ListSubheader>\n        )}\n      >\n        {profileInfos.views.map((movie, idx) => (\n          <Link key={idx} to={`/film/${movie.imdb}`}>\n            <ListItem button >\n              <ListItemText primary={movie.title} />\n            </ListItem>\n          </Link>\n        ))}\n      </List>\n    </>\n  ) : (\n      <CircularProgress />\n    );\n\n  return (\n    <div className={classes.root}>\n      {content}\n    </div>\n  );\n}\n\nexport default Profile;\n","import React from 'react'\nimport {\n  Typography, IconButton,\n} from '@material-ui/core';\nimport { Close } from '@material-ui/icons';\nimport { Link } from '@reach/router';\nimport classes from './Comment.module.css';\n\nconst Comment = ({\n  username,\n  message,\n  time,\n  deletable,\n  onDelete,\n}) => (\n  <div className={classes.root}>\n    { deletable && (\n      <div className={classes.closeIcon}>\n        <IconButton onClick={onDelete} >\n          <Close />\n        </IconButton>\n      </div>\n    )}\n    <Typography\n      component=\"p\"\n      className={classes.timestamp}\n      color=\"textPrimary\"\n      variant=\"caption\"\n    >\n      {time}\n    </Typography>\n    <Typography\n      className={classes.username}\n      color=\"textPrimary\"\n      variant=\"overline\"\n    >\n      <Link to={`/membres/${username}`}>{username}</Link>\n    </Typography>\n    <Typography\n      className={classes.comment}\n      color=\"textPrimary\"\n      variant=\"body1\"\n    >\n      {message}\n    </Typography>\n  </div>\n);\n\nexport default Comment;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Comment from './components/Comment';\nimport { Divider, Typography, Button } from '@material-ui/core';\nimport classes from './Comments.module.css';\nimport trans from '../../translate';\nimport { useNotifications } from '../../app/useNotifications';\nimport { useHttpError } from '../../app/useHttpError';\n\nexport default function Comments(props) {\n\tconst { imdb, title, userid, username, state } = props;\n\tconst [comment, setComment] = useState('');\n\tconst [comments, setComments] = useState(null);\n\tconst [error, setError] = useState(false);\n\tconst { notifyError } = useNotifications();\n\tconst { handleHttpResponseError } = useHttpError();\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function fetchComment() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/movie/comment/display?imdb=${imdb}&title=${title}`, {cancelToken:source.token});\n\t\t\t\tif (res.data)\n\t\t\t\t\tsetComments(res.data);\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t\telse\n\t\t\t\t\tsetError('unknow');\n\t\t\t}\n\t\t}\n\t\tif (!comments)\n\t\t\tfetchComment();\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [comments, imdb, title])\n\n\tasync function sendComment(e) {\n\t\te.preventDefault();\n\t\tif (comment !== '')\n\t\t{\n\t\t\ttry {\n\t\t\t\tlet res = await axios.post('/movie/comment/add', {\n\t\t\t\t\timdb: imdb,\n\t\t\t\t\tid: userid,\n\t\t\t\t\tcomment: comment\n\t\t\t\t});\n\t\t\t\tif (res.data && !res.data.error)\n\t\t\t\t{\n\t\t\t\t\tsetComments([{...res.data, username: username},\n\t\t\t\t\t\t...comments]);\n\t\t\t\t\tsetComment('');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tnotifyError(trans.error.format[state.lang]);\n\t\t\t} catch (err) {\n\t\t\t\tif (err.response) {\n\t\t\t\t\thandleHttpResponseError(err.response.status);\n\t\t\t\t} else {\n\t\t\t\t\tnotifyError(trans.error.unknow[state.lang]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function delComment(c) {\n\t\ttry {\n\t\t\t\tlet res = await axios.post('/movie/comment/delete', {\n\t\t\t\t\timdb: imdb,\n\t\t\t\t\tid: c.userId,\n\t\t\t\t\tcommentId: c._id\n\t\t\t\t});\n\t\t\tif (res.status === 200)\n\t\t\t\tsetComments(comments.filter(f => f._id !== c._id));\n\t\t} catch (err) {\n\t\t\tif (err.response) {\n\t\t\t\thandleHttpResponseError(err.response.status);\n\t\t\t} else {\n\t\t\t\tnotifyError(trans.error.unknow[state.lang]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction pressEnter(e) {\n\t\tif (e.key === 'Enter' && !e.shiftKey)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tvar evt = new MouseEvent(\"click\");\n\t\t\tevt.initMouseEvent(\"click\", true, true, window,\n\t\t\t\t0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t\t\tdocument.getElementById(`submit-comment`).dispatchEvent(evt);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t{error}\n\t\t\t<form onSubmit={sendComment}>\n\t\t\t\t<Typography variant=\"h4\" color=\"textPrimary\">{trans.movie.form.title[state.lang]}</Typography>\n\t\t\t\t<textarea\n\t\t\t\t\tclassName={classes.commentPost}\n\t\t\t\t\tplaceholder={trans.movie.form.textarea[state.lang]}\n\t\t\t\t\tvalue={comment}\n\t\t\t\t\tonChange={(e) => setComment(e.target.value)}\n\t\t\t\t\tonKeyDown={pressEnter}\n\t\t\t\t\trows='5'\n\t\t\t\t\tcols='80'\n\t\t\t\t/>\n\t\t\t\t<Button id=\"submit-comment\" type=\"submit\" variant=\"contained\" color=\"primary\">{trans.movie.form.submit[state.lang]}</Button>\n\t\t\t</form>\n\t\t\t<Divider variant=\"fullWidth\" style={{ marginTop: 20, marginBottom: 20 }} />\n\t\t\t<div>\n\t\t\t\t{comments && comments.map((c, idx) => (\n\t\t\t\t\t<Comment\n\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\tusername={c.username}\n\t\t\t\t\t\ttime={displayDate(c.date)}\n\t\t\t\t\t\tmessage={c.content}\n\t\t\t\t\t\tdeletable={c.username === username}\n\t\t\t\t\t\tonDelete={() => delComment(c)}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction displayDate(date) {\t\n\tlet d = new Date(date);\n\treturn `${d.getHours()}:${d.getMinutes()} - ${d.getDate()}/${d.getMonth()}/${d.getFullYear()}`;\n}\n","import React from 'react';\nimport {\n  makeStyles,\n  Table,\n  Paper,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  IconButton,\n} from '@material-ui/core';\nimport frenchFlagImg from '../../../assets/images/flag_fr.png';\nimport englishFlagImg from '../../../assets/images/flag_en.png';\nimport trans from '../../../translate';\n\nimport { RemoveRedEye as ViewIcon } from '@material-ui/icons';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    minWidth: '360px',\n    maxWidth: '800px',\n    marginTop: theme.spacing(3),\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    overflowX: 'auto',\n  },\n  table: {\n    width: '100%',\n  },\n  langFlag: {\n    width: '20px',\n  },\n}));\n\nexport default function TorrentTable({\n  torrentList,\n  onClickOnView,\n  state,\n}) {\n  const classes = useStyles();\n  return (\n      <Paper className={classes.root}>\n        <Table className={classes.table}>\n          <TableHead>\n            <TableRow>\n              <TableCell>{trans.movie.tTable.quality[state.lang]}</TableCell>\n              <TableCell>Seeds</TableCell>\n              <TableCell>Peers</TableCell>\n              <TableCell>{trans.movie.tTable.language[state.lang]}</TableCell>\n              <TableCell>{trans.movie.tTable.link[state.lang]}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            { torrentList.map(torrent => (\n              <TableRow key={torrent.hash || torrent.magnet}>\n                <TableCell>{torrent.quality}</TableCell>\n                <TableCell>{torrent.seeds}</TableCell>\n                <TableCell>{torrent.peers}</TableCell>\n                <TableCell>\n                  <img \n                    className={classes.langFlag}\n                    src={getFlagSrcByLang(torrent.lang)}\n                    alt={torrent.lang}\n                  />\n                </TableCell>\n                <TableCell>\n                  <IconButton onClick={() => onClickOnView(torrent)}>\n                    <ViewIcon />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </Paper>\n  );\n}\n\nfunction getFlagSrcByLang(lang) {\n  switch (lang.toLowerCase()) {\n    case 'english':\n    case 'eng': return englishFlagImg;\n    case 'fre':\n    case 'french':\n    case 'fr': return frenchFlagImg;\n    default: return englishFlagImg;\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { Link as RouterLink } from \"@reach/router\";\nimport ts from './translate';\n/* assets */\nimport frenchFlagImg from './assets/images/flag_fr.png';\nimport englishFlagImg from './assets/images/flag_en.png';\nimport { useMediaQuery } from '@material-ui/core';\n\nimport {\n  MenuItem,\n  makeStyles,\n  IconButton,\n  Toolbar,\n  Typography,\n  Button,\n  Menu,\n  AppBar as MuiAppBar,\n} from '@material-ui/core';\nimport {\n  Home as HomeIcon,\n  Person,\n} from '@material-ui/icons'\n\n/* Navbar JSS styling */\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    \n  },\n  title: {\n    flexGrow: 1,\n  },\n  langSwitch: {\n    width: '40px',\n    height: '100%',\n  },\n  langImg: {\n    width: '30px',\n  },\n}));\n\nconst AppBar = ({\n  auth,\n  onChangeLang,\n  onClickLogout,\n  lang,\n}) => {\n  const classes = useStyles();\n  const mediaSmall = useMediaQuery('(max-width:600px)');\n  const [anchorElem, setAnchorElem] = useState(null);\n  const [activeMenu, setActiveMenu] = useState('');\n\n  /*  side effect for active menu  */\n  useEffect(() => {\n    // close and reset menu infos only if it is the account menu.\n    // do not apply this behaviour for language menu.\n    if (!!mediaSmall === false && activeMenu === 'accountMenu') {\n      setActiveMenu('');\n      setAnchorElem(null);\n    }\n  }, [mediaSmall, activeMenu])\n\n  const handleClose = () => setAnchorElem(null);\n\n  const langMenuItems = [\n    { name: 'eng', selected: 'eng' === lang, img: englishFlagImg },\n    { name: 'fr', selected: 'fr' === lang, img: frenchFlagImg },\n  ];\n\n  const handleLangMenu = item => {\n    onChangeLang(item);\n    handleClose();\n  };\n\n  const handlemenu = (e, menu) => {\n    setAnchorElem(e.currentTarget);\n    setActiveMenu(menu);\n  };\n\n  const langSection = (\n    <>\n      <IconButton onClick={e => handlemenu(e, 'langMenu')}>\n        <img className={classes.langImg} src={lang === 'eng' ? englishFlagImg : frenchFlagImg} alt={lang.name} />\n      </IconButton>\n      <Menu\n        id=\"lang-menu\"\n        anchorEl={anchorElem}\n        keepMounted\n        open={!!anchorElem && activeMenu === 'langMenu'}\n        onClose={handleClose}\n      >\n        { langMenuItems.map(lang => (\n          <MenuItem\n            key={lang.name}\n            onClick={() => handleLangMenu(lang.name)}\n            selected={lang.selected}\n          >\n          <img className={classes.langImg} src={lang.img} alt={lang.name} />\n        </MenuItem>\n        ))}\n      </Menu>\n    </>\n  );\n\n  const authSection = mediaSmall ? (\n    <>\n      <IconButton onClick={e => handlemenu(e, 'accountMenu')}>\n        <Person />\n      </IconButton>\n      <Menu\n      id=\"lang-menu\"\n      anchorEl={anchorElem}\n      keepMounted\n      open={!!anchorElem && activeMenu === 'accountMenu'}\n      onClose={handleClose}\n      onClick={handleClose}\n      >\n        <MenuItem>\n          <RouterLink to=\"/profil\">\n            {ts.navbar.profil[lang]}\n          </RouterLink>\n        </MenuItem>\n        <MenuItem onClick={onClickLogout}>\n          {ts.navbar.logout[lang]}\n        </MenuItem>\n      </Menu>\n    </>\n  ) : (\n    <>\n      <RouterLink to=\"/profil\">\n        <Button>\n          {ts.navbar.profil[lang]} \n        </Button>\n      </RouterLink>\n        <Button\n          onClick={onClickLogout}\n          color=\"inherit\"\n        >\n          {ts.navbar.logout[lang]}\n        </Button>\n    </>\n  );\n\n  return (\n    <header className={classes.root}>\n      <MuiAppBar position=\"static\">\n        <Toolbar>\n          <RouterLink to=\"/\">\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"menu\"\n            >\n              <HomeIcon />\n            </IconButton>\n          </RouterLink>\n          <Typography variant=\"h6\" className={classes.title}>\n            { mediaSmall ? '#HPTB' : 'HYPERTUBE'}\n          </Typography>\n          { langSection }\n          { auth && authSection}\n        </Toolbar>\n      </MuiAppBar>\n    </header>\n  );\n}\n\nexport default AppBar;\n","import React, { useContext } from 'react';\nimport AppBar from './Navbar';\nimport axios from 'axios';\nimport { navigate } from \"@reach/router\";\nimport { Store } from './store';\n\nfunction Layout({ children }) {\n  const { state, dispatch } = useContext(Store);\n\n  async function handleChangeLang(langName){\n    if (state.id) {\n      try {\n        let result = await axios.post(`/user/editLang/${state.id}/${langName}`);\n        if (result.status === 200) {\n          dispatch({type: 'LANG', payload: langName});\n        }\n      } catch (e) {\n      }\n    } else {\n      dispatch({type: 'LANG', payload: langName});\n    }\n  }\n\n  async function HandleLogout() {\n    try {\n      let result = await axios.get('/auth/logout');\n      if (result.status === 200) {\n        dispatch({type: 'LOGOUT'});\n        navigate('/');\n      }\n    } catch (e) {\n    }\n  }\n\n  return (\n    <div>\n      <AppBar auth={state.login} onChangeLang={handleChangeLang} onClickLogout={HandleLogout} lang={state.lang}/>\n      <main>\n        {children}\n      </main>\n    </div>\n  );\n}\n\nexport default Layout;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from '@reach/router';\nimport { SnackbarProvider } from 'notistack';\nimport { MuiThemeProvider } from '@material-ui/core';\nimport { Activate } from './pages/Auth/Register.js';\nimport { StoreProvider } from './store';\nimport { createHypertubeTheme } from './app/theme';\n\nimport Account from './pages/Account';\nimport EditPass from './pages/EditPass';\nimport Home from './pages/Home/index';\nimport NotFound from './pages/404';\nimport Profile from './pages/Profile';\nimport Movie from './pages/Movie/index';\nimport Layout from './Layout';\n\n\nReactDOM.render(\n\t<MuiThemeProvider theme={createHypertubeTheme()} >\n\t\t<StoreProvider>\n\t\t\t<SnackbarProvider maxSnack={3}>\n\t\t\t<Layout>\n\t\t\t\t<Router>\n\t\t\t\t\t<Home path='/' />\n\t\t\t\t\t<Account path='/profil' />\n\t\t\t\t\t<Movie path='/film/:imdb' />\n\t\t\t\t\t<EditPass path='/motdepasse/:token' />\n\t\t\t\t\t<Activate path='/activer/:token' />\n\t\t\t\t\t<Profile path='/membres/:username' />\n\t\t\t\t\t<NotFound default />\n\t\t\t\t</Router>\n\t\t\t</Layout>\n\t\t\t</SnackbarProvider>\n\t\t</StoreProvider>\n\t</MuiThemeProvider >,\n\tdocument.getElementById('root'));\n","import { createMuiTheme } from '@material-ui/core';\nimport yellow from '@material-ui/core/colors/yellow';\nimport amber from '@material-ui/core/colors/amber';\nimport red from '@material-ui/core/colors/red';\n\nexport function createHypertubeTheme() {\n  return createMuiTheme({\n    palette: {\n      primary: {\n        light: yellow[600],\n        main: yellow[700],\n        dark: yellow[800]\n      },\n      secondary: {\n        light: amber[300],\n        main: amber[700],\n        dark: amber[800],\n      },\n      error: red,\n    },\n  });\n}","import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport Comments from './comments';\nimport {\n\tButton,\n\tTypography,\n\tCircularProgress,\n} from '@material-ui/core';\nimport { Link, navigate } from '@reach/router';\nimport { Store } from '../../store';\nimport NotFound from '../404';\nimport TorrentTable from './components/TorrentTable';\nimport trans from '../../translate';\nimport { useHttpError } from '../../app/useHttpError';\n\nexport default function Movie({ imdb }) {\n\tconst { state, dispatch } = useContext(Store);\n\tconst [movie, setMovie] = useState(null);\n\tconst [videoSrc, setVideoSrc] = useState(null);\n\tconst [subtitles, setSubtitles] = useState(null);\n\tconst [synopsis, setSynopsis] = useState('');\n\tconst { handleHttpResponseError } = useHttpError();\n\n\tuseEffect(() => {\n\t\tlet int;\n\t\tlet sub = document.getElementsByClassName('subtitles')[0];\n\t\tif (sub)\n\t\t\tint = setTimeout(() => {sub.style.display = 'none'}, 3000)\n\t\treturn () => {\n\t\t\tif (int)\n\t\t\t\tclearTimeout(int)\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function fetchMovie() {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.get(`/movie/info/${imdb}`,\n\t\t\t\t\t{ cancelToken:source.token });\n\t\t\t\tif (res.data)\n\t\t\t\t\tsetMovie(res.data.data);\n\t\t\t\telse\n\t\t\t\t\tnavigate('/404');\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t\tnavigate('/404');\n\t\t\t}\n\t\t}\n\t\tif (imdb)\n\t\t\tfetchMovie();\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [imdb])\n\n\tuseEffect(() => {\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tasync function translateSyn(text) {\n\t\t\ttry {\n\t\t\t\tlet res = await axios.post('/movie/translate',\n\t\t\t\t\t{text:text}, {cancelToken:source.token});\n\t\t\t\tif (res.data.text)\n\t\t\t\t\tsetSynopsis(res.data.text);\n\t\t\t\telse\n\t\t\t\t\tsetSynopsis(text);\n\t\t\t} catch (err) {\n\t\t\t\tif (axios.isCancel(err))\n\t\t\t\t\tsource.cancel();\n\t\t\t\tsetSynopsis(text);\n\t\t\t}\n\t\t}\n\t\tif (movie)\n\t\t{\n\t\t\tif (state.lang === 'fr')\n\t\t\t\ttranslateSyn(movie.synopsis);\n\t\t\telse\n\t\t\t\tsetSynopsis(movie.synopsis);\n\t\t}\n\t\treturn () => {\n\t\t\tsource.cancel();\n\t\t}\n\t}, [movie, state.lang])\n\n\tasync function goStream(hash, quality) {\n\t\thash.includes('magnet') ?\n\t\t\tsetVideoSrc(`http://localhost:3001/movie/watch/${hash}`\n\t\t\t+ `&imdb=${imdb}&quality=${quality}`)\n\t\t\t: setVideoSrc(`http://localhost:3001/movie/watch/${hash}?`\n\t\t\t+ `imdb=${imdb}&quality=${quality}`)\n\t\ttry {\n\t\t\tlet res = await axios.get(`/movie/subtitles/?imdb=${imdb}`);\n\t\t\tif (res.data)\n\t\t\t\tsetSubtitles(res.data);\n\t\t\tif (!state.views.find(e => e.title === movie.title))\n\t\t\t{\n\t\t\t\taxios.post(`/user/addview`, {\n\t\t\t\t\tid: state.id,\n\t\t\t\t\ttitle: movie.title,\n\t\t\t\t\timdb: imdb\n\t\t\t\t});\n\t\t\t\tdispatch({type: 'VIEW', payload: [...state.views,\n\t\t\t\t\t{imdb: imdb, title: movie.title}\n\t\t\t\t]});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (err.response) {\n\t\t\t\thandleHttpResponseError(err.response.status);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction backToCatalogue() {\n\t\tnavigate('/');\n\t}\n\n\n\tif (!state.login)\n\t\treturn (<NotFound />);\n\telse if (!state.complete)\n\t\treturn (\n\t\t\t<p>Veuillez completer votre\n\t\t<Link to='/profil'>profil</Link>\n\t\t\t</p>);\n\telse\n\t{\n\tif (!movie)\n\t\treturn (<CircularProgress />)\n\telse\n\t\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tstyle={{ margin: '24px 0 0 16px' }}\n\t\t\t\tonClick={backToCatalogue}\n\t\t\t\tvariant=\"contained\"\n\t\t\t>\n\t\t\t\t\t{trans.movie.backlink[state.lang]}\n\t\t\t</Button>\n\t\t\t<Typography variant=\"h1\">\n\t\t\t\t{movie.title}\n\t\t\t</Typography>\n\t\t\t<div className=\"video\">\n\t\t\t\t{videoSrc ?\n\t\t\t\t\t<video key={videoSrc} width=\"640\" height=\"320\" controls autoPlay>\n\t\t\t\t\t\t<source src={videoSrc} />\n\t\t\t\t\t\t\t{subtitles && subtitles.map((e, index) => (<track key={index} kind=\"subtitles\" src={e.path} srcLang={e.lang} />))}\n\t\t\t\t\t\t</video> : <img src={movie.image} alt={`${movie.title}-cover`}/>}\n\t\t\t\t\t</div>\n\t\t\t\t\t\t{subtitles && subtitles.length > 0 && <div className='subtitles'><span  role='img' aria-label='icon'>&#8618;</span> {trans.movie.subtitles[state.lang]}</div>}\n\t\t\t\t\t\t\t{videoSrc && <div style={{display:'flex'}}><img src={movie.image} alt={`${movie.title}-cover`} style={{width: '100px', margin:'auto'}}/></div>}\n\t\t\t\t\t\t\t<TorrentTable\n\t\t\t\t\t\t\t\ttorrentList={movie.torrents}\n\t\t\t\t\t\t\t\tonClickOnView={(torrent) => goStream(torrent.hash || torrent.magnet, torrent.quality)}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ul className='movie-details'>\n\t\t\t\t\t\t\t\t<li key='synopsis'>{synopsis}</li>\n\t\t\t\t\t\t\t\t<li key='year'>{trans.movie.year[state.lang]}: {movie.year}</li>\n\t\t\t\t\t\t\t\t<li key='director'>{trans.movie.director[state.lang]}: {movie.director}</li>\n\t\t\t\t\t\t\t\t<li key='actors'>{trans.movie.actor[state.lang]}: {movie.actors}</li>\n\t\t\t\t\t\t\t\t<li key='genre'>{trans.movie.gender[state.lang]}:<ul>\n\t\t\t\t\t\t\t\t\t\t\t/ {movie.genre.map((f, index) => (<span key={index}>{f} / </span>))}\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>Box office : {movie.boxoffice}</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<Comments imdb={imdb} title={movie.title} userid={state.id} username={state.username} state={state} />\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t);\n\t}\n}\n","module.exports = __webpack_public_path__ + \"static/media/flag_en.6f382b2d.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Comment_root__EDro2\",\"timestamp\":\"Comment_timestamp__3INX5\",\"username\":\"Comment_username__1MWqr\",\"comment\":\"Comment_comment__JTTVc\",\"closeIcon\":\"Comment_closeIcon__x4PoN\"};","module.exports = __webpack_public_path__ + \"static/media/flag_fr.78e9f99b.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Comments_root__Z6M7q\",\"commentPost\":\"Comments_commentPost__9eA_T\"};"],"sourceRoot":""}